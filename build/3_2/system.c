/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

#include <sys/mman.h>
#include <pthread.h>
#include <errno.h>
#include <stdio.h>
#include <signal.h>
#include <dlfcn.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY11190 TY11190;
typedef struct TY10818 TY10818;
typedef struct TY10802 TY10802;
typedef struct TY10814 TY10814;
typedef struct TY10810 TY10810;
typedef struct TY11188 TY11188;
typedef struct TY8874 TY8874;
typedef struct TY8832 TY8832;
typedef struct TY8830 TY8830;
typedef struct TY8822 TY8822;
typedef struct TY8872 TY8872;
typedef struct TY8834 TY8834;
typedef struct TY8811 TY8811;
typedef struct TY8807 TY8807;
typedef struct TY420 TY420;
typedef struct TY418 TY418;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
typedef struct TNimObject TNimObject;
typedef struct TSafePoint TSafePoint;
typedef struct TY442 TY442;
typedef struct TY452 TY452;
typedef struct TY4377 TY4377;
typedef struct EOverflow EOverflow;
typedef struct TY428 TY428;
typedef struct EAssertionFailed EAssertionFailed;
typedef struct TY448 TY448;
typedef struct TY444 TY444;
typedef struct TY446 TY446;
typedef struct TY456 TY456;
typedef struct TY454 TY454;
typedef struct EDivByZero EDivByZero;
typedef struct EFloatInvalidOp EFloatInvalidOp;
typedef struct TY458 TY458;
typedef struct EFloatOverflow EFloatOverflow;
typedef struct EFloatUnderflow EFloatUnderflow;
typedef struct TY8202 TY8202;
typedef struct TY18672 TY18672;
typedef N_NIMCALL_PTR(void, TY2718) (void);
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11188 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11190 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
NI Cyclerootslock;
NI Zctlock;
TY11188 Stat;
};
struct TY8830 {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct TY8832 {
  TY8830 Sup;
TY8832* Next;
TY8832* Prev;
TY8822* Freelist;
NI Free;
NI Acc;
NF64 Data;
};
typedef TY8832* TY8881[512];
typedef TY8807* TY8809[1024];
struct TY8811 {
TY8809 Data;
};
struct TY8874 {
TY8872* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
TY8881 Freesmallchunks;
TY8834* Freechunkslist;
TY8811 Chunkstarts;
};
struct TY8834 {
  TY8830 Sup;
TY8834* Next;
TY8834* Prev;
NI Align;
NF64 Data;
};
typedef NI TY8814[8];
struct TY8807 {
TY8807* Next;
NI Key;
TY8814 Bits;
};
struct TY8872 {
NI Size;
NI Acc;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct E_Base {
  TNimObject Sup;
E_Base* parent;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY418 {
  TY416 Sup;
};
struct TY420 {
  TY418 Sup;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY8822 {
TY8822* Next;
NI Zerofield;
};
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
typedef N_NIMCALL_PTR(void, TFinalizer) (void* Self_11194);
struct TSafePoint {
TSafePoint* prev;
NI status;
E_Base* exc;
jmp_buf context;
};
struct TY442 {
  TY418 Sup;
};
struct TY452 {
  TY416 Sup;
};
typedef NimStringDesc* TY4102[5];
struct TY428 {
  TY416 Sup;
};
struct EOverflow {
  TY428 Sup;
};
typedef TFrame* TY4656[128];
struct EAssertionFailed {
  TY416 Sup;
};
struct TY448 {
  TY416 Sup;
};
struct TY444 {
  TY416 Sup;
};
struct TY446 {
  TY416 Sup;
};
typedef NIM_CHAR TY18262[60];
struct TY456 {
  TY416 Sup;
};
struct TY454 {
  TY416 Sup;
};
struct EDivByZero {
  TY428 Sup;
};
struct TY458 {
  TY416 Sup;
};
struct EFloatInvalidOp {
  TY458 Sup;
};
struct EFloatOverflow {
  TY458 Sup;
};
struct EFloatUnderflow {
  TY458 Sup;
};
typedef NI8 TY7202[8192];
typedef N_CDECL_PTR(void, TY8204) (void* Closure_8208);
struct TY18672 {
TY10814 Marked;
NI Recdepth;
NI Indent;
};
struct TY8202 {
NI Id;
TY8202* Next;
};
struct TY4377 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Add_2722)(NimStringDesc** X_2725, NCSTRING Y_2726);
static N_INLINE(NF, HEX2F_2802)(NI X_2804, NI Y_2805);
static N_INLINE(void, Initstackbottom_3013)(void);
N_NOINLINE(void, setStackBottom)(void* Thestackbottom_1624);
N_NIMCALL(void, Initgc_3011)(void);
N_NIMCALL(void, Init_10878)(TY10818* S_10881, NI Cap_10882);
N_NOCONV(void*, Alloc0_1953)(NI Size_1955);
N_NOCONV(void*, Alloc_1950)(NI Size_1952);
N_NIMCALL(void*, Rawalloc_9795)(TY8874* A_9798, NI Requestedsize_9799);
static N_INLINE(NI, Roundup_8856)(NI X_8858, NI V_8859);
N_NIMCALL(TY8832*, Getsmallchunk_9762)(TY8874* A_9765);
N_NIMCALL(TY8834*, Getbigchunk_9692)(TY8874* A_9695, NI Size_9696);
N_NIMCALL(void, Splitchunk_9666)(TY8874* A_9669, TY8834* C_9670, NI Size_9671);
static N_INLINE(void, Updateprevsize_9211)(TY8874* A_9214, TY8834* C_9215, NI Prevsize_9216);
static N_INLINE(NIM_BOOL, Isaccessible_9152)(void* P_9154);
N_NIMCALL(NIM_BOOL, Contains_9011)(TY8811* S_9013, NI Key_9014);
N_NIMCALL(TY8807*, Intsetget_8974)(TY8811* T_8976, NI Key_8977);
static N_INLINE(NI, Pageindex_9081)(void* P_9083);
N_NIMCALL(void, Incl_9031)(TY8811* S_9034, NI Key_9035);
N_NIMCALL(TY8807*, Intsetput_8993)(TY8811* T_8996, NI Key_8997);
N_NIMCALL(void*, Llalloc_8930)(TY8874* A_8933, NI Size_8934);
static N_INLINE(void*, Osallocpages_8413)(NI Size_8415);
N_NIMCALL(void, Raiseoutofmem_8259)(void);
N_NIMCALL(void, Quit_2822)(NimStringDesc* Errormsg_2824);
static N_INLINE(void, rawEcho)(NimStringDesc* X_4094);
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661);
N_NIMCALL(NI, Writebuffer_3733)(FILE* F_3735, void* Buffer_3736, NI Len_3737);
N_NIMCALL(void*, newObj)(TNimType* Typ_12507, NI Size_12508);
static N_INLINE(void, Lock_11213)(TY11190* Gch_11216);
static N_INLINE(void, Checkcollection_12500)(void);
N_NIMCALL(void, Collectct_11805)(TY11190* Gch_11808);
N_NIMCALL(NI, Getoccupiedmem_2017)(void);
N_NIMCALL(NI, Gettotalmem_2021)(void);
N_NIMCALL(NI, Getfreemem_2019)(void);
N_NOINLINE(NI, Stacksize_15601)(void);
N_CDECL(void, Markstackandregisters_15615)(TY11190* Gch_15618);
static N_INLINE(void, Gcmark_14803)(void* P_14805);
static N_INLINE(TY10802*, Usrtocell_11236)(void* Usr_11238);
N_NIMCALL(NIM_BOOL, Isallocatedptr_10401)(TY8874* A_10403, void* P_10404);
static N_INLINE(TY8830*, Pageaddr_9085)(void* P_9087);
static N_INLINE(NIM_BOOL, Chunkunused_9207)(TY8830* C_9209);
static N_INLINE(NIM_BOOL, Issmallchunk_9201)(TY8830* C_9203);
static N_INLINE(void, Add_10858)(TY10818* S_10861, TY10802* C_10862);
N_NOCONV(void, Dealloc_1960)(void* P_1962);
N_NIMCALL(void, Rawdealloc_10064)(TY8874* A_10067, void* P_10068);
N_NIMCALL(void, Freebigchunk_9220)(TY8874* A_9223, TY8834* C_9224);
N_NIMCALL(void, Excl_9038)(TY8811* S_9041, NI Key_9042);
static N_INLINE(NI, Pageindex_9077)(TY8830* C_9079);
N_NIMCALL(void, Freeoschunks_9126)(TY8874* A_9129, void* P_9130, NI Size_9131);
static N_INLINE(void, Osdeallocpages_8417)(void* P_8419, NI Size_8420);
static N_INLINE(void, Deccurrmem_8903)(TY8874* A_8906, NI Bytes_8907);
N_NIMCALL(void, Markthreadstacks_14811)(TY11190* Gch_14814);
N_NIMCALL(void, Collectzct_15801)(TY11190* Gch_15804);
static N_INLINE(NIM_BOOL, Canbecycleroot_11240)(TY10802* C_11242);
N_NIMCALL(void, Excl_11081)(TY10814* S_11084, TY10802* Cell_11085);
N_NIMCALL(TY10810*, Cellsetget_10914)(TY10814* T_10916, NI Key_10917);
static N_INLINE(NI, Nexttry_10909)(NI H_10911, NI Maxhash_10912);
N_NIMCALL(void, Preparedealloc_11825)(TY10802* Cell_11827);
static N_INLINE(void*, Celltousr_11232)(TY10802* Cell_11234);
N_NIMCALL(void, Forallchildren_11812)(TY10802* Cell_11814, NU8 Op_11815);
N_NIMCALL(void, Forallchildrenaux_11820)(void* Dest_11822, TNimType* Mt_11823, NU8 Op_11824);
N_NIMCALL(void, Dooperation_11816)(void* P_11818, NU8 Op_11819);
N_NOINLINE(void, Addzct_11225)(TY10818* S_11228, TY10802* C_11229);
N_NIMCALL(void, Forallslotsaux_12401)(void* Dest_12403, TNimNode* N_12405, NU8 Op_12406);
N_NIMCALL(TNimNode*, Selectbranch_7263)(void* Aa_7265, TNimNode* N_7267);
N_NIMCALL(NI, Getdiscriminant_7243)(void* Aa_7245, TNimNode* N_7247);
N_NIMCALL(void, Collectcycles_14003)(TY11190* Gch_14006);
N_NIMCALL(void, Init_10888)(TY10814* S_10891);
N_NIMCALL(NIM_BOOL, Containsorincl_11099)(TY10814* S_11102, TY10802* Cell_11103);
N_NOINLINE(void, Incl_11074)(TY10814* S_11077, TY10802* Cell_11078);
N_NIMCALL(TY10810*, Cellsetput_10995)(TY10814* T_10998, NI Key_10999);
N_NIMCALL(void, Cellsetenlarge_10970)(TY10814* T_10973);
N_NIMCALL(void, Cellsetrawinsert_10933)(TY10814* T_10935, TY10810** Data_10936, TY10810* Desc_10937);
N_NIMCALL(NIM_BOOL, Contains_11054)(TY10814* S_11056, TY10802* Cell_11057);
N_NIMCALL(void, Deinit_10892)(TY10814* S_10895);
N_NIMCALL(void, Unmarkstackandregisters_16401)(TY11190* Gch_16404);
static N_INLINE(void, Decref_11864)(TY10802* C_11866);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_11858)(TY10802* C_11860);
static N_INLINE(void, Rtladdcycleroot_11852)(TY10802* C_11854);
static N_INLINE(void, Unlock_11219)(TY11190* Gch_11222);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12018, void* Src_12019);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17508);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_17487);
N_NIMCALL(void, raiseException)(E_Base* E_5204, NCSTRING Ename_5205);
N_NIMCALL(void, Gcdisable_2663)(void);
static N_INLINE(void, pushCurrentException)(E_Base* E_4641);
static N_INLINE(void, asgnRef)(void** Dest_12014, void* Src_12015);
static N_INLINE(void, Incref_12002)(TY10802* C_12004);
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17625, NI Newlen_17626);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_17582, NI Addlen_17583);
static N_INLINE(NI, Resize_17401)(NI Old_17403);
N_NIMCALL(void*, Growobj_13007)(void* Old_13009, NI Newsize_13010);
N_NIMCALL(void, Rawwritestacktrace_4843)(NimStringDesc** S_4846);
static N_INLINE(void, appendString)(NimStringDesc* Dest_17592, NimStringDesc* Src_17593);
N_NIMCALL(void, Auxwritestacktrace_4660)(TFrame* F_4662, NimStringDesc** S_4664);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_18203);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1349);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING Str_17504);
N_NIMCALL(NimStringDesc*, toNimStr)(NCSTRING Str_17499, NI Len_17500);
N_NIMCALL(void, Writetostderr_4432)(NCSTRING Msg_4434);
N_NIMCALL(void, Write_3670)(FILE* F_3672, NCSTRING C_3673);
static N_INLINE(void, Quitordebug_5001)(void);
N_NIMCALL(void, Gcenable_2665)(void);
static N_INLINE(void, rawEchoNL)(void);
static N_INLINE(void, Inccurrmem_8886)(TY8874* A_8889, NI Bytes_8890);
N_NIMCALL(TY8834*, Requestoschunks_9092)(TY8874* A_9095, NI Size_9096);
N_NIMCALL(NI, Cmp_1321)(NimStringDesc* X_1323, NimStringDesc* Y_1324);
N_NIMCALL(void, Rawreadline_3789)(FILE* F_3791, NimStringDesc** Result_3793);
N_NIMCALL(NimStringDesc*, Readline_3679)(FILE* F_3681);
N_NIMCALL(void, Write_3654)(FILE* F_3656, NI I_3657);
N_NIMCALL(void, Write_3662)(FILE* F_3664, NIM_BOOL B_3665);
N_NIMCALL(void, Write_3650)(FILE* F_3652, NF R_3653);
N_NIMCALL(void, Write_3666)(FILE* F_3668, NIM_CHAR C_3669);
N_NIMCALL(void, Write_3674)(FILE* F_3676, NimStringDesc** A_3678, NI A_3678Len0);
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649);
static N_INLINE(void, pushSafePoint)(TSafePoint* S_4635);
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623);
N_NIMCALL(NI64, Getfilesize_3695)(FILE* F_3697);
N_NIMCALL(NI64, Getfilepos_3742)(FILE* F_3744);
N_NIMCALL(void, Setfilepos_3738)(FILE* F_3740, NI64 Pos_3741);
N_NIMCALL(NI, Readbuffer_3714)(FILE* F_3716, void* Buffer_3717, NI Len_3718);
static N_INLINE(void, popSafePoint)(void);
static N_INLINE(E_Base*, getCurrentException)(void);
static N_INLINE(void, popCurrentException)(void);
N_NIMCALL(void, reraiseException)(void);
N_NIMCALL(NIM_BOOL, Endoffile_3638)(FILE* F_3640);
N_NIMCALL(NIM_BOOL, Reopen_3630)(FILE* F_3632, NimStringDesc* Filename_3633, NU8 Mode_3634);
N_NIMCALL(NIM_BOOL, Open_3624)(FILE** F_3627, int Filehandle_3628, NU8 Mode_3629);
N_NIMCALL(NI, Readbytes_3698)(FILE* F_3700, NI8* A_3703, NI A_3703Len0, NI Start_3704, NI Len_3705);
N_NIMCALL(NI, Readchars_3706)(FILE* F_3708, NIM_CHAR* A_3711, NI A_3711Len0, NI Start_3712, NI Len_3713);
N_NIMCALL(NI, Writebytes_3719)(FILE* F_3721, NI8* A_3723, NI A_3723Len0, NI Start_3724, NI Len_3725);
N_NIMCALL(NI, Writechars_3726)(FILE* F_3728, NIM_CHAR* A_3730, NI A_3730Len0, NI Start_3731, NI Len_3732);
N_NIMCALL(TY4377*, Cstringarraytoseq_4373)(NCSTRING* A_4375, NI Len_4376);
N_NIMCALL(void*, newSeq)(TNimType* Typ_13004, NI Len_13005);
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804);
N_NOINLINE(void, raiseOverflow)(void);
N_NIMCALL(NI, mulInt)(NI A_6803, NI B_6804);
N_NIMCALL(TY4377*, Cstringarraytoseq_4414)(NCSTRING* A_4416);
N_NIMCALL(void, internalAssert)(NCSTRING File_5254, NI Line_5255, NIM_BOOL Cond_5256);
N_NIMCALL(void, Writestacktrace_5271)(void);
N_NOCONV(void, signalHandler)(int Sig_5278);
N_NIMCALL(void, registerSignalHandler)(void);
N_NOINLINE(void, raiseRangeError)(NI64 Val_5418);
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_18267);
N_NOINLINE(void, raiseIndexError)(void);
N_NOINLINE(void, raiseFieldError)(NimStringDesc* F_5475);
static N_INLINE(NI, chckIndx)(NI I_4605, NI A_4606, NI B_4607);
static N_INLINE(NI, chckRange)(NI I_4610, NI A_4611, NI B_4612);
N_NIMCALL(NI64, chckRange64)(NI64 I_5523, NI64 A_5524, NI64 B_5525);
static N_INLINE(NF, chckRangeF)(NF X_4615, NF A_4616, NF B_4617);
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_18260);
static N_INLINE(void, chckNil)(void* P_4620);
N_NIMCALL(void, chckObj)(TNimType* Obj_5575, TNimType* Subclass_5576);
static N_INLINE(void, chckObjAsgn)(TNimType* A_5626, TNimType* B_5627);
N_NIMCALL(NIM_BOOL, isObj)(TNimType* Obj_5656, TNimType* Subclass_5657);
N_NOINLINE(void, raiseDivByZero)(void);
static N_INLINE(NI64, addInt64)(NI64 A_5729, NI64 B_5730);
static N_INLINE(NI64, subInt64)(NI64 A_5738, NI64 B_5739);
static N_INLINE(NI64, negInt64)(NI64 A_5747);
static N_INLINE(NI64, absInt64)(NI64 A_5753);
static N_INLINE(NI64, divInt64)(NI64 A_5761, NI64 B_5762);
static N_INLINE(NI64, modInt64)(NI64 A_5772, NI64 B_5773);
N_NIMCALL(NI64, mulInt64)(NI64 A_5779, NI64 B_5780);
static N_INLINE(NI, absInt)(NI A_5786);
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004);
static N_INLINE(NI, negInt)(NI A_6203);
static N_INLINE(NI, divInt)(NI A_6403, NI B_6404);
static N_INLINE(NI, modInt)(NI A_6603, NI B_6604);
N_NOINLINE(void, Raisefloatinvalidop_7001)(void);
static N_INLINE(void, nanCheck)(NF64 X_7022);
N_NOINLINE(void, Raisefloatoverflow_7023)(NF64 X_7025);
static N_INLINE(void, infCheck)(NF64 X_7062);
N_NIMCALL(void, Rawwrite_7064)(FILE* F_7066, NimStringDesc* S_7067);
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* Path_1621);
N_NOINLINE(void, Procaddrerror_7073)(NCSTRING Name_7075);
N_NIMCALL(void, nimUnloadLibrary)(void* Lib_1614);
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* Path_1611);
N_NIMCALL(void*, nimGetProcAddr)(void* Lib_1617, NCSTRING Name_1618);
N_NIMCALL(NI, countBits32)(int N_7206);
N_NIMCALL(NI, countBits64)(NI64 N_7211);
N_NIMCALL(NI, cardSet)(TY7202 S_7215, NI Len_7216);
N_NIMCALL(void, Createthread_8210)(TY8202* T_8213, TY8204 Fn_8214);
N_NIMCALL(void, Destroythread_8215)(TY8202* T_8218);
N_NIMCALL(NI, Getmaxmem_8922)(TY8874* A_8925);
N_NIMCALL(NIM_BOOL, Containsorincl_9056)(TY8811* S_9059, NI Key_9060);
N_NIMCALL(void, Writefreelist_9167)(TY8874* A_9169);
static N_INLINE(NI, Getcellsize_9790)(void* P_9792);
N_NIMCALL(NI, Ptrsize_10433)(void* P_10435);
N_NOCONV(void*, Realloc_1956)(void* P_1958, NI Newsize_1959);
N_NIMCALL(NI, Countfreemem_10445)(void);
static N_INLINE(NIM_BOOL, Contains_10836)(TY10818* S_10838, TY10802* C_10839);
N_NIMCALL(void, Deinit_10883)(TY10818* S_10886);
N_NIMCALL(TNimType*, extGetCellType)(void* C_11257);
N_NIMCALL(NI, getRefcount)(void* P_11261);
static N_INLINE(void, nimGCref)(void* P_12008);
static N_INLINE(void, nimGCunref)(void* P_12011);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_12026, void* Src_12027);
N_NOINLINE(NIM_BOOL, Isonstack_11809)(void* P_11811);
N_NIMCALL(void, Gcsetstrategy_2675)(NU8 Strategy_2677);
N_NIMCALL(void, Gcenablemarkandsweep_2678)(void);
N_NIMCALL(void, Gcdisablemarkandsweep_2680)(void);
N_NIMCALL(void, Gcfullcollect_2667)(void);
N_NIMCALL(NimStringDesc*, Gcgetstatistics_2682)(void);
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_17411, NimStringDesc* B_17412);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_17447, NimStringDesc* B_17448);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_17495);
N_NIMCALL(NI, hashString)(NimStringDesc* S_17523);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_17543, NI Start_17544, NI Last_17545);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_17558, NI Start_17559);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17609, NIM_CHAR C_17610);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_17635, NI Elemsize_17636);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17803, NI Elemsize_17804, NI Newlen_17805);
N_NIMCALL(NimStringDesc*, nimBoolToStr)(NIM_BOOL X_18324);
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR X_18328);
N_NIMCALL(NI, binaryStrSearch)(NimStringDesc** X_18333, NI X_18333Len0, NimStringDesc* Y_18334);
N_NIMCALL(void, Genericassignaux_18368)(void* Dest_18370, void* Src_18371, TNimNode* N_18373);
N_NIMCALL(void, genericAssign)(void* Dest_18365, void* Src_18366, TNimType* Mt_18367);
N_NIMCALL(void, genericSeqAssign)(void* Dest_18439, void* Src_18440, TNimType* Mt_18441);
N_NIMCALL(void, genericAssignOpenArray)(void* Dest_18446, void* Src_18447, NI Len_18448, TNimType* Mt_18449);
N_NIMCALL(void, Objectinitaux_18464)(void* Dest_18466, TNimNode* N_18468);
N_NIMCALL(void, objectInit)(void* Dest_18462, TNimType* Typ_18463);
N_NIMCALL(NimStringDesc*, reprInt)(NI64 X_18507);
N_NIMCALL(NimStringDesc*, reprFloat)(NF X_18513);
N_NIMCALL(NimStringDesc*, reprPointer)(void* X_18517);
N_NIMCALL(void, Reprstraux_18522)(NimStringDesc** Result_18525, NimStringDesc* S_18526);
N_NIMCALL(NimStringDesc*, reprStr)(NimStringDesc* S_18553);
N_NIMCALL(NimStringDesc*, reprBool)(NIM_BOOL X_18558);
N_NIMCALL(NimStringDesc*, reprChar)(NIM_CHAR X_18562);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_18579, TNimType* Typ_18580);
N_NIMCALL(void, Addsetelem_18596)(NimStringDesc** Result_18599, NI Elem_18600, TNimType* Typ_18601);
N_NIMCALL(void, Reprsetaux_18602)(NimStringDesc** Result_18605, void* P_18606, TNimType* Typ_18607);
N_NIMCALL(NimStringDesc*, reprSet)(void* P_18667, TNimType* Typ_18668);
N_NIMCALL(void, Initreprclosure_18676)(TY18672* Cl_18679);
N_NIMCALL(void, Deinitreprclosure_18681)(TY18672* Cl_18684);
N_NIMCALL(void, Reprbreak_18686)(NimStringDesc** Result_18689, TY18672* Cl_18690);
N_NIMCALL(void, Reprarray_18707)(NimStringDesc** Result_18710, void* P_18711, TNimType* Typ_18712, TY18672* Cl_18714);
N_NIMCALL(void, Repraux_18699)(NimStringDesc** Result_18702, void* P_18703, TNimType* Typ_18704, TY18672* Cl_18706);
N_NIMCALL(void, Reprrecord_18784)(NimStringDesc** Result_18787, void* P_18788, TNimType* Typ_18789, TY18672* Cl_18791);
N_NIMCALL(void, Reprrecordaux_18753)(NimStringDesc** Result_18756, void* P_18757, TNimNode* N_18759, TY18672* Cl_18761);
N_NIMCALL(void, Reprref_18792)(NimStringDesc** Result_18795, void* P_18796, TNimType* Typ_18797, TY18672* Cl_18799);
N_NIMCALL(void, Reprsequence_18726)(NimStringDesc** Result_18729, void* P_18730, TNimType* Typ_18731, TY18672* Cl_18733);
N_NIMCALL(NimStringDesc*, reprOpenArray)(void* P_19203, NI Length_19204, TNimType* Elemtyp_19205);
N_NIMCALL(NimStringDesc*, reprAny)(void* P_7241, TNimType* Typ_7242);
static N_INLINE(NimStringDesc*, Getcurrentexceptionmsg_19405)(void);
N_NIMCALL(void, Listremove_9246)(TY8834** Head_9250, TY8834* C_9251);
N_NIMCALL(NIM_BOOL, Contains_9255)(TY8834* List_9258, TY8834* X_9259);
N_NIMCALL(void, Listadd_9607)(TY8834** Head_9611, TY8834* C_9612);
N_NIMCALL(void, Listadd_9826)(TY8832** Head_9830, TY8832* C_9831);
N_NIMCALL(NIM_BOOL, Contains_9835)(TY8832* List_9838, TY8832* X_9839);
N_NIMCALL(void, Listremove_9968)(TY8832** Head_9972, TY8832* C_9973);
STRING_LITERAL(TMP20308, "cannot write string to file", 27);
STRING_LITERAL(TMP20309, "No stack traceback available", 28);
STRING_LITERAL(TMP20310, "Traceback (most recent call last)", 33);
STRING_LITERAL(TMP20311, "(", 1);
STRING_LITERAL(TMP20312, " calls omitted) ...", 19);
STRING_LITERAL(TMP20313, "Error: unhandled exception: ", 28);
STRING_LITERAL(TMP20314, "Error: unhandled exception", 26);
STRING_LITERAL(TMP20315, " [", 2);
STRING_LITERAL(TMP20316, "]\012", 2);
STRING_LITERAL(TMP20317, "\012", 1);
STRING_LITERAL(TMP20318, "out of memory; cannot even throw an exception", 45);
STRING_LITERAL(TMP20319, "out of memory", 13);
STRING_LITERAL(TMP20320, "", 0);
STRING_LITERAL(TMP20321, "true", 4);
STRING_LITERAL(TMP20322, "false", 5);
STRING_LITERAL(TMP20324, "cannot retrieve file position", 29);
STRING_LITERAL(TMP20325, "cannot set file position", 24);
STRING_LITERAL(TMP20326, "no exception to reraise", 23);
STRING_LITERAL(TMP20327, "rb", 2);
STRING_LITERAL(TMP20328, "wb", 2);
STRING_LITERAL(TMP20329, "w+b", 3);
STRING_LITERAL(TMP20330, "r+b", 3);
STRING_LITERAL(TMP20331, "ab", 2);
NIM_CONST TY4102 Formatopen_4101 = {((NimStringDesc*) &TMP20327),
((NimStringDesc*) &TMP20328),
((NimStringDesc*) &TMP20329),
((NimStringDesc*) &TMP20330),
((NimStringDesc*) &TMP20331)}
;
STRING_LITERAL(TMP20332, "over- or underflow", 18);
STRING_LITERAL(TMP20333, "[Assertion failure] file: ", 26);
STRING_LITERAL(TMP20334, " line: ", 7);
STRING_LITERAL(TMP20335, "SIGINT: Interrupted by Ctrl-C.\012", 31);
STRING_LITERAL(TMP20336, "SIGSEGV: Illegal storage access. (Attempt to read from nil?)\012", 61);
STRING_LITERAL(TMP20337, "SIGABRT: Abnormal termination.\012", 31);
STRING_LITERAL(TMP20338, "SIGFPE: Arithmetic error.\012", 26);
STRING_LITERAL(TMP20339, "SIGILL: Illegal operation.\012", 27);
STRING_LITERAL(TMP20340, "SIGBUS: Illegal storage access. (Attempt to read from nil?)\012", 60);
STRING_LITERAL(TMP20341, "unknown signal\012", 15);
STRING_LITERAL(TMP20342, "value ", 6);
STRING_LITERAL(TMP20343, " out of range", 13);
STRING_LITERAL(TMP20344, "index out of bounds", 19);
STRING_LITERAL(TMP20345, " is not accessible", 18);
STRING_LITERAL(TMP20346, "invalid object conversion", 25);
STRING_LITERAL(TMP20347, "invalid object assignment", 25);
STRING_LITERAL(TMP20348, "divison by zero", 15);
STRING_LITERAL(TMP20349, "FPU operation caused a NaN result", 33);
STRING_LITERAL(TMP20350, "FPU operation caused an overflow", 32);
STRING_LITERAL(TMP20351, "FPU operations caused an underflow", 34);
STRING_LITERAL(TMP20352, "could not load: ", 16);
STRING_LITERAL(TMP20353, "could not import: ", 18);
STRING_LITERAL(TMP20354, "[GC] total memory: ", 19);
STRING_LITERAL(TMP20355, "\012[GC] occupied memory: ", 23);
STRING_LITERAL(TMP20356, "\012[GC] stack scans: ", 19);
STRING_LITERAL(TMP20357, "\012[GC] stack cells: ", 19);
STRING_LITERAL(TMP20358, "\012[GC] cycle collections: ", 25);
STRING_LITERAL(TMP20359, "\012[GC] max threshold: ", 21);
STRING_LITERAL(TMP20360, "\012[GC] zct capacity: ", 20);
STRING_LITERAL(TMP20361, "\012[GC] max cycle table size: ", 28);
STRING_LITERAL(TMP20362, "\012[GC] max stack size: ", 22);
STRING_LITERAL(TMP20363, "nil", 3);
STRING_LITERAL(TMP20364, "\"", 1);
STRING_LITERAL(TMP20365, "\\\"", 2);
STRING_LITERAL(TMP20366, "\\\\", 2);
STRING_LITERAL(TMP20367, "\\10\"\012\"", 6);
STRING_LITERAL(TMP20368, "\\", 1);
STRING_LITERAL(TMP20369, "\'", 1);
STRING_LITERAL(TMP20370, " (invalid data!)", 16);
STRING_LITERAL(TMP20371, "{", 1);
STRING_LITERAL(TMP20372, ", ", 2);
STRING_LITERAL(TMP20373, "}", 1);
STRING_LITERAL(TMP20374, "[", 1);
STRING_LITERAL(TMP20375, "...", 3);
STRING_LITERAL(TMP20376, " = ", 3);
STRING_LITERAL(TMP20377, ",\012", 2);
STRING_LITERAL(TMP20378, "]", 1);
STRING_LITERAL(TMP20379, "ref ", 4);
STRING_LITERAL(TMP20380, " --> ", 5);
STRING_LITERAL(TMP20381, "(invalid data!)", 15);
TY2718 Dbglinehook_2721;
TNimType Strdesc_3017;
extern TNimType* NTI4262; /* ref EIO */
extern TNimType* NTI420; /* EIO */
extern TNimType* NTI8262; /* ref EOutOfMemory */
extern TNimType* NTI442; /* EOutOfMemory */
extern TNimType* NTI5233; /* ref ENoExceptionToReraise */
extern TNimType* NTI452; /* ENoExceptionToReraise */
extern TNimType* NTI4377; /* seq[string] */
extern TNimType* NTI5691; /* ref EOverflow */
extern TNimType* NTI432; /* EOverflow */
TSafePoint* excHandler;
E_Base* Currexception_4632;
NimStringDesc* Buf_4653;
NimStringDesc* Assertbuf_4654;
TFrame* framePtr;
TY4656 Tempframes_4658;
NimStringDesc* Stacktracenewline_4659;
EAssertionFailed* Gassertionfailed_5251;
NIM_BOOL Dbgaborting_5275;
extern TNimType* NTI5250; /* ref EAssertionFailed */
extern TNimType* NTI436; /* EAssertionFailed */
extern TNimType* NTI5419; /* ref EOutOfRange */
extern TNimType* NTI448; /* EOutOfRange */
extern TNimType* NTI5456; /* ref EInvalidIndex */
extern TNimType* NTI444; /* EInvalidIndex */
extern TNimType* NTI5476; /* ref EInvalidField */
extern TNimType* NTI446; /* EInvalidField */
extern TNimType* NTI5607; /* ref EInvalidObjectConversion */
extern TNimType* NTI456; /* EInvalidObjectConversion */
extern TNimType* NTI5637; /* ref EInvalidObjectAssignment */
extern TNimType* NTI454; /* EInvalidObjectAssignment */
extern TNimType* NTI5710; /* ref EDivByZero */
extern TNimType* NTI430; /* EDivByZero */
extern TNimType* NTI7003; /* ref EFloatInvalidOp */
extern TNimType* NTI460; /* EFloatInvalidOp */
extern TNimType* NTI7026; /* ref EFloatOverflow */
extern TNimType* NTI464; /* EFloatOverflow */
extern TNimType* NTI7043; /* ref EFloatUnderflow */
extern TNimType* NTI466; /* EFloatUnderflow */
TY442* Goutofmem_8258;
TY8874 Allocator_8929;
NI Lastsize_9091;
void* Stackbottom_11209;
TY11190 Gch_11210;
NI Cyclethreshold_11211;
NI Recgclock_11212;
N_NIMCALL(void, Add_2722)(NimStringDesc** X_2725, NCSTRING Y_2726) {
NI I_2727;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "add";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
I_2727 = 0;
F.line = 1250;F.filename = "system.nim";
I_2727 = 0;
F.line = 1251;F.filename = "system.nim";
while (1) {
if (!!(((NU8)(Y_2726[I_2727]) == (NU8)(0)))) goto LA1;
F.line = 1252;F.filename = "system.nim";
(*X_2725) = addChar((*X_2725), Y_2726[I_2727]);
F.line = 1253;F.filename = "system.nim";
I_2727 += 1;
} LA1: ;
framePtr = framePtr->prev;
}
static N_INLINE(NF, HEX2F_2802)(NI X_2804, NI Y_2805) {
NF Result_2806;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "/";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_2806 = 0;
F.line = 1268;F.filename = "system.nim";
Result_2806 = (((double) (X_2804)) / ((double) (Y_2805)));
framePtr = framePtr->prev;
return Result_2806;
}
N_NOINLINE(void, setStackBottom)(void* Thestackbottom_1624) {
NI A_15204;
NI B_15205;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "setStackBottom";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 501;F.filename = "gc.nim";
if (!(Stackbottom_11209 == NIM_NIL)) goto LA2;
F.line = 501;F.filename = "gc.nim";
Stackbottom_11209 = Thestackbottom_1624;
goto LA1;
LA2: ;
A_15204 = 0;
F.line = 503;F.filename = "gc.nim";
A_15204 = ((NI) (Thestackbottom_1624));
B_15205 = 0;
F.line = 504;F.filename = "gc.nim";
B_15205 = ((NI) (Stackbottom_11209));
F.line = 508;F.filename = "gc.nim";
Stackbottom_11209 = ((void*) (((A_15204 >= B_15205) ? A_15204 : B_15205)));
LA1: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Initstackbottom_3013)(void) {
void* volatile Locals_3015;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "initStackBottom";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Locals_3015 = 0;
F.line = 1321;F.filename = "system.nim";
setStackBottom(((void*) (&Locals_3015)));
framePtr = framePtr->prev;
}
static N_INLINE(NI, Roundup_8856)(NI X_8858, NI V_8859) {
NI Result_8860;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "roundup";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8860 = 0;
F.line = 130;F.filename = "alloc.nim";
Result_8860 = (NI64)((NI64)(X_8858 + (NI64)(V_8859 - 1)) & (NI64)((NU64) ~((NI64)(V_8859 - 1))));
F.line = 131;F.filename = "alloc.nim";
framePtr = framePtr->prev;
return Result_8860;
}
N_NIMCALL(TY8807*, Intsetget_8974)(TY8811* T_8976, NI Key_8977) {
TY8807* Result_8978;
TY8807* It_8979;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "IntSetGet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8978 = 0;
It_8979 = 0;
F.line = 189;F.filename = "alloc.nim";
It_8979 = (*T_8976).Data[((NI64)(Key_8977 & 1023))-0];
F.line = 190;F.filename = "alloc.nim";
while (1) {
if (!!((It_8979 == NIM_NIL))) goto LA1;
F.line = 191;F.filename = "alloc.nim";
if (!((*It_8979).Key == Key_8977)) goto LA3;
F.line = 191;F.filename = "alloc.nim";
F.line = 191;F.filename = "alloc.nim";
Result_8978 = It_8979;
goto BeforeRet;
LA3: ;
F.line = 192;F.filename = "alloc.nim";
It_8979 = (*It_8979).Next;
} LA1: ;
F.line = 193;F.filename = "alloc.nim";
Result_8978 = NIM_NIL;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_8978;
}
N_NIMCALL(NIM_BOOL, Contains_9011)(TY8811* S_9013, NI Key_9014) {
NIM_BOOL Result_9015;
TY8807* T_9016;
NI U_9028;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9015 = 0;
T_9016 = 0;
F.line = 204;F.filename = "alloc.nim";
T_9016 = Intsetget_8974(S_9013, (NI64)((NU64)(Key_9014) >> (NU64)(9)));
F.line = 205;F.filename = "alloc.nim";
if (!!((T_9016 == NIM_NIL))) goto LA2;
U_9028 = 0;
F.line = 206;F.filename = "alloc.nim";
U_9028 = (NI64)(Key_9014 & 511);
F.line = 207;F.filename = "alloc.nim";
Result_9015 = !(((NI64)((*T_9016).Bits[((NI64)((NU64)(U_9028) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_9028 & 63)))) == 0));
goto LA1;
LA2: ;
F.line = 209;F.filename = "alloc.nim";
Result_9015 = NIM_FALSE;
LA1: ;
framePtr = framePtr->prev;
return Result_9015;
}
static N_INLINE(NI, Pageindex_9081)(void* P_9083) {
NI Result_9084;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "pageIndex";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9084 = 0;
F.line = 240;F.filename = "alloc.nim";
Result_9084 = (NI64)((NU64)(((NI) (P_9083))) >> (NU64)(12));
framePtr = framePtr->prev;
return Result_9084;
}
static N_INLINE(NIM_BOOL, Isaccessible_9152)(void* P_9154) {
NIM_BOOL Result_9155;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "isAccessible";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9155 = 0;
F.line = 291;F.filename = "alloc.nim";
LOC1 = Pageindex_9081(P_9154);
Result_9155 = Contains_9011(&Allocator_8929.Chunkstarts, LOC1);
framePtr = framePtr->prev;
return Result_9155;
}
static N_INLINE(void, Updateprevsize_9211)(TY8874* A_9214, TY8834* C_9215, NI Prevsize_9216) {
TY8830* Ri_9217;
NIM_BOOL LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "updatePrevSize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Ri_9217 = 0;
F.line = 339;F.filename = "alloc.nim";
Ri_9217 = ((TY8830*) ((NI64)((NU64)(((NI) (C_9215))) + (NU64)((*C_9215).Sup.Size))));
F.line = 340;F.filename = "alloc.nim";
F.line = 341;F.filename = "alloc.nim";
LOC2 = Isaccessible_9152(((void*) (Ri_9217)));
if (!LOC2) goto LA3;
F.line = 342;F.filename = "alloc.nim";
(*Ri_9217).Prevsize = Prevsize_9216;
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Writebuffer_3733)(FILE* F_3735, void* Buffer_3736, NI Len_3737) {
NI Result_4251;
Result_4251 = 0;
Result_4251 = fwrite(Buffer_3736, 1, Len_3737, F_3735);
return Result_4251;
}
static N_INLINE(void, Lock_11213)(TY11190* Gch_11216) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "lock";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 80;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 81;F.filename = "gc.nim";
pthread_mutex_lock(&(*Gch_11216).Zctlock);
F.line = 82;F.filename = "gc.nim";
pthread_mutex_lock(&(*Gch_11216).Cyclerootslock);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Gettotalmem_2021)(void) {
NI Result_10477;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getTotalMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10477 = 0;
F.line = 575;F.filename = "alloc.nim";
F.line = 575;F.filename = "alloc.nim";
Result_10477 = Allocator_8929.Currmem;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10477;
}
N_NIMCALL(NI, Getfreemem_2019)(void) {
NI Result_10474;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getFreeMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10474 = 0;
F.line = 572;F.filename = "alloc.nim";
Result_10474 = Allocator_8929.Freemem;
framePtr = framePtr->prev;
return Result_10474;
}
N_NIMCALL(NI, Getoccupiedmem_2017)(void) {
NI Result_10480;
NI LOC1;
NI LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getOccupiedMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10480 = 0;
F.line = 576;F.filename = "alloc.nim";
F.line = 576;F.filename = "alloc.nim";
LOC1 = Gettotalmem_2021();
LOC2 = Getfreemem_2019();
Result_10480 = (NI64)(LOC1 - LOC2);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10480;
}
N_NOINLINE(NI, Stacksize_15601)(void) {
NI Result_15603;
void* volatile Stacktop_15604;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "stackSize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_15603 = 0;
Stacktop_15604 = 0;
F.line = 512;F.filename = "gc.nim";
Result_15603 = (NI64)abs((NI64)(((NI) (&Stacktop_15604)) - ((NI) (Stackbottom_11209))));
framePtr = framePtr->prev;
return Result_15603;
}
static N_INLINE(TY10802*, Usrtocell_11236)(void* Usr_11238) {
TY10802* Result_11239;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "usrToCell";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11239 = 0;
F.line = 100;F.filename = "gc.nim";
Result_11239 = ((TY10802*) ((NI64)((NU64)(((NI) (Usr_11238))) - (NU64)(((NI) (((NI)sizeof(TY10802))))))));
framePtr = framePtr->prev;
return Result_11239;
}
static N_INLINE(TY8830*, Pageaddr_9085)(void* P_9087) {
TY8830* Result_9088;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "pageAddr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9088 = 0;
F.line = 243;F.filename = "alloc.nim";
Result_9088 = ((TY8830*) ((NI64)(((NI) (P_9087)) & -4096)));
F.line = 244;F.filename = "alloc.nim";
framePtr = framePtr->prev;
return Result_9088;
}
static N_INLINE(NIM_BOOL, Chunkunused_9207)(TY8830* C_9209) {
NIM_BOOL Result_9210;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "chunkUnused";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9210 = 0;
F.line = 335;F.filename = "alloc.nim";
Result_9210 = !((*C_9209).Used);
framePtr = framePtr->prev;
return Result_9210;
}
static N_INLINE(NIM_BOOL, Issmallchunk_9201)(TY8830* C_9203) {
NIM_BOOL Result_9204;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "isSmallChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9204 = 0;
F.line = 331;F.filename = "alloc.nim";
F.line = 331;F.filename = "alloc.nim";
Result_9204 = ((*C_9203).Size <= (NI64)(4096 - (NI64)(((NI)sizeof(TY8832)) - 8)));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_9204;
}
N_NIMCALL(NIM_BOOL, Isallocatedptr_10401)(TY8874* A_10403, void* P_10404) {
NIM_BOOL Result_10405;
NIM_BOOL LOC2;
TY8830* C_10406;
NIM_BOOL LOC6;
NIM_BOOL LOC10;
TY8832* C_10407;
NI Offset_10408;
NIM_BOOL LOC13;
NIM_BOOL LOC14;
TY8834* C_10412;
NIM_BOOL LOC17;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "isAllocatedPtr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10405 = 0;
F.line = 519;F.filename = "alloc.nim";
LOC2 = Isaccessible_9152(P_10404);
if (!LOC2) goto LA3;
C_10406 = 0;
F.line = 520;F.filename = "alloc.nim";
C_10406 = Pageaddr_9085(P_10404);
F.line = 521;F.filename = "alloc.nim";
LOC6 = Chunkunused_9207(C_10406);
if (!!(LOC6)) goto LA7;
F.line = 522;F.filename = "alloc.nim";
LOC10 = Issmallchunk_9201(C_10406);
if (!LOC10) goto LA11;
C_10407 = 0;
F.line = 523;F.filename = "alloc.nim";
C_10407 = ((TY8832*) (C_10406));
Offset_10408 = 0;
F.line = 524;F.filename = "alloc.nim";
Offset_10408 = (NI64)((NU64)((NI64)(((NI) (P_10404)) & 4095)) - (NU64)((NI64)(((NI)sizeof(TY8832)) - 8)));
F.line = 526;F.filename = "alloc.nim";
LOC14 = ((NU64)(Offset_10408) < (NU64)((*C_10407).Acc));
if (!(LOC14)) goto LA15;
LOC14 = ((NI64)((NU64)(Offset_10408) % (NU64)((*C_10407).Sup.Size)) == 0);
LA15: ;
LOC13 = LOC14;
if (!(LOC13)) goto LA16;
LOC13 = ((NU64)(1) < (NU64)((*((TY8822*) (P_10404))).Zerofield));
LA16: ;
Result_10405 = LOC13;
goto LA9;
LA11: ;
C_10412 = 0;
F.line = 529;F.filename = "alloc.nim";
C_10412 = ((TY8834*) (C_10406));
F.line = 530;F.filename = "alloc.nim";
LOC17 = (P_10404 == ((void*) (&(*C_10412).Data)));
if (!(LOC17)) goto LA18;
LOC17 = ((NU64)(1) < (NU64)((*((TY8822*) (P_10404))).Zerofield));
LA18: ;
Result_10405 = LOC17;
LA9: ;
LA7: ;
LA3: ;
framePtr = framePtr->prev;
return Result_10405;
}
N_NIMCALL(void, Excl_9038)(TY8811* S_9041, NI Key_9042) {
TY8807* T_9043;
NI U_9055;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Excl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
T_9043 = 0;
F.line = 217;F.filename = "alloc.nim";
T_9043 = Intsetget_8974(&(*S_9041), (NI64)((NU64)(Key_9042) >> (NU64)(9)));
F.line = 218;F.filename = "alloc.nim";
if (!!((T_9043 == NIM_NIL))) goto LA2;
U_9055 = 0;
F.line = 219;F.filename = "alloc.nim";
U_9055 = (NI64)(Key_9042 & 511);
F.line = 220;F.filename = "alloc.nim";
(*T_9043).Bits[((NI64)((NU64)(U_9055) >> (NU64)(6)))-0] = (NI64)((*T_9043).Bits[((NI64)((NU64)(U_9055) >> (NU64)(6)))-0] & (NI64)((NU64) ~((NI64)((NU64)(1) << (NU64)((NI64)(U_9055 & 63))))));
LA2: ;
framePtr = framePtr->prev;
}
static N_INLINE(NI, Pageindex_9077)(TY8830* C_9079) {
NI Result_9080;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "pageIndex";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9080 = 0;
F.line = 237;F.filename = "alloc.nim";
Result_9080 = (NI64)((NU64)(((NI) (C_9079))) >> (NU64)(12));
framePtr = framePtr->prev;
return Result_9080;
}
static N_INLINE(void, Osdeallocpages_8417)(void* P_8419, NI Size_8420) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "osDeallocPages";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 44;F.filename = "alloc.nim";
munmap(P_8419, Size_8420);
framePtr = framePtr->prev;
}
static N_INLINE(void, Deccurrmem_8903)(TY8874* A_8906, NI Bytes_8907) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "decCurrMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 162;F.filename = "alloc.nim";
(*A_8906).Maxmem = (((*A_8906).Maxmem >= (*A_8906).Currmem) ? (*A_8906).Maxmem : (*A_8906).Currmem);
F.line = 163;F.filename = "alloc.nim";
(*A_8906).Currmem -= Bytes_8907;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Freeoschunks_9126)(TY8874* A_9129, void* P_9130, NI Size_9131) {
TY8830* C_9132;
NI Nxt_9133;
TY8830* Next_9136;
NI LOC2;
NIM_BOOL LOC3;
NI LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "freeOsChunks";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
C_9132 = 0;
F.line = 278;F.filename = "alloc.nim";
C_9132 = ((TY8830*) (P_9130));
Nxt_9133 = 0;
F.line = 279;F.filename = "alloc.nim";
Nxt_9133 = (NI64)((NU64)(((NI) (P_9130))) + (NU64)((*C_9132).Size));
F.line = 280;F.filename = "alloc.nim";
Next_9136 = 0;
F.line = 281;F.filename = "alloc.nim";
Next_9136 = ((TY8830*) (Nxt_9133));
F.line = 282;F.filename = "alloc.nim";
LOC2 = Pageindex_9077(Next_9136);
LOC3 = Contains_9011(&(*A_9129).Chunkstarts, LOC2);
if (!LOC3) goto LA4;
F.line = 283;F.filename = "alloc.nim";
(*Next_9136).Prevsize = 0;
LA4: ;
F.line = 284;F.filename = "alloc.nim";
LOC6 = Pageindex_9081(P_9130);
Excl_9038(&(*A_9129).Chunkstarts, LOC6);
F.line = 285;F.filename = "alloc.nim";
Osdeallocpages_8417(P_9130, Size_9131);
F.line = 286;F.filename = "alloc.nim";
Deccurrmem_8903(A_9129, Size_9131);
F.line = 287;F.filename = "alloc.nim";
(*A_9129).Freemem -= Size_9131;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Freebigchunk_9220)(TY8874* A_9223, TY8834* C_9224) {
TY8834* C_9225;
TY8830* Ri_9240;
NIM_BOOL LOC2;
NIM_BOOL LOC7;
NI LOC10;
TY8830* Le_9403;
NIM_BOOL LOC15;
NIM_BOOL LOC20;
NI LOC23;
NI LOC27;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "freeBigChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
C_9225 = 0;
F.line = 345;F.filename = "alloc.nim";
C_9225 = C_9224;
F.line = 346;F.filename = "alloc.nim";
F.line = 347;F.filename = "alloc.nim";
(*A_9223).Freemem += (*C_9225).Sup.Size;
Ri_9240 = 0;
F.line = 349;F.filename = "alloc.nim";
Ri_9240 = ((TY8830*) ((NI64)((NU64)(((NI) (C_9225))) + (NU64)((*C_9225).Sup.Size))));
F.line = 350;F.filename = "alloc.nim";
F.line = 351;F.filename = "alloc.nim";
LOC2 = Isaccessible_9152(((void*) (Ri_9240)));
if (!(LOC2)) goto LA3;
LOC2 = Chunkunused_9207(Ri_9240);
LA3: ;
if (!LOC2) goto LA4;
F.line = 352;F.filename = "alloc.nim";
F.line = 353;F.filename = "alloc.nim";
LOC7 = Issmallchunk_9201(Ri_9240);
if (!!(LOC7)) goto LA8;
F.line = 354;F.filename = "alloc.nim";
Listremove_9246(&(*A_9223).Freechunkslist, ((TY8834*) (Ri_9240)));
F.line = 355;F.filename = "alloc.nim";
(*C_9225).Sup.Size += (*Ri_9240).Size;
F.line = 356;F.filename = "alloc.nim";
LOC10 = Pageindex_9077(Ri_9240);
Excl_9038(&(*A_9223).Chunkstarts, LOC10);
LA8: ;
LA4: ;
F.line = 358;F.filename = "alloc.nim";
if (!!(((*C_9225).Sup.Prevsize == 0))) goto LA12;
Le_9403 = 0;
F.line = 359;F.filename = "alloc.nim";
Le_9403 = ((TY8830*) ((NI64)((NU64)(((NI) (C_9225))) - (NU64)((*C_9225).Sup.Prevsize))));
F.line = 360;F.filename = "alloc.nim";
F.line = 361;F.filename = "alloc.nim";
LOC15 = Isaccessible_9152(((void*) (Le_9403)));
if (!(LOC15)) goto LA16;
LOC15 = Chunkunused_9207(Le_9403);
LA16: ;
if (!LOC15) goto LA17;
F.line = 362;F.filename = "alloc.nim";
F.line = 363;F.filename = "alloc.nim";
LOC20 = Issmallchunk_9201(Le_9403);
if (!!(LOC20)) goto LA21;
F.line = 364;F.filename = "alloc.nim";
Listremove_9246(&(*A_9223).Freechunkslist, ((TY8834*) (Le_9403)));
F.line = 365;F.filename = "alloc.nim";
(*Le_9403).Size += (*C_9225).Sup.Size;
F.line = 366;F.filename = "alloc.nim";
LOC23 = Pageindex_9077(&C_9225->Sup);
Excl_9038(&(*A_9223).Chunkstarts, LOC23);
F.line = 367;F.filename = "alloc.nim";
C_9225 = ((TY8834*) (Le_9403));
LA21: ;
LA17: ;
LA12: ;
F.line = 369;F.filename = "alloc.nim";
if (!((*C_9225).Sup.Size < 1048576)) goto LA25;
F.line = 370;F.filename = "alloc.nim";
LOC27 = Pageindex_9077(&C_9225->Sup);
Incl_9031(&(*A_9223).Chunkstarts, LOC27);
F.line = 371;F.filename = "alloc.nim";
Updateprevsize_9211(A_9223, C_9225, (*C_9225).Sup.Size);
F.line = 372;F.filename = "alloc.nim";
Listadd_9607(&(*A_9223).Freechunkslist, C_9225);
F.line = 373;F.filename = "alloc.nim";
(*C_9225).Sup.Used = NIM_FALSE;
goto LA24;
LA25: ;
F.line = 375;F.filename = "alloc.nim";
Freeoschunks_9126(A_9223, ((void*) (C_9225)), (*C_9225).Sup.Size);
LA24: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Rawdealloc_10064)(TY8874* A_10067, void* P_10068) {
TY8830* C_10069;
NIM_BOOL LOC2;
TY8832* C_10070;
NI S_10071;
TY8822* F_10073;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawDealloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
C_10069 = 0;
F.line = 485;F.filename = "alloc.nim";
C_10069 = Pageaddr_9085(P_10068);
F.line = 486;F.filename = "alloc.nim";
LOC2 = Issmallchunk_9201(C_10069);
if (!LOC2) goto LA3;
C_10070 = 0;
F.line = 488;F.filename = "alloc.nim";
C_10070 = ((TY8832*) (C_10069));
S_10071 = 0;
F.line = 489;F.filename = "alloc.nim";
S_10071 = (*C_10070).Sup.Size;
F_10073 = 0;
F.line = 490;F.filename = "alloc.nim";
F_10073 = ((TY8822*) (P_10068));
F.line = 492;F.filename = "alloc.nim";
F.line = 493;F.filename = "alloc.nim";
(*F_10073).Zerofield = 0;
F.line = 494;F.filename = "alloc.nim";
(*F_10073).Next = (*C_10070).Freelist;
F.line = 495;F.filename = "alloc.nim";
(*C_10070).Freelist = F_10073;
F.line = 501;F.filename = "alloc.nim";
if (!((*C_10070).Free < S_10071)) goto LA6;
F.line = 502;F.filename = "alloc.nim";
F.line = 504;F.filename = "alloc.nim";
Listadd_9826(&(*A_10067).Freesmallchunks[((NI64)(S_10071 / 8))-0], C_10070);
F.line = 505;F.filename = "alloc.nim";
(*C_10070).Free += S_10071;
goto LA5;
LA6: ;
F.line = 507;F.filename = "alloc.nim";
(*C_10070).Free += S_10071;
F.line = 508;F.filename = "alloc.nim";
if (!((*C_10070).Free == (NI64)(4096 - (NI64)(((NI)sizeof(TY8832)) - 8)))) goto LA9;
F.line = 509;F.filename = "alloc.nim";
Listremove_9968(&(*A_10067).Freesmallchunks[((NI64)(S_10071 / 8))-0], C_10070);
F.line = 510;F.filename = "alloc.nim";
(*C_10070).Sup.Size = 4096;
F.line = 511;F.filename = "alloc.nim";
Freebigchunk_9220(A_10067, ((TY8834*) (C_10070)));
LA9: ;
LA5: ;
goto LA1;
LA3: ;
F.line = 516;F.filename = "alloc.nim";
Freebigchunk_9220(A_10067, ((TY8834*) (C_10069)));
LA1: ;
framePtr = framePtr->prev;
}
N_NOCONV(void, Dealloc_1960)(void* P_1962) {
void* X_10428;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "dealloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
X_10428 = 0;
F.line = 546;F.filename = "alloc.nim";
X_10428 = ((void*) ((NI64)((NU64)(((NI) (P_1962))) - (NU64)(((NI)sizeof(TY8822))))));
F.line = 547;F.filename = "alloc.nim";
F.line = 548;F.filename = "alloc.nim";
Rawdealloc_10064(&Allocator_8929, X_10428);
F.line = 549;F.filename = "alloc.nim";
framePtr = framePtr->prev;
}
static N_INLINE(void, Add_10858)(TY10818* S_10861, TY10802* C_10862) {
TY10802** D_10865;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "add";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 48;F.filename = "cellsets.nim";
if (!((*S_10861).Cap <= (*S_10861).Len)) goto LA2;
F.line = 49;F.filename = "cellsets.nim";
(*S_10861).Cap = (NI64)((NI64)((*S_10861).Cap * 3) / 2);
D_10865 = 0;
F.line = 50;F.filename = "cellsets.nim";
LOC4 = Alloc_1950((NI64)((*S_10861).Cap * 8));
D_10865 = ((TY10802**) (LOC4));
F.line = 51;F.filename = "cellsets.nim";
memcpy(((void*) (D_10865)), ((void*) ((*S_10861).D)), (NI64)((*S_10861).Len * 8));
F.line = 52;F.filename = "cellsets.nim";
Dealloc_1960(((void*) ((*S_10861).D)));
F.line = 53;F.filename = "cellsets.nim";
(*S_10861).D = D_10865;
LA2: ;
F.line = 55;F.filename = "cellsets.nim";
(*S_10861).D[((*S_10861).Len)-0] = C_10862;
F.line = 56;F.filename = "cellsets.nim";
(*S_10861).Len += 1;
framePtr = framePtr->prev;
}
static N_INLINE(void, Gcmark_14803)(void* P_14805) {
TY10802* Cell_14806;
NI C_14807;
NIM_BOOL LOC2;
NIM_BOOL LOC7;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "gcMark";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Cell_14806 = 0;
F.line = 473;F.filename = "gc.nim";
Cell_14806 = Usrtocell_11236(P_14805);
C_14807 = 0;
F.line = 474;F.filename = "gc.nim";
C_14807 = ((NI) (Cell_14806));
F.line = 475;F.filename = "gc.nim";
LOC2 = ((NU64)(4096) < (NU64)(C_14807));
if (!(LOC2)) goto LA3;
LOC2 = ((NI64)(C_14807 & 7) == 0);
LA3: ;
if (!LOC2) goto LA4;
F.line = 477;F.filename = "gc.nim";
LOC7 = Isallocatedptr_10401(&Allocator_8929, ((void*) (Cell_14806)));
if (!LOC7) goto LA8;
F.line = 479;F.filename = "gc.nim";
(*Cell_14806).Refcount = (NI64)((NU64)((*Cell_14806).Refcount) + (NU64)(8));
F.line = 480;F.filename = "gc.nim";
Add_10858(&Gch_11210.Decstack, Cell_14806);
LA8: ;
LA4: ;
framePtr = framePtr->prev;
}
N_CDECL(void, Markstackandregisters_15615)(TY11190* Gch_15618) {
jmp_buf Registers_15619;
int LOC2;
NI Max_15623;
NI Sp_15625;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "markStackAndRegisters";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
memset((void*)&Registers_15619, 0, sizeof(Registers_15619));
F.line = 584;F.filename = "gc.nim";
LOC2 = setjmp(Registers_15619);
if (!(LOC2 == ((NI32) 0))) goto LA3;
Max_15623 = 0;
F.line = 585;F.filename = "gc.nim";
Max_15623 = ((NI) (Stackbottom_11209));
Sp_15625 = 0;
F.line = 586;F.filename = "gc.nim";
Sp_15625 = ((NI) (Registers_15619));
F.line = 587;F.filename = "gc.nim";
while (1) {
if (!((NU64)(Sp_15625) <= (NU64)(Max_15623))) goto LA5;
F.line = 588;F.filename = "gc.nim";
Gcmark_14803((*((void**) (Sp_15625))));
F.line = 589;F.filename = "gc.nim";
Sp_15625 = (NI64)((NU64)(Sp_15625) + (NU64)(8));
} LA5: ;
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Markthreadstacks_14811)(TY11190* Gch_14814) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "markThreadStacks";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11240)(TY10802* C_11242) {
NIM_BOOL Result_11243;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "canbeCycleRoot";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11243 = 0;
F.line = 103;F.filename = "gc.nim";
Result_11243 = !((((*(*C_11242).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
framePtr = framePtr->prev;
return Result_11243;
}
static N_INLINE(NI, Nexttry_10909)(NI H_10911, NI Maxhash_10912) {
NI Result_10913;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nextTry";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10913 = 0;
F.line = 90;F.filename = "cellsets.nim";
Result_10913 = (NI64)((NI64)((NI64)(5 * H_10911) + 1) & Maxhash_10912);
framePtr = framePtr->prev;
return Result_10913;
}
N_NIMCALL(TY10810*, Cellsetget_10914)(TY10814* T_10916, NI Key_10917) {
TY10810* Result_10918;
NI H_10919;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CellSetGet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10918 = 0;
H_10919 = 0;
F.line = 96;F.filename = "cellsets.nim";
H_10919 = (NI64)(((NI) (Key_10917)) & (*T_10916).Max);
F.line = 97;F.filename = "cellsets.nim";
while (1) {
if (!!(((*T_10916).Data[(H_10919)-0] == NIM_NIL))) goto LA1;
F.line = 98;F.filename = "cellsets.nim";
if (!((*(*T_10916).Data[(H_10919)-0]).Key == Key_10917)) goto LA3;
F.line = 98;F.filename = "cellsets.nim";
F.line = 98;F.filename = "cellsets.nim";
Result_10918 = (*T_10916).Data[(H_10919)-0];
goto BeforeRet;
LA3: ;
F.line = 99;F.filename = "cellsets.nim";
H_10919 = Nexttry_10909(H_10919, (*T_10916).Max);
} LA1: ;
F.line = 100;F.filename = "cellsets.nim";
F.line = 100;F.filename = "cellsets.nim";
Result_10918 = NIM_NIL;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10918;
}
N_NIMCALL(void, Excl_11081)(TY10814* S_11084, TY10802* Cell_11085) {
NI U_11086;
TY10810* T_11087;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "excl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
U_11086 = 0;
F.line = 159;F.filename = "cellsets.nim";
U_11086 = ((NI) (Cell_11085));
T_11087 = 0;
F.line = 160;F.filename = "cellsets.nim";
T_11087 = Cellsetget_10914(&(*S_11084), (NI64)((NU64)(U_11086) >> (NU64)(12)));
F.line = 161;F.filename = "cellsets.nim";
if (!!((T_11087 == NIM_NIL))) goto LA2;
F.line = 162;F.filename = "cellsets.nim";
U_11086 = (NI64)((NU64)((NI64)((NU64)(U_11086) % (NU64)(4096))) / (NU64)(8));
F.line = 163;F.filename = "cellsets.nim";
(*T_11087).Bits[((NI64)((NU64)(U_11086) >> (NU64)(6)))-0] = (NI64)((*T_11087).Bits[((NI64)((NU64)(U_11086) >> (NU64)(6)))-0] & (NI64)((NU64) ~((NI64)((NU64)(1) << (NU64)((NI64)(U_11086 & 63))))));
LA2: ;
framePtr = framePtr->prev;
}
static N_INLINE(void*, Celltousr_11232)(TY10802* Cell_11234) {
void* Result_11235;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "cellToUsr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11235 = 0;
F.line = 96;F.filename = "gc.nim";
Result_11235 = ((void*) ((NI64)((NU64)(((NI) (Cell_11234))) + (NU64)(((NI) (((NI)sizeof(TY10802))))))));
framePtr = framePtr->prev;
return Result_11235;
}
N_NIMCALL(void, Preparedealloc_11825)(TY10802* Cell_11827) {
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "prepareDealloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 193;F.filename = "gc.nim";
if (!!(((*(*Cell_11827).Typ).finalizer == NIM_NIL))) goto LA2;
F.line = 199;F.filename = "gc.nim";
Recgclock_11212 += 1;
F.line = 200;F.filename = "gc.nim";
LOC4 = Celltousr_11232(Cell_11827);
((TFinalizer) ((*(*Cell_11827).Typ).finalizer))(LOC4);
F.line = 201;F.filename = "gc.nim";
Recgclock_11212 -= 1;
LA2: ;
framePtr = framePtr->prev;
}
N_NOINLINE(void, Addzct_11225)(TY10818* S_11228, TY10802* C_11229) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "addZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 90;F.filename = "gc.nim";
if (!((NI64)((*C_11229).Refcount & 4) == 0)) goto LA2;
F.line = 91;F.filename = "gc.nim";
(*C_11229).Refcount = (NI64)((NI64)((*C_11229).Refcount & -8) | 4);
F.line = 92;F.filename = "gc.nim";
Add_10858(S_11228, C_11229);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Dooperation_11816)(void* P_11818, NU8 Op_11819) {
TY10802* C_13806;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "doOperation";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 412;F.filename = "gc.nim";
if (!(P_11818 == NIM_NIL)) goto LA2;
F.line = 412;F.filename = "gc.nim";
goto BeforeRet;
LA2: ;
C_13806 = 0;
F.line = 413;F.filename = "gc.nim";
C_13806 = Usrtocell_11236(P_11818);
F.line = 414;F.filename = "gc.nim";
F.line = 415;F.filename = "gc.nim";
switch (Op_11819) {
case ((NU8) 0):
F.line = 417;F.filename = "gc.nim";
F.line = 418;F.filename = "gc.nim";
(*C_13806).Refcount = (NI64)((NU64)((*C_13806).Refcount) - (NU64)(8));
F.line = 420;F.filename = "gc.nim";
if (!((NU64)((*C_13806).Refcount) < (NU64)(8))) goto LA5;
F.line = 420;F.filename = "gc.nim";
Addzct_11225(&Gch_11210.Zct, C_13806);
LA5: ;
break;
case ((NU8) 1):
F.line = 422;F.filename = "gc.nim";
Add_10858(&Gch_11210.Tempstack, C_13806);
break;
case ((NU8) 2):
F.line = 424;F.filename = "gc.nim";
F.line = 425;F.filename = "gc.nim";
(*C_13806).Refcount = (NI64)((NU64)((*C_13806).Refcount) - (NU64)(8));
break;
}
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Getdiscriminant_7243)(void* Aa_7245, TNimNode* N_7247) {
NI Result_7248;
NI D_7258;
NI A_7259;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getDiscriminant";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7248 = 0;
F.line = 1557;F.filename = "system.nim";
D_7258 = 0;
A_7259 = 0;
F.line = 1559;F.filename = "system.nim";
A_7259 = ((NI) (Aa_7245));
F.line = 1560;F.filename = "system.nim";
switch ((*(*N_7247).typ).size) {
case 1:
F.line = 1561;F.filename = "system.nim";
D_7258 = ((NI)(NU)(NU8)((*((NI8*) ((NI64)((NU64)(A_7259) + (NU64)((*N_7247).offset)))))));
break;
case 2:
F.line = 1562;F.filename = "system.nim";
D_7258 = ((NI)(NU)(NU16)((*((NI16*) ((NI64)((NU64)(A_7259) + (NU64)((*N_7247).offset)))))));
break;
case 4:
F.line = 1563;F.filename = "system.nim";
D_7258 = ((NI) ((*((int*) ((NI64)((NU64)(A_7259) + (NU64)((*N_7247).offset)))))));
break;
default:
F.line = 1564;F.filename = "system.nim";
break;
}
F.line = 1565;F.filename = "system.nim";
F.line = 1565;F.filename = "system.nim";
Result_7248 = D_7258;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_7248;
}
N_NIMCALL(TNimNode*, Selectbranch_7263)(void* Aa_7265, TNimNode* N_7267) {
TNimNode* Result_7269;
NI Discr_7270;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "selectBranch";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7269 = 0;
Discr_7270 = 0;
F.line = 1568;F.filename = "system.nim";
Discr_7270 = Getdiscriminant_7243(Aa_7265, N_7267);
F.line = 1569;F.filename = "system.nim";
if (!((NU64)(Discr_7270) < (NU64)((*N_7267).len))) goto LA2;
F.line = 1570;F.filename = "system.nim";
Result_7269 = (*N_7267).sons[(Discr_7270)-0];
F.line = 1571;F.filename = "system.nim";
if (!(Result_7269 == NIM_NIL)) goto LA5;
F.line = 1571;F.filename = "system.nim";
Result_7269 = (*N_7267).sons[((*N_7267).len)-0];
LA5: ;
goto LA1;
LA2: ;
F.line = 1574;F.filename = "system.nim";
Result_7269 = (*N_7267).sons[((*N_7267).len)-0];
LA1: ;
framePtr = framePtr->prev;
return Result_7269;
}
N_NIMCALL(void, Forallslotsaux_12401)(void* Dest_12403, TNimNode* N_12405, NU8 Op_12406) {
NI D_12407;
NI I_12415;
NI HEX3Atmp_20075;
NI Res_20077;
TNimNode* M_12416;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "forAllSlotsAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_12407 = 0;
F.line = 282;F.filename = "gc.nim";
D_12407 = ((NI) (Dest_12403));
F.line = 283;F.filename = "gc.nim";
switch ((*N_12405).kind) {
case ((NU8) 0):
F.line = 284;F.filename = "gc.nim";
break;
case ((NU8) 1):
F.line = 285;F.filename = "gc.nim";
Forallchildrenaux_11820(((void*) ((NI64)((NU64)(D_12407) + (NU64)((*N_12405).offset)))), (*N_12405).typ, Op_12406);
break;
case ((NU8) 2):
I_12415 = 0;
HEX3Atmp_20075 = 0;
F.line = 287;F.filename = "gc.nim";
HEX3Atmp_20075 = (NI64)((*N_12405).len - 1);
Res_20077 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20077 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20077 <= HEX3Atmp_20075)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_12415 = Res_20077;
F.line = 287;F.filename = "gc.nim";
Forallslotsaux_12401(Dest_12403, (*N_12405).sons[(I_12415)-0], Op_12406);
F.line = 1024;F.filename = "system.nim";
Res_20077 += 1;
} LA1: ;
break;
case ((NU8) 3):
M_12416 = 0;
F.line = 289;F.filename = "gc.nim";
M_12416 = Selectbranch_7263(Dest_12403, N_12405);
F.line = 290;F.filename = "gc.nim";
if (!!((M_12416 == NIM_NIL))) goto LA3;
F.line = 290;F.filename = "gc.nim";
Forallslotsaux_12401(Dest_12403, M_12416, Op_12406);
LA3: ;
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Forallchildrenaux_11820)(void* Dest_11822, TNimType* Mt_11823, NU8 Op_11824) {
NI D_12433;
NI I_12452;
NI HEX3Atmp_20081;
NI Res_20083;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "forAllChildrenAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_12433 = 0;
F.line = 293;F.filename = "gc.nim";
D_12433 = ((NI) (Dest_11822));
F.line = 294;F.filename = "gc.nim";
if (!(Dest_11822 == NIM_NIL)) goto LA2;
F.line = 294;F.filename = "gc.nim";
goto BeforeRet;
LA2: ;
F.line = 295;F.filename = "gc.nim";
if (!!((((*Mt_11823).flags &(1<<((((NU8) 0))&7)))!=0))) goto LA5;
F.line = 296;F.filename = "gc.nim";
switch ((*Mt_11823).kind) {
case ((NU8) 16):
case ((NU8) 4):
case ((NU8) 27):
I_12452 = 0;
HEX3Atmp_20081 = 0;
F.line = 298;F.filename = "gc.nim";
HEX3Atmp_20081 = (NI64)((NI64)((*Mt_11823).size / (*(*Mt_11823).base).size) - 1);
Res_20083 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20083 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20083 <= HEX3Atmp_20081)) goto LA7;
F.line = 1021;F.filename = "system.nim";
I_12452 = Res_20083;
F.line = 299;F.filename = "gc.nim";
Forallchildrenaux_11820(((void*) ((NI64)((NU64)(D_12433) + (NU64)((NI64)((NU64)(I_12452) * (NU64)((*(*Mt_11823).base).size)))))), (*Mt_11823).base, Op_11824);
F.line = 1024;F.filename = "system.nim";
Res_20083 += 1;
} LA7: ;
break;
case ((NU8) 22):
case ((NU8) 28):
case ((NU8) 24):
F.line = 301;F.filename = "gc.nim";
Dooperation_11816((*((void**) (D_12433))), Op_11824);
break;
case ((NU8) 17):
case ((NU8) 18):
case ((NU8) 40):
F.line = 303;F.filename = "gc.nim";
Forallslotsaux_12401(Dest_11822, (*Mt_11823).node, Op_11824);
break;
default:
break;
}
LA5: ;
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Forallchildren_11812)(TY10802* Cell_11814, NU8 Op_11815) {
void* LOC1;
NI D_12479;
void* LOC2;
TGenericSeq* S_12480;
NI I_12499;
NI HEX3Atmp_20087;
NI Res_20089;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "forAllChildren";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 307;F.filename = "gc.nim";
F.line = 308;F.filename = "gc.nim";
F.line = 309;F.filename = "gc.nim";
switch ((*(*Cell_11814).Typ).kind) {
case ((NU8) 22):
F.line = 311;F.filename = "gc.nim";
LOC1 = Celltousr_11232(Cell_11814);
Forallchildrenaux_11820(LOC1, (*(*Cell_11814).Typ).base, Op_11815);
break;
case ((NU8) 24):
D_12479 = 0;
F.line = 313;F.filename = "gc.nim";
LOC2 = Celltousr_11232(Cell_11814);
D_12479 = ((NI) (LOC2));
S_12480 = 0;
F.line = 314;F.filename = "gc.nim";
S_12480 = ((TGenericSeq*) (D_12479));
F.line = 315;F.filename = "gc.nim";
if (!!((S_12480 == NIM_NIL))) goto LA4;
I_12499 = 0;
HEX3Atmp_20087 = 0;
F.line = 316;F.filename = "gc.nim";
HEX3Atmp_20087 = (NI64)((*S_12480).len - 1);
Res_20089 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20089 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20089 <= HEX3Atmp_20087)) goto LA6;
F.line = 1021;F.filename = "system.nim";
I_12499 = Res_20089;
F.line = 317;F.filename = "gc.nim";
Forallchildrenaux_11820(((void*) ((NI64)((NU64)((NI64)((NU64)(D_12479) + (NU64)((NI64)((NU64)(I_12499) * (NU64)((*(*(*Cell_11814).Typ).base).size))))) + (NU64)(16)))), (*(*Cell_11814).Typ).base, Op_11815);
F.line = 1024;F.filename = "system.nim";
Res_20089 += 1;
} LA6: ;
LA4: ;
break;
case ((NU8) 28):
break;
default:
F.line = 320;F.filename = "gc.nim";
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Collectzct_15801)(TY11190* Gch_15804) {
NI* L_15806;
TY10802* C_15809;
NIM_BOOL LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CollectZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
L_15806 = 0;
F.line = 600;F.filename = "gc.nim";
L_15806 = &(*Gch_15804).Zct.Len;
F.line = 601;F.filename = "gc.nim";
while (1) {
if (!(0 < (*L_15806))) goto LA1;
C_15809 = 0;
F.line = 602;F.filename = "gc.nim";
C_15809 = (*Gch_15804).Zct.D[(0)-0];
F.line = 604;F.filename = "gc.nim";
F.line = 605;F.filename = "gc.nim";
(*C_15809).Refcount = (NI64)((*C_15809).Refcount & -8);
F.line = 606;F.filename = "gc.nim";
(*Gch_15804).Zct.D[(0)-0] = (*Gch_15804).Zct.D[((NI64)((*L_15806) - 1))-0];
F.line = 607;F.filename = "gc.nim";
(*L_15806) -= 1;
F.line = 608;F.filename = "gc.nim";
if (!((NU64)((*C_15809).Refcount) < (NU64)(8))) goto LA3;
F.line = 615;F.filename = "gc.nim";
LOC6 = Canbecycleroot_11240(C_15809);
if (!LOC6) goto LA7;
F.line = 615;F.filename = "gc.nim";
Excl_11081(&(*Gch_15804).Cycleroots, C_15809);
LA7: ;
F.line = 621;F.filename = "gc.nim";
Preparedealloc_11825(C_15809);
F.line = 622;F.filename = "gc.nim";
Forallchildren_11812(C_15809, ((NU8) 0));
F.line = 623;F.filename = "gc.nim";
Rawdealloc_10064(&Allocator_8929, ((void*) (C_15809)));
LA3: ;
} LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Init_10888)(TY10814* S_10891) {
void* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Init";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 73;F.filename = "cellsets.nim";
LOC1 = Alloc0_1953(8192);
(*S_10891).Data = ((TY10810**) (LOC1));
F.line = 74;F.filename = "cellsets.nim";
(*S_10891).Max = 1023;
F.line = 75;F.filename = "cellsets.nim";
(*S_10891).Counter = 0;
F.line = 76;F.filename = "cellsets.nim";
(*S_10891).Head = NIM_NIL;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Cellsetrawinsert_10933)(TY10814* T_10935, TY10810** Data_10936, TY10810* Desc_10937) {
NI H_10938;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CellSetRawInsert";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
H_10938 = 0;
F.line = 103;F.filename = "cellsets.nim";
H_10938 = (NI64)(((NI) ((*Desc_10937).Key)) & (*T_10935).Max);
F.line = 104;F.filename = "cellsets.nim";
while (1) {
if (!!((Data_10936[(H_10938)-0] == NIM_NIL))) goto LA1;
F.line = 105;F.filename = "cellsets.nim";
F.line = 106;F.filename = "cellsets.nim";
H_10938 = Nexttry_10909(H_10938, (*T_10935).Max);
} LA1: ;
F.line = 107;F.filename = "cellsets.nim";
F.line = 108;F.filename = "cellsets.nim";
Data_10936[(H_10938)-0] = Desc_10937;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Cellsetenlarge_10970)(TY10814* T_10973) {
NI Oldmax_10974;
TY10810** N_10975;
void* LOC1;
NI I_10983;
NI Res_20066;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CellSetEnlarge";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Oldmax_10974 = 0;
F.line = 111;F.filename = "cellsets.nim";
Oldmax_10974 = (*T_10973).Max;
F.line = 112;F.filename = "cellsets.nim";
(*T_10973).Max = (NI64)((NI64)((NI64)((*T_10973).Max + 1) * 2) - 1);
N_10975 = 0;
F.line = 113;F.filename = "cellsets.nim";
LOC1 = Alloc0_1953((NI64)((NI64)((*T_10973).Max + 1) * 8));
N_10975 = ((TY10810**) (LOC1));
I_10983 = 0;
Res_20066 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20066 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20066 <= Oldmax_10974)) goto LA2;
F.line = 1021;F.filename = "system.nim";
I_10983 = Res_20066;
F.line = 115;F.filename = "cellsets.nim";
if (!!(((*T_10973).Data[(I_10983)-0] == NIM_NIL))) goto LA4;
F.line = 116;F.filename = "cellsets.nim";
Cellsetrawinsert_10933(&(*T_10973), N_10975, (*T_10973).Data[(I_10983)-0]);
LA4: ;
F.line = 1024;F.filename = "system.nim";
Res_20066 += 1;
} LA2: ;
F.line = 117;F.filename = "cellsets.nim";
Dealloc_1960(((void*) ((*T_10973).Data)));
F.line = 118;F.filename = "cellsets.nim";
(*T_10973).Data = N_10975;
framePtr = framePtr->prev;
}
N_NIMCALL(TY10810*, Cellsetput_10995)(TY10814* T_10998, NI Key_10999) {
TY10810* Result_11000;
NI H_11001;
TY10810* X_11002;
NIM_BOOL LOC9;
void* LOC14;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CellSetPut";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11000 = 0;
H_11001 = 0;
F.line = 121;F.filename = "cellsets.nim";
H_11001 = (NI64)(((NI) (Key_10999)) & (*T_10998).Max);
F.line = 122;F.filename = "cellsets.nim";
while (1) {
X_11002 = 0;
F.line = 123;F.filename = "cellsets.nim";
X_11002 = (*T_10998).Data[(H_11001)-0];
F.line = 124;F.filename = "cellsets.nim";
if (!(X_11002 == NIM_NIL)) goto LA3;
F.line = 124;F.filename = "cellsets.nim";
goto LA1;
LA3: ;
F.line = 125;F.filename = "cellsets.nim";
if (!((*X_11002).Key == Key_10999)) goto LA6;
F.line = 125;F.filename = "cellsets.nim";
F.line = 125;F.filename = "cellsets.nim";
Result_11000 = X_11002;
goto BeforeRet;
LA6: ;
F.line = 126;F.filename = "cellsets.nim";
H_11001 = Nexttry_10909(H_11001, (*T_10998).Max);
} LA1: ;
F.line = 128;F.filename = "cellsets.nim";
LOC9 = ((NI64)((NI64)((*T_10998).Max + 1) * 2) < (NI64)((*T_10998).Counter * 3));
if (LOC9) goto LA10;
LOC9 = ((NI64)((NI64)((*T_10998).Max + 1) - (*T_10998).Counter) < 4);
LA10: ;
if (!LOC9) goto LA11;
F.line = 129;F.filename = "cellsets.nim";
Cellsetenlarge_10970(T_10998);
LA11: ;
F.line = 130;F.filename = "cellsets.nim";
(*T_10998).Counter += 1;
F.line = 131;F.filename = "cellsets.nim";
H_11001 = (NI64)(((NI) (Key_10999)) & (*T_10998).Max);
F.line = 132;F.filename = "cellsets.nim";
while (1) {
if (!!(((*T_10998).Data[(H_11001)-0] == NIM_NIL))) goto LA13;
F.line = 132;F.filename = "cellsets.nim";
H_11001 = Nexttry_10909(H_11001, (*T_10998).Max);
} LA13: ;
F.line = 133;F.filename = "cellsets.nim";
F.line = 135;F.filename = "cellsets.nim";
LOC14 = Alloc0_1953(((NI)sizeof(TY10810)));
Result_11000 = ((TY10810*) (LOC14));
F.line = 136;F.filename = "cellsets.nim";
(*Result_11000).Next = (*T_10998).Head;
F.line = 137;F.filename = "cellsets.nim";
(*Result_11000).Key = Key_10999;
F.line = 138;F.filename = "cellsets.nim";
(*T_10998).Head = Result_11000;
F.line = 139;F.filename = "cellsets.nim";
(*T_10998).Data[(H_11001)-0] = Result_11000;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_11000;
}
N_NOINLINE(void, Incl_11074)(TY10814* S_11077, TY10802* Cell_11078) {
NI U_11079;
TY10810* T_11080;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "incl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
U_11079 = 0;
F.line = 153;F.filename = "cellsets.nim";
U_11079 = ((NI) (Cell_11078));
T_11080 = 0;
F.line = 154;F.filename = "cellsets.nim";
T_11080 = Cellsetput_10995(S_11077, (NI64)((NU64)(U_11079) >> (NU64)(12)));
F.line = 155;F.filename = "cellsets.nim";
U_11079 = (NI64)((NU64)((NI64)((NU64)(U_11079) % (NU64)(4096))) / (NU64)(8));
F.line = 156;F.filename = "cellsets.nim";
(*T_11080).Bits[((NI64)((NU64)(U_11079) >> (NU64)(6)))-0] = (NI64)((*T_11080).Bits[((NI64)((NU64)(U_11079) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_11079 & 63))));
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_BOOL, Containsorincl_11099)(TY10814* S_11102, TY10802* Cell_11103) {
NIM_BOOL Result_11104;
NI U_11105;
TY10810* T_11106;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "containsOrIncl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11104 = 0;
U_11105 = 0;
F.line = 167;F.filename = "cellsets.nim";
U_11105 = ((NI) (Cell_11103));
T_11106 = 0;
F.line = 168;F.filename = "cellsets.nim";
T_11106 = Cellsetget_10914(&(*S_11102), (NI64)((NU64)(U_11105) >> (NU64)(12)));
F.line = 169;F.filename = "cellsets.nim";
if (!!((T_11106 == NIM_NIL))) goto LA2;
F.line = 170;F.filename = "cellsets.nim";
U_11105 = (NI64)((NU64)((NI64)((NU64)(U_11105) % (NU64)(4096))) / (NU64)(8));
F.line = 171;F.filename = "cellsets.nim";
Result_11104 = !(((NI64)((*T_11106).Bits[((NI64)((NU64)(U_11105) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_11105 & 63)))) == 0));
F.line = 172;F.filename = "cellsets.nim";
if (!!(Result_11104)) goto LA5;
F.line = 173;F.filename = "cellsets.nim";
(*T_11106).Bits[((NI64)((NU64)(U_11105) >> (NU64)(6)))-0] = (NI64)((*T_11106).Bits[((NI64)((NU64)(U_11105) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_11105 & 63))));
LA5: ;
goto LA1;
LA2: ;
F.line = 176;F.filename = "cellsets.nim";
Incl_11074(S_11102, Cell_11103);
F.line = 177;F.filename = "cellsets.nim";
Result_11104 = NIM_FALSE;
LA1: ;
framePtr = framePtr->prev;
return Result_11104;
}
N_NIMCALL(NIM_BOOL, Contains_11054)(TY10814* S_11056, TY10802* Cell_11057) {
NIM_BOOL Result_11058;
NI U_11059;
TY10810* T_11060;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11058 = 0;
U_11059 = 0;
F.line = 144;F.filename = "cellsets.nim";
U_11059 = ((NI) (Cell_11057));
T_11060 = 0;
F.line = 145;F.filename = "cellsets.nim";
T_11060 = Cellsetget_10914(S_11056, (NI64)((NU64)(U_11059) >> (NU64)(12)));
F.line = 146;F.filename = "cellsets.nim";
if (!!((T_11060 == NIM_NIL))) goto LA2;
F.line = 147;F.filename = "cellsets.nim";
U_11059 = (NI64)((NU64)((NI64)((NU64)(U_11059) % (NU64)(4096))) / (NU64)(8));
F.line = 148;F.filename = "cellsets.nim";
Result_11058 = !(((NI64)((*T_11060).Bits[((NI64)((NU64)(U_11059) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_11059 & 63)))) == 0));
goto LA1;
LA2: ;
F.line = 150;F.filename = "cellsets.nim";
Result_11058 = NIM_FALSE;
LA1: ;
framePtr = framePtr->prev;
return Result_11058;
}
N_NIMCALL(void, Deinit_10892)(TY10814* S_10895) {
TY10810* It_10896;
TY10810* N_10908;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Deinit";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
It_10896 = 0;
F.line = 79;F.filename = "cellsets.nim";
It_10896 = (*S_10895).Head;
F.line = 80;F.filename = "cellsets.nim";
while (1) {
if (!!((It_10896 == NIM_NIL))) goto LA1;
N_10908 = 0;
F.line = 81;F.filename = "cellsets.nim";
N_10908 = (*It_10896).Next;
F.line = 82;F.filename = "cellsets.nim";
Dealloc_1960(((void*) (It_10896)));
F.line = 83;F.filename = "cellsets.nim";
It_10896 = N_10908;
} LA1: ;
F.line = 84;F.filename = "cellsets.nim";
(*S_10895).Head = NIM_NIL;
F.line = 85;F.filename = "cellsets.nim";
Dealloc_1960(((void*) ((*S_10895).Data)));
F.line = 86;F.filename = "cellsets.nim";
(*S_10895).Data = NIM_NIL;
F.line = 87;F.filename = "cellsets.nim";
(*S_10895).Counter = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Collectcycles_14003)(TY11190* Gch_14006) {
NI Tabsize_14007;
TY10802* C_14008;
TY10814 HEX3Atmp_20101;
TY10810* R_20103;
NI I_20105;
NI W_20107;
NI J_20109;
TY10814 Marker_14023;
TY10802* C_14025;
TY10814 HEX3Atmp_20124;
TY10810* R_20126;
NI I_20128;
NI W_20130;
NI J_20132;
NIM_BOOL LOC17;
TY10802* D_14041;
NIM_BOOL LOC22;
NIM_BOOL LOC24;
TY10802* C_14045;
TY10814 HEX3Atmp_20158;
TY10810* R_20160;
NI I_20162;
NI W_20164;
NI J_20166;
TY10802* D_14060;
NIM_BOOL LOC41;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "collectCycles";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Tabsize_14007 = 0;
F.line = 429;F.filename = "gc.nim";
Tabsize_14007 = 0;
C_14008 = 0;
memset((void*)&HEX3Atmp_20101, 0, sizeof(HEX3Atmp_20101));
F.line = 430;F.filename = "gc.nim";
HEX3Atmp_20101 = (*Gch_14006).Cycleroots;
R_20103 = 0;
F.line = 181;F.filename = "cellsets.nim";
R_20103 = HEX3Atmp_20101.Head;
F.line = 182;F.filename = "cellsets.nim";
while (1) {
if (!!((R_20103 == NIM_NIL))) goto LA1;
I_20105 = 0;
F.line = 183;F.filename = "cellsets.nim";
I_20105 = 0;
F.line = 184;F.filename = "cellsets.nim";
while (1) {
if (!(I_20105 <= 7)) goto LA2;
W_20107 = 0;
F.line = 185;F.filename = "cellsets.nim";
W_20107 = (*R_20103).Bits[(I_20105)-0];
J_20109 = 0;
F.line = 187;F.filename = "cellsets.nim";
J_20109 = 0;
F.line = 188;F.filename = "cellsets.nim";
while (1) {
if (!!((W_20107 == 0))) goto LA3;
F.line = 189;F.filename = "cellsets.nim";
if (!!(((NI64)(W_20107 & 1) == 0))) goto LA5;
F.line = 190;F.filename = "cellsets.nim";
C_14008 = ((TY10802*) ((NI64)((NI64)((NU64)((*R_20103).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_20105) << (NU64)(6))) + (NU64)(J_20109))) * (NU64)(8)))));
F.line = 431;F.filename = "gc.nim";
Tabsize_14007 += 1;
F.line = 432;F.filename = "gc.nim";
Forallchildren_11812(C_14008, ((NU8) 2));
LA5: ;
F.line = 192;F.filename = "cellsets.nim";
J_20109 += 1;
F.line = 193;F.filename = "cellsets.nim";
W_20107 = (NI64)((NU64)(W_20107) >> (NU64)(1));
} LA3: ;
F.line = 194;F.filename = "cellsets.nim";
I_20105 += 1;
} LA2: ;
F.line = 195;F.filename = "cellsets.nim";
R_20103 = (*R_20103).Next;
} LA1: ;
F.line = 433;F.filename = "gc.nim";
(*Gch_14006).Stat.Cycletablesize = (((*Gch_14006).Stat.Cycletablesize >= Tabsize_14007) ? (*Gch_14006).Stat.Cycletablesize : Tabsize_14007);
memset((void*)&Marker_14023, 0, sizeof(Marker_14023));
F.line = 437;F.filename = "gc.nim";
Init_10888(&Marker_14023);
C_14025 = 0;
memset((void*)&HEX3Atmp_20124, 0, sizeof(HEX3Atmp_20124));
F.line = 438;F.filename = "gc.nim";
HEX3Atmp_20124 = (*Gch_14006).Cycleroots;
R_20126 = 0;
F.line = 181;F.filename = "cellsets.nim";
R_20126 = HEX3Atmp_20124.Head;
F.line = 182;F.filename = "cellsets.nim";
while (1) {
if (!!((R_20126 == NIM_NIL))) goto LA7;
I_20128 = 0;
F.line = 183;F.filename = "cellsets.nim";
I_20128 = 0;
F.line = 184;F.filename = "cellsets.nim";
while (1) {
if (!(I_20128 <= 7)) goto LA8;
W_20130 = 0;
F.line = 185;F.filename = "cellsets.nim";
W_20130 = (*R_20126).Bits[(I_20128)-0];
J_20132 = 0;
F.line = 187;F.filename = "cellsets.nim";
J_20132 = 0;
F.line = 188;F.filename = "cellsets.nim";
while (1) {
if (!!((W_20130 == 0))) goto LA9;
F.line = 189;F.filename = "cellsets.nim";
if (!!(((NI64)(W_20130 & 1) == 0))) goto LA11;
F.line = 190;F.filename = "cellsets.nim";
C_14025 = ((TY10802*) ((NI64)((NI64)((NU64)((*R_20126).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_20128) << (NU64)(6))) + (NU64)(J_20132))) * (NU64)(8)))));
F.line = 439;F.filename = "gc.nim";
if (!((NU64)(8) <= (NU64)((*C_14025).Refcount))) goto LA14;
F.line = 440;F.filename = "gc.nim";
LOC17 = Containsorincl_11099(&Marker_14023, C_14025);
if (!!(LOC17)) goto LA18;
F.line = 441;F.filename = "gc.nim";
(*Gch_14006).Tempstack.Len = 0;
F.line = 442;F.filename = "gc.nim";
Forallchildren_11812(C_14025, ((NU8) 1));
F.line = 443;F.filename = "gc.nim";
while (1) {
if (!(0 < (*Gch_14006).Tempstack.Len)) goto LA20;
F.line = 444;F.filename = "gc.nim";
(*Gch_14006).Tempstack.Len -= 1;
D_14041 = 0;
F.line = 445;F.filename = "gc.nim";
D_14041 = (*Gch_14006).Tempstack.D[((*Gch_14006).Tempstack.Len)-0];
F.line = 446;F.filename = "gc.nim";
(*D_14041).Refcount = (NI64)((NU64)((*D_14041).Refcount) + (NU64)(8));
F.line = 447;F.filename = "gc.nim";
LOC22 = Contains_11054(&(*Gch_14006).Cycleroots, D_14041);
if (!(LOC22)) goto LA23;
LOC24 = Containsorincl_11099(&Marker_14023, D_14041);
LOC22 = !(LOC24);
LA23: ;
if (!LOC22) goto LA25;
F.line = 448;F.filename = "gc.nim";
Forallchildren_11812(D_14041, ((NU8) 1));
LA25: ;
} LA20: ;
LA18: ;
LA14: ;
LA11: ;
F.line = 192;F.filename = "cellsets.nim";
J_20132 += 1;
F.line = 193;F.filename = "cellsets.nim";
W_20130 = (NI64)((NU64)(W_20130) >> (NU64)(1));
} LA9: ;
F.line = 194;F.filename = "cellsets.nim";
I_20128 += 1;
} LA8: ;
F.line = 195;F.filename = "cellsets.nim";
R_20126 = (*R_20126).Next;
} LA7: ;
C_14045 = 0;
memset((void*)&HEX3Atmp_20158, 0, sizeof(HEX3Atmp_20158));
F.line = 450;F.filename = "gc.nim";
HEX3Atmp_20158 = (*Gch_14006).Cycleroots;
R_20160 = 0;
F.line = 181;F.filename = "cellsets.nim";
R_20160 = HEX3Atmp_20158.Head;
F.line = 182;F.filename = "cellsets.nim";
while (1) {
if (!!((R_20160 == NIM_NIL))) goto LA27;
I_20162 = 0;
F.line = 183;F.filename = "cellsets.nim";
I_20162 = 0;
F.line = 184;F.filename = "cellsets.nim";
while (1) {
if (!(I_20162 <= 7)) goto LA28;
W_20164 = 0;
F.line = 185;F.filename = "cellsets.nim";
W_20164 = (*R_20160).Bits[(I_20162)-0];
J_20166 = 0;
F.line = 187;F.filename = "cellsets.nim";
J_20166 = 0;
F.line = 188;F.filename = "cellsets.nim";
while (1) {
if (!!((W_20164 == 0))) goto LA29;
F.line = 189;F.filename = "cellsets.nim";
if (!!(((NI64)(W_20164 & 1) == 0))) goto LA31;
F.line = 190;F.filename = "cellsets.nim";
C_14045 = ((TY10802*) ((NI64)((NI64)((NU64)((*R_20160).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_20162) << (NU64)(6))) + (NU64)(J_20166))) * (NU64)(8)))));
F.line = 451;F.filename = "gc.nim";
if (!((NU64)((*C_14045).Refcount) < (NU64)(8))) goto LA34;
F.line = 452;F.filename = "gc.nim";
(*Gch_14006).Tempstack.Len = 0;
F.line = 453;F.filename = "gc.nim";
Forallchildren_11812(C_14045, ((NU8) 1));
F.line = 454;F.filename = "gc.nim";
while (1) {
if (!(0 < (*Gch_14006).Tempstack.Len)) goto LA36;
F.line = 455;F.filename = "gc.nim";
(*Gch_14006).Tempstack.Len -= 1;
D_14060 = 0;
F.line = 456;F.filename = "gc.nim";
D_14060 = (*Gch_14006).Tempstack.D[((*Gch_14006).Tempstack.Len)-0];
F.line = 457;F.filename = "gc.nim";
if (!((NU64)((*D_14060).Refcount) < (NU64)(8))) goto LA38;
F.line = 458;F.filename = "gc.nim";
LOC41 = Contains_11054(&(*Gch_14006).Cycleroots, D_14060);
if (!!(LOC41)) goto LA42;
F.line = 459;F.filename = "gc.nim";
Addzct_11225(&(*Gch_14006).Zct, D_14060);
LA42: ;
LA38: ;
} LA36: ;
F.line = 461;F.filename = "gc.nim";
Preparedealloc_11825(C_14045);
F.line = 464;F.filename = "gc.nim";
Rawdealloc_10064(&Allocator_8929, ((void*) (C_14045)));
LA34: ;
LA31: ;
F.line = 192;F.filename = "cellsets.nim";
J_20166 += 1;
F.line = 193;F.filename = "cellsets.nim";
W_20164 = (NI64)((NU64)(W_20164) >> (NU64)(1));
} LA29: ;
F.line = 194;F.filename = "cellsets.nim";
I_20162 += 1;
} LA28: ;
F.line = 195;F.filename = "cellsets.nim";
R_20160 = (*R_20160).Next;
} LA27: ;
F.line = 468;F.filename = "gc.nim";
Deinit_10892(&(*Gch_14006).Cycleroots);
F.line = 469;F.filename = "gc.nim";
Init_10888(&(*Gch_14006).Cycleroots);
framePtr = framePtr->prev;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7606;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicDec";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7606 = 0;
F.line = 37;F.filename = "systhread.nim";
Result_7606 = __sync_sub_and_fetch(Memloc_3009, X_3010);
framePtr = framePtr->prev;
return Result_7606;
}
static N_INLINE(void, Rtladdzct_11858)(TY10802* C_11860) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 211;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 211;F.filename = "gc.nim";
pthread_mutex_lock(&Gch_11210.Zctlock);
LA2: ;
F.line = 212;F.filename = "gc.nim";
Addzct_11225(&Gch_11210.Zct, C_11860);
F.line = 213;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 213;F.filename = "gc.nim";
pthread_mutex_unlock(&Gch_11210.Zctlock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Rtladdcycleroot_11852)(TY10802* C_11854) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddCycleRoot";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 205;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 205;F.filename = "gc.nim";
pthread_mutex_lock(&Gch_11210.Cyclerootslock);
LA2: ;
F.line = 206;F.filename = "gc.nim";
Incl_11074(&Gch_11210.Cycleroots, C_11854);
F.line = 207;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 207;F.filename = "gc.nim";
pthread_mutex_unlock(&Gch_11210.Cyclerootslock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Decref_11864)(TY10802* C_11866) {
NI LOC2;
NIM_BOOL LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "decRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 219;F.filename = "gc.nim";
F.line = 220;F.filename = "gc.nim";
LOC2 = Atomicdec_3006(&(*C_11866).Refcount, 8);
if (!((NU64)(LOC2) < (NU64)(8))) goto LA3;
F.line = 221;F.filename = "gc.nim";
Rtladdzct_11858(C_11866);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11240(C_11866);
if (!LOC5) goto LA6;
F.line = 223;F.filename = "gc.nim";
Rtladdcycleroot_11852(C_11866);
goto LA1;
LA6: ;
LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Unmarkstackandregisters_16401)(TY11190* Gch_16404) {
TY10802** D_16405;
NI I_16413;
NI HEX3Atmp_20193;
NI Res_20195;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "unmarkStackAndRegisters";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_16405 = 0;
F.line = 629;F.filename = "gc.nim";
D_16405 = (*Gch_16404).Decstack.D;
I_16413 = 0;
HEX3Atmp_20193 = 0;
F.line = 630;F.filename = "gc.nim";
HEX3Atmp_20193 = (NI64)((*Gch_16404).Decstack.Len - 1);
Res_20195 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20195 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20195 <= HEX3Atmp_20193)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_16413 = Res_20195;
F.line = 631;F.filename = "gc.nim";
F.line = 632;F.filename = "gc.nim";
Decref_11864(D_16405[(I_16413)-0]);
F.line = 1024;F.filename = "system.nim";
Res_20195 += 1;
} LA1: ;
F.line = 633;F.filename = "gc.nim";
(*Gch_16404).Decstack.Len = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Collectct_11805)(TY11190* Gch_11808) {
NIM_BOOL LOC2;
NIM_BOOL LOC3;
NIM_BOOL LOC5;
NI LOC7;
NI LOC11;
NIM_BOOL LOC13;
NI LOC14;
NI LOC18;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "collectCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 636;F.filename = "gc.nim";
LOC3 = (256 <= (*Gch_11808).Zct.Len);
if (LOC3) goto LA4;
LOC5 = NIM_TRUE;
if (!(LOC5)) goto LA6;
LOC7 = Getoccupiedmem_2017();
LOC5 = (Cyclethreshold_11211 <= LOC7);
LA6: ;
LOC3 = LOC5;
LA4: ;
LOC2 = LOC3;
if (LOC2) goto LA8;
LOC2 = NIM_FALSE;
LA8: ;
if (!LOC2) goto LA9;
F.line = 638;F.filename = "gc.nim";
LOC11 = Stacksize_15601();
(*Gch_11808).Stat.Maxstacksize = (((*Gch_11808).Stat.Maxstacksize >= LOC11) ? (*Gch_11808).Stat.Maxstacksize : LOC11);
F.line = 639;F.filename = "gc.nim";
F.line = 640;F.filename = "gc.nim";
Markstackandregisters_15615(Gch_11808);
F.line = 641;F.filename = "gc.nim";
Markthreadstacks_14811(Gch_11808);
F.line = 642;F.filename = "gc.nim";
(*Gch_11808).Stat.Maxstackcells = (((*Gch_11808).Stat.Maxstackcells >= (*Gch_11808).Decstack.Len) ? (*Gch_11808).Stat.Maxstackcells : (*Gch_11808).Decstack.Len);
F.line = 643;F.filename = "gc.nim";
(*Gch_11808).Stat.Stackscans += 1;
F.line = 644;F.filename = "gc.nim";
Collectzct_15801(Gch_11808);
F.line = 646;F.filename = "gc.nim";
LOC14 = Getoccupiedmem_2017();
LOC13 = (Cyclethreshold_11211 <= LOC14);
if (LOC13) goto LA15;
LOC13 = NIM_FALSE;
LA15: ;
if (!LOC13) goto LA16;
F.line = 647;F.filename = "gc.nim";
Collectcycles_14003(Gch_11808);
F.line = 648;F.filename = "gc.nim";
Collectzct_15801(Gch_11808);
F.line = 649;F.filename = "gc.nim";
(*Gch_11808).Stat.Cyclecollections += 1;
F.line = 650;F.filename = "gc.nim";
LOC18 = Getoccupiedmem_2017();
Cyclethreshold_11211 = ((4194304 >= (NI64)(LOC18 * 2)) ? 4194304 : (NI64)(LOC18 * 2));
F.line = 652;F.filename = "gc.nim";
(*Gch_11808).Stat.Maxthreshold = (((*Gch_11808).Stat.Maxthreshold >= Cyclethreshold_11211) ? (*Gch_11808).Stat.Maxthreshold : Cyclethreshold_11211);
LA16: ;
F.line = 653;F.filename = "gc.nim";
Unmarkstackandregisters_16401(Gch_11808);
LA9: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Checkcollection_12500)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "checkCollection";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 324;F.filename = "gc.nim";
if (!(Recgclock_11212 == 0)) goto LA2;
F.line = 325;F.filename = "gc.nim";
Collectct_11805(&Gch_11210);
LA2: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Unlock_11219)(TY11190* Gch_11222) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "unlock";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 85;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 86;F.filename = "gc.nim";
pthread_mutex_unlock(&(*Gch_11222).Zctlock);
F.line = 87;F.filename = "gc.nim";
pthread_mutex_unlock(&(*Gch_11222).Cyclerootslock);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void*, newObj)(TNimType* Typ_12507, NI Size_12508) {
void* Result_12509;
TY10802* Res_12524;
void* LOC1;
NI L_12602;
TY10802** D_12603;
NI I_12613;
NI HEX3Atmp_20093;
NI HEX3Atmp_20094;
NI Res_20096;
TY10802* C_12614;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newObj";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_12509 = 0;
F.line = 329;F.filename = "gc.nim";
Lock_11213(&Gch_11210);
F.line = 330;F.filename = "gc.nim";
F.line = 331;F.filename = "gc.nim";
Checkcollection_12500();
Res_12524 = 0;
F.line = 332;F.filename = "gc.nim";
LOC1 = Rawalloc_9795(&Allocator_8929, (NI64)(Size_12508 + ((NI)sizeof(TY10802))));
Res_12524 = ((TY10802*) (LOC1));
F.line = 333;F.filename = "gc.nim";
zeroMem(((void*) (Res_12524)), (NI64)(Size_12508 + ((NI)sizeof(TY10802))));
F.line = 334;F.filename = "gc.nim";
F.line = 336;F.filename = "gc.nim";
(*Res_12524).Typ = Typ_12507;
F.line = 341;F.filename = "gc.nim";
(*Res_12524).Refcount = 4;
F.line = 342;F.filename = "gc.nim";
L_12602 = 0;
F.line = 347;F.filename = "gc.nim";
L_12602 = Gch_11210.Zct.Len;
D_12603 = 0;
F.line = 348;F.filename = "gc.nim";
D_12603 = Gch_11210.Zct.D;
I_12613 = 0;
HEX3Atmp_20093 = 0;
HEX3Atmp_20094 = 0;
F.line = 349;F.filename = "gc.nim";
HEX3Atmp_20093 = (NI64)(L_12602 - 1);
F.line = 349;F.filename = "gc.nim";
HEX3Atmp_20094 = ((0 >= (NI64)(L_12602 - 8)) ? 0 : (NI64)(L_12602 - 8));
Res_20096 = 0;
F.line = 1012;F.filename = "system.nim";
Res_20096 = HEX3Atmp_20093;
F.line = 1013;F.filename = "system.nim";
while (1) {
if (!(HEX3Atmp_20094 <= Res_20096)) goto LA3;
F.line = 1012;F.filename = "system.nim";
I_12613 = Res_20096;
C_12614 = 0;
F.line = 350;F.filename = "gc.nim";
C_12614 = D_12603[(I_12613)-0];
F.line = 351;F.filename = "gc.nim";
if (!((NU64)(8) <= (NU64)((*C_12614).Refcount))) goto LA5;
F.line = 352;F.filename = "gc.nim";
(*C_12614).Refcount = (NI64)((*C_12614).Refcount & -8);
F.line = 353;F.filename = "gc.nim";
D_12603[(I_12613)-0] = Res_12524;
F.line = 354;F.filename = "gc.nim";
goto LA2;
LA5: ;
F.line = 1015;F.filename = "system.nim";
Res_20096 -= 1;
} LA3: ;
F.line = 355;F.filename = "gc.nim";
Add_10858(&Gch_11210.Zct, Res_12524);
LA2: ;
F.line = 358;F.filename = "gc.nim";
Unlock_11219(&Gch_11210);
F.line = 359;F.filename = "gc.nim";
Result_12509 = Celltousr_11232(Res_12524);
framePtr = framePtr->prev;
return Result_12509;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7408;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicInc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7408 = 0;
F.line = 29;F.filename = "systhread.nim";
Result_7408 = __sync_add_and_fetch(Memloc_3004, X_3005);
framePtr = framePtr->prev;
return Result_7408;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12018, void* Src_12019) {
TY10802* C_12020;
NI LOC4;
TY10802* C_12022;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRefNoCycle";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 244;F.filename = "gc.nim";
if (!!((Src_12019 == NIM_NIL))) goto LA2;
C_12020 = 0;
F.line = 245;F.filename = "gc.nim";
C_12020 = Usrtocell_11236(Src_12019);
F.line = 246;F.filename = "gc.nim";
LOC4 = Atomicinc_3001(&(*C_12020).Refcount, 8);
LA2: ;
F.line = 247;F.filename = "gc.nim";
if (!!(((*Dest_12018) == NIM_NIL))) goto LA6;
C_12022 = 0;
F.line = 248;F.filename = "gc.nim";
C_12022 = Usrtocell_11236((*Dest_12018));
F.line = 249;F.filename = "gc.nim";
LOC9 = Atomicdec_3006(&(*C_12022).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
F.line = 250;F.filename = "gc.nim";
Rtladdzct_11858(C_12022);
LA10: ;
LA6: ;
F.line = 251;F.filename = "gc.nim";
(*Dest_12018) = Src_12019;
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_17487) {
NimStringDesc* Result_17488;
NI S_17489;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawNewString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17488 = 0;
S_17489 = 0;
F.line = 38;F.filename = "sysstr.nim";
S_17489 = Space_17487;
F.line = 39;F.filename = "sysstr.nim";
if (!(S_17489 < 8)) goto LA2;
F.line = 39;F.filename = "sysstr.nim";
S_17489 = 7;
LA2: ;
F.line = 40;F.filename = "sysstr.nim";
LOC4 = newObj(&Strdesc_3017, (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)(S_17489 + 1) * 1)));
Result_17488 = ((NimStringDesc*) (LOC4));
F.line = 42;F.filename = "sysstr.nim";
(*Result_17488).Sup.space = S_17489;
framePtr = framePtr->prev;
return Result_17488;
}
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17508) {
NimStringDesc* Result_17509;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "copyString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17509 = 0;
F.line = 59;F.filename = "sysstr.nim";
if (!(Src_17508 == NIM_NIL)) goto LA2;
F.line = 59;F.filename = "sysstr.nim";
F.line = 59;F.filename = "sysstr.nim";
Result_17509 = NIM_NIL;
goto BeforeRet;
LA2: ;
F.line = 60;F.filename = "sysstr.nim";
Result_17509 = rawNewString((*Src_17508).Sup.space);
F.line = 61;F.filename = "sysstr.nim";
(*Result_17509).Sup.len = (*Src_17508).Sup.len;
F.line = 62;F.filename = "sysstr.nim";
memcpy(((NCSTRING) ((*Result_17509).data)), ((NCSTRING) ((*Src_17508).data)), ((int) ((NI64)((NI64)((*Src_17508).Sup.len + 1) * 1))));
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17509;
}
N_NIMCALL(void, Gcdisable_2663)(void) {
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_disable";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 656;F.filename = "gc.nim";
LOC1 = Atomicinc_3001(&Recgclock_11212, 1);
framePtr = framePtr->prev;
}
static N_INLINE(void, Incref_12002)(TY10802* C_12004) {
NI LOC1;
NIM_BOOL LOC3;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "incRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 226;F.filename = "gc.nim";
LOC1 = Atomicinc_3001(&(*C_12004).Refcount, 8);
F.line = 227;F.filename = "gc.nim";
LOC3 = Canbecycleroot_11240(C_12004);
if (!LOC3) goto LA4;
F.line = 228;F.filename = "gc.nim";
Rtladdcycleroot_11852(C_12004);
LA4: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, asgnRef)(void** Dest_12014, void* Src_12015) {
TY10802* LOC4;
TY10802* LOC8;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 235;F.filename = "gc.nim";
F.line = 237;F.filename = "gc.nim";
if (!!((Src_12015 == NIM_NIL))) goto LA2;
F.line = 237;F.filename = "gc.nim";
LOC4 = Usrtocell_11236(Src_12015);
Incref_12002(LOC4);
LA2: ;
F.line = 238;F.filename = "gc.nim";
if (!!(((*Dest_12014) == NIM_NIL))) goto LA6;
F.line = 238;F.filename = "gc.nim";
LOC8 = Usrtocell_11236((*Dest_12014));
Decref_11864(LOC8);
LA6: ;
F.line = 239;F.filename = "gc.nim";
(*Dest_12014) = Src_12015;
framePtr = framePtr->prev;
}
static N_INLINE(void, pushCurrentException)(E_Base* E_4641) {
asgnRef((void**) &(*E_4641).parent, Currexception_4632);
asgnRef((void**) &Currexception_4632, E_4641);
}
static N_INLINE(NI, Resize_17401)(NI Old_17403) {
NI Result_17404;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "resize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17404 = 0;
F.line = 21;F.filename = "sysstr.nim";
if (!(Old_17403 <= 0)) goto LA2;
F.line = 21;F.filename = "sysstr.nim";
F.line = 21;F.filename = "sysstr.nim";
Result_17404 = 4;
goto BeforeRet;
goto LA1;
LA2: ;
if (!(Old_17403 < 65536)) goto LA4;
F.line = 22;F.filename = "sysstr.nim";
F.line = 22;F.filename = "sysstr.nim";
Result_17404 = (NI64)(Old_17403 * 2);
goto BeforeRet;
goto LA1;
LA4: ;
F.line = 23;F.filename = "sysstr.nim";
F.line = 23;F.filename = "sysstr.nim";
Result_17404 = (NI64)((NI64)(Old_17403 * 3) / 2);
goto BeforeRet;
LA1: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17404;
}
N_NIMCALL(void*, Growobj_13007)(void* Old_13009, NI Newsize_13010) {
void* Result_13011;
TY10802* Ol_13013;
TY10802* Res_13038;
void* LOC1;
NI Elemsize_13039;
NI Oldsize_13049;
NI J_13054;
TY10802** D_13055;
NIM_BOOL LOC13;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "growObj";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_13011 = 0;
F.line = 368;F.filename = "gc.nim";
Lock_11213(&Gch_11210);
F.line = 369;F.filename = "gc.nim";
Checkcollection_12500();
Ol_13013 = 0;
F.line = 370;F.filename = "gc.nim";
Ol_13013 = Usrtocell_11236(Old_13009);
F.line = 371;F.filename = "gc.nim";
F.line = 372;F.filename = "gc.nim";
Res_13038 = 0;
F.line = 373;F.filename = "gc.nim";
LOC1 = Rawalloc_9795(&Allocator_8929, (NI64)(Newsize_13010 + ((NI)sizeof(TY10802))));
Res_13038 = ((TY10802*) (LOC1));
Elemsize_13039 = 0;
F.line = 374;F.filename = "gc.nim";
Elemsize_13039 = 1;
F.line = 375;F.filename = "gc.nim";
if (!!(((*(*Ol_13013).Typ).kind == ((NU8) 28)))) goto LA3;
F.line = 376;F.filename = "gc.nim";
Elemsize_13039 = (*(*(*Ol_13013).Typ).base).size;
LA3: ;
Oldsize_13049 = 0;
F.line = 378;F.filename = "gc.nim";
Oldsize_13049 = (NI64)((NI64)((*((TGenericSeq*) (Old_13009))).len * Elemsize_13039) + 16);
F.line = 379;F.filename = "gc.nim";
memcpy(((void*) (Res_13038)), ((void*) (Ol_13013)), (NI64)(Oldsize_13049 + ((NI)sizeof(TY10802))));
F.line = 380;F.filename = "gc.nim";
zeroMem(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Res_13038))) + (NU64)(Oldsize_13049))) + (NU64)(((NI)sizeof(TY10802)))))), (NI64)(Newsize_13010 - Oldsize_13049));
F.line = 382;F.filename = "gc.nim";
F.line = 383;F.filename = "gc.nim";
F.line = 388;F.filename = "gc.nim";
if (!((NI64)((*Ol_13013).Refcount & 7) == 4)) goto LA6;
J_13054 = 0;
F.line = 389;F.filename = "gc.nim";
J_13054 = (NI64)(Gch_11210.Zct.Len - 1);
D_13055 = 0;
F.line = 390;F.filename = "gc.nim";
D_13055 = Gch_11210.Zct.D;
F.line = 391;F.filename = "gc.nim";
while (1) {
if (!(0 <= J_13054)) goto LA8;
F.line = 392;F.filename = "gc.nim";
if (!(D_13055[(J_13054)-0] == Ol_13013)) goto LA10;
F.line = 393;F.filename = "gc.nim";
D_13055[(J_13054)-0] = Res_13038;
F.line = 394;F.filename = "gc.nim";
goto LA8;
LA10: ;
F.line = 395;F.filename = "gc.nim";
J_13054 -= 1;
} LA8: ;
LA6: ;
F.line = 396;F.filename = "gc.nim";
LOC13 = Canbecycleroot_11240(Ol_13013);
if (!LOC13) goto LA14;
F.line = 396;F.filename = "gc.nim";
Excl_11081(&Gch_11210.Cycleroots, Ol_13013);
LA14: ;
F.line = 402;F.filename = "gc.nim";
Rawdealloc_10064(&Allocator_8929, ((void*) (Ol_13013)));
F.line = 406;F.filename = "gc.nim";
Unlock_11219(&Gch_11210);
F.line = 407;F.filename = "gc.nim";
Result_13011 = Celltousr_11232(Res_13038);
framePtr = framePtr->prev;
return Result_13011;
}
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_17582, NI Addlen_17583) {
NimStringDesc* Result_17584;
NI Sp_17589;
NI LOC4;
void* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "resizeString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17584 = 0;
F.line = 138;F.filename = "sysstr.nim";
if (!((NI64)((NI64)((*Dest_17582).Sup.len + Addlen_17583) + 1) <= (*Dest_17582).Sup.space)) goto LA2;
F.line = 139;F.filename = "sysstr.nim";
Result_17584 = Dest_17582;
goto LA1;
LA2: ;
Sp_17589 = 0;
F.line = 141;F.filename = "sysstr.nim";
LOC4 = Resize_17401((*Dest_17582).Sup.space);
Sp_17589 = ((LOC4 >= (NI64)((NI64)((*Dest_17582).Sup.len + Addlen_17583) + 1)) ? LOC4 : (NI64)((NI64)((*Dest_17582).Sup.len + Addlen_17583) + 1));
F.line = 142;F.filename = "sysstr.nim";
LOC5 = Growobj_13007(((void*) (Dest_17582)), (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)(Sp_17589 + 1) * 1)));
Result_17584 = ((NimStringDesc*) (LOC5));
F.line = 144;F.filename = "sysstr.nim";
(*Result_17584).Sup.space = Sp_17589;
LA1: ;
framePtr = framePtr->prev;
return Result_17584;
}
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17625, NI Newlen_17626) {
NimStringDesc* Result_17627;
NI N_17630;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "setLengthStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17627 = 0;
N_17630 = 0;
F.line = 159;F.filename = "sysstr.nim";
N_17630 = ((Newlen_17626 >= 0) ? Newlen_17626 : 0);
F.line = 160;F.filename = "sysstr.nim";
if (!(N_17630 <= (*S_17625).Sup.space)) goto LA2;
F.line = 161;F.filename = "sysstr.nim";
Result_17627 = S_17625;
goto LA1;
LA2: ;
F.line = 163;F.filename = "sysstr.nim";
Result_17627 = resizeString(S_17625, N_17630);
LA1: ;
F.line = 164;F.filename = "sysstr.nim";
(*Result_17627).Sup.len = N_17630;
F.line = 165;F.filename = "sysstr.nim";
(*Result_17627).data[(N_17630)-0] = 0;
framePtr = framePtr->prev;
return Result_17627;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_17592, NimStringDesc* Src_17593) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 150;F.filename = "sysstr.nim";
memcpy(((NCSTRING) (&(*Dest_17592).data[((*Dest_17592).Sup.len)-0])), ((NCSTRING) ((*Src_17593).data)), ((int) ((NI64)((NI64)((*Src_17593).Sup.len + 1) * 1))));
F.line = 151;F.filename = "sysstr.nim";
(*Dest_17592).Sup.len += (*Src_17593).Sup.len;
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_18203) {
NimStringDesc* Result_18204;
NI I_18205;
NI Y_18206;
NI D_18207;
NI J_18248;
NI HEX3Atmp_20212;
NI Res_20214;
NIM_CHAR LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimIntToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18204 = 0;
F.line = 228;F.filename = "sysstr.nim";
Result_18204 = mnewString(32);
I_18205 = 0;
F.line = 229;F.filename = "sysstr.nim";
I_18205 = 0;
Y_18206 = 0;
F.line = 230;F.filename = "sysstr.nim";
Y_18206 = X_18203;
F.line = 231;F.filename = "sysstr.nim";
while (1) {
D_18207 = 0;
F.line = 232;F.filename = "sysstr.nim";
D_18207 = (NI64)(Y_18206 / 10);
F.line = 233;F.filename = "sysstr.nim";
Result_18204->data[I_18205] = ((NIM_CHAR) (((NI) ((NI64)((NI64)abs(((NI) ((NI64)(Y_18206 - (NI64)(D_18207 * 10))))) + 48)))));
F.line = 234;F.filename = "sysstr.nim";
I_18205 += 1;
F.line = 235;F.filename = "sysstr.nim";
Y_18206 = D_18207;
F.line = 236;F.filename = "sysstr.nim";
if (!(Y_18206 == 0)) goto LA3;
F.line = 236;F.filename = "sysstr.nim";
goto LA1;
LA3: ;
} LA1: ;
F.line = 237;F.filename = "sysstr.nim";
if (!(X_18203 < 0)) goto LA6;
F.line = 238;F.filename = "sysstr.nim";
Result_18204->data[I_18205] = 45;
F.line = 239;F.filename = "sysstr.nim";
I_18205 += 1;
LA6: ;
F.line = 240;F.filename = "sysstr.nim";
Result_18204 = setLengthStr(Result_18204, I_18205);
J_18248 = 0;
HEX3Atmp_20212 = 0;
F.line = 242;F.filename = "sysstr.nim";
HEX3Atmp_20212 = (NI64)((NI64)(I_18205 / 2) - 1);
Res_20214 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20214 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20214 <= HEX3Atmp_20212)) goto LA8;
F.line = 1021;F.filename = "system.nim";
J_18248 = Res_20214;
F.line = 243;F.filename = "sysstr.nim";
LOC9 = Result_18204->data[J_18248];
Result_18204->data[J_18248] = Result_18204->data[(NI64)((NI64)(I_18205 - J_18248) - 1)];
Result_18204->data[(NI64)((NI64)(I_18205 - J_18248) - 1)] = LOC9;
F.line = 1024;F.filename = "system.nim";
Res_20214 += 1;
} LA8: ;
framePtr = framePtr->prev;
return Result_18204;
}
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604) {
NimStringDesc* Result_17565;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "addChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17565 = 0;
F.line = 93;F.filename = "sysstr.nim";
Result_17565 = S_1603;
F.line = 94;F.filename = "sysstr.nim";
if (!((*Result_17565).Sup.space <= (*Result_17565).Sup.len)) goto LA2;
F.line = 95;F.filename = "sysstr.nim";
(*Result_17565).Sup.space = Resize_17401((*Result_17565).Sup.space);
F.line = 96;F.filename = "sysstr.nim";
LOC4 = Growobj_13007(((void*) (Result_17565)), (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)((*Result_17565).Sup.space + 1) * 1)));
Result_17565 = ((NimStringDesc*) (LOC4));
LA2: ;
F.line = 102;F.filename = "sysstr.nim";
(*Result_17565).data[((*Result_17565).Sup.len)-0] = C_1604;
F.line = 103;F.filename = "sysstr.nim";
(*Result_17565).data[((NI64)((*Result_17565).Sup.len + 1))-0] = 0;
F.line = 104;F.filename = "sysstr.nim";
(*Result_17565).Sup.len += 1;
framePtr = framePtr->prev;
return Result_17565;
}
N_NIMCALL(void, Auxwritestacktrace_4660)(TFrame* F_4662, NimStringDesc** S_4664) {
TFrame* It_4666;
NI I_4667;
NI Total_4668;
NIM_BOOL LOC2;
TFrame* B_4706;
NI J_4737;
NI HEX3Atmp_20021;
NI Res_20023;
NIM_BOOL LOC13;
NI J_4810;
NI HEX3Atmp_20034;
NI Res_20036;
NimStringDesc* LOC19;
NI Oldlen_4826;
NimStringDesc* LOC23;
NI K_4842;
NI HEX3Atmp_20028;
NI Res_20030;
It_4666 = 0;
It_4666 = F_4662;
I_4667 = 0;
I_4667 = 0;
Total_4668 = 0;
Total_4668 = 0;
while (1) {
LOC2 = !((It_4666 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = (I_4667 <= 96);
LA3: ;
if (!LOC2) goto LA1;
Tempframes_4658[(I_4667)-0] = It_4666;
I_4667 += 1;
Total_4668 += 1;
It_4666 = (*It_4666).prev;
} LA1: ;
B_4706 = 0;
B_4706 = It_4666;
while (1) {
if (!!((It_4666 == NIM_NIL))) goto LA4;
Total_4668 += 1;
It_4666 = (*It_4666).prev;
} LA4: ;
J_4737 = 0;
HEX3Atmp_20021 = 0;
HEX3Atmp_20021 = (NI64)((NI64)(Total_4668 - I_4667) - 31);
Res_20023 = 0;
Res_20023 = 1;
while (1) {
if (!(Res_20023 <= HEX3Atmp_20021)) goto LA5;
J_4737 = Res_20023;
if (!!((B_4706 == NIM_NIL))) goto LA7;
B_4706 = (*B_4706).prev;
LA7: ;
Res_20023 += 1;
} LA5: ;
if (!!((Total_4668 == I_4667))) goto LA10;
Tempframes_4658[(I_4667)-0] = NIM_NIL;
I_4667 += 1;
LA10: ;
while (1) {
LOC13 = !((B_4706 == NIM_NIL));
if (!(LOC13)) goto LA14;
LOC13 = (I_4667 <= 127);
LA14: ;
if (!LOC13) goto LA12;
Tempframes_4658[(I_4667)-0] = B_4706;
I_4667 += 1;
B_4706 = (*B_4706).prev;
} LA12: ;
J_4810 = 0;
HEX3Atmp_20034 = 0;
HEX3Atmp_20034 = (NI64)(I_4667 - 1);
Res_20036 = 0;
Res_20036 = HEX3Atmp_20034;
while (1) {
if (!(0 <= Res_20036)) goto LA15;
J_4810 = Res_20036;
if (!(Tempframes_4658[(J_4810)-0] == NIM_NIL)) goto LA17;
(*S_4664) = resizeString((*S_4664), 1);
appendString((*S_4664), ((NimStringDesc*) &TMP20311));
LOC19 = 0;
LOC19 = nimIntToStr((NI64)((NI64)(Total_4668 - I_4667) - 1));
(*S_4664) = resizeString((*S_4664), LOC19->Sup.len + 0);
appendString((*S_4664), LOC19);
(*S_4664) = resizeString((*S_4664), 19);
appendString((*S_4664), ((NimStringDesc*) &TMP20312));
goto LA16;
LA17: ;
Oldlen_4826 = 0;
Oldlen_4826 = (*S_4664)->Sup.len;
Add_2722(S_4664, (*Tempframes_4658[(J_4810)-0]).filename);
if (!(0 < (*Tempframes_4658[(J_4810)-0]).line)) goto LA21;
(*S_4664) = addChar((*S_4664), 40);
LOC23 = 0;
LOC23 = nimIntToStr((*Tempframes_4658[(J_4810)-0]).line);
(*S_4664) = resizeString((*S_4664), LOC23->Sup.len + 0);
appendString((*S_4664), LOC23);
(*S_4664) = addChar((*S_4664), 41);
LA21: ;
K_4842 = 0;
HEX3Atmp_20028 = 0;
HEX3Atmp_20028 = ((1 >= (NI64)(25 - (NI64)((*S_4664)->Sup.len - Oldlen_4826))) ? 1 : (NI64)(25 - (NI64)((*S_4664)->Sup.len - Oldlen_4826)));
Res_20030 = 0;
Res_20030 = 1;
while (1) {
if (!(Res_20030 <= HEX3Atmp_20028)) goto LA24;
K_4842 = Res_20030;
(*S_4664) = addChar((*S_4664), 32);
Res_20030 += 1;
} LA24: ;
Add_2722(S_4664, (*Tempframes_4658[(J_4810)-0]).procname);
LA16: ;
(*S_4664) = resizeString((*S_4664), Stacktracenewline_4659->Sup.len + 0);
appendString((*S_4664), Stacktracenewline_4659);
Res_20036 -= 1;
} LA15: ;
}
N_NIMCALL(void, Rawwritestacktrace_4843)(NimStringDesc** S_4846) {
if (!(framePtr == NIM_NIL)) goto LA2;
(*S_4846) = resizeString((*S_4846), 28);
appendString((*S_4846), ((NimStringDesc*) &TMP20309));
(*S_4846) = resizeString((*S_4846), Stacktracenewline_4659->Sup.len + 0);
appendString((*S_4846), Stacktracenewline_4659);
goto LA1;
LA2: ;
(*S_4846) = resizeString((*S_4846), 33);
appendString((*S_4846), ((NimStringDesc*) &TMP20310));
(*S_4846) = resizeString((*S_4846), Stacktracenewline_4659->Sup.len + 0);
appendString((*S_4846), Stacktracenewline_4659);
Auxwritestacktrace_4660(framePtr, S_4846);
LA1: ;
}
N_NIMCALL(NimStringDesc*, toNimStr)(NCSTRING Str_17499, NI Len_17500) {
NimStringDesc* Result_17501;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "toNimStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17501 = 0;
F.line = 50;F.filename = "sysstr.nim";
Result_17501 = rawNewString(Len_17500);
F.line = 51;F.filename = "sysstr.nim";
(*Result_17501).Sup.len = Len_17500;
F.line = 52;F.filename = "sysstr.nim";
memcpy(((NCSTRING) ((*Result_17501).data)), Str_17499, ((int) ((NI64)((NI64)(Len_17500 + 1) * 1))));
F.line = 53;F.filename = "sysstr.nim";
(*Result_17501).data[(Len_17500)-0] = 0;
framePtr = framePtr->prev;
return Result_17501;
}
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING Str_17504) {
NimStringDesc* Result_17505;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "cstrToNimstr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17505 = 0;
F.line = 56;F.filename = "sysstr.nim";
F.line = 56;F.filename = "sysstr.nim";
LOC1 = strlen(Str_17504);
Result_17505 = toNimStr(Str_17504, LOC1);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17505;
}
N_NIMCALL(void, Write_3670)(FILE* F_3672, NCSTRING C_3673) {
fputs(C_3673, F_3672);
}
N_NIMCALL(void, Writetostderr_4432)(NCSTRING Msg_4434) {
Write_3670(stdout, Msg_4434);
}
static N_INLINE(void, Quitordebug_5001)(void) {
exit(1);
}
N_NIMCALL(void, Gcenable_2665)(void) {
NI LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_enable";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 658;F.filename = "gc.nim";
if (!(0 < Recgclock_11212)) goto LA2;
F.line = 658;F.filename = "gc.nim";
LOC4 = Atomicdec_3006(&Recgclock_11212, 1);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, raiseException)(E_Base* E_5204, NCSTRING Ename_5205) {
NIM_BOOL LOC8;
NimStringDesc* LOC12;
Gcdisable_2663();
(*E_5204).name = Ename_5205;
if (!!((excHandler == NIM_NIL))) goto LA2;
pushCurrentException(E_5204);
longjmp((*excHandler).context, ((NI32) 1));
goto LA1;
LA2: ;
if (!!(Buf_4653 == 0)) goto LA5;
Buf_4653 = setLengthStr(Buf_4653, 0);
Rawwritestacktrace_4843(&Buf_4653);
LOC8 = !(((*E_5204).message == NIM_NIL));
if (!(LOC8)) goto LA9;
LOC8 = !(((NU8)((*E_5204).message->data[0]) == (NU8)(0)));
LA9: ;
if (!LOC8) goto LA10;
Buf_4653 = resizeString(Buf_4653, 28);
appendString(Buf_4653, ((NimStringDesc*) &TMP20313));
Buf_4653 = resizeString(Buf_4653, (*E_5204).message->Sup.len + 0);
appendString(Buf_4653, (*E_5204).message);
goto LA7;
LA10: ;
Buf_4653 = resizeString(Buf_4653, 26);
appendString(Buf_4653, ((NimStringDesc*) &TMP20314));
LA7: ;
Buf_4653 = resizeString(Buf_4653, 2);
appendString(Buf_4653, ((NimStringDesc*) &TMP20315));
LOC12 = 0;
LOC12 = cstrToNimstr(Ename_5205);
Buf_4653 = resizeString(Buf_4653, LOC12->Sup.len + 0);
appendString(Buf_4653, LOC12);
Buf_4653 = resizeString(Buf_4653, 2);
appendString(Buf_4653, ((NimStringDesc*) &TMP20316));
Writetostderr_4432(Buf_4653->data);
goto LA4;
LA5: ;
Writetostderr_4432(Ename_5205);
LA4: ;
Quitordebug_5001();
LA1: ;
Gcenable_2665();
}
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661) {
NI LOC2;
TY420* E_4263;
LOC2 = Writebuffer_3733(F_3660, ((void*) (S_3661->data)), S_3661->Sup.len);
if (!!((LOC2 == S_3661->Sup.len))) goto LA3;
E_4263 = 0;
E_4263 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4263).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4263).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20308)));
raiseException((E_Base*)E_4263, "EIO");
LA3: ;
}
static N_INLINE(void, rawEcho)(NimStringDesc* X_4094) {
Write_3658(stdout, X_4094);
}
static N_INLINE(void, rawEchoNL)(void) {
Write_3658(stdout, ((NimStringDesc*) &TMP20317));
}
N_NIMCALL(void, Quit_2822)(NimStringDesc* Errormsg_2824) {
rawEcho(Errormsg_2824);
rawEchoNL();
exit(1);
}
N_NIMCALL(void, Raiseoutofmem_8259)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "raiseOutOfMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/mmdisp.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 59;F.filename = "mmdisp.nim";
if (!(Goutofmem_8258 == NIM_NIL)) goto LA2;
F.line = 59;F.filename = "mmdisp.nim";
Quit_2822(((NimStringDesc*) &TMP20318));
LA2: ;
F.line = 60;F.filename = "mmdisp.nim";
asgnRefNoCycle((void**) &(*Goutofmem_8258).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20319)));
F.line = 61;F.filename = "mmdisp.nim";
raiseException((E_Base*)Goutofmem_8258, "EOutOfMemory");
framePtr = framePtr->prev;
}
static N_INLINE(void*, Osallocpages_8413)(NI Size_8415) {
void* Result_8416;
NIM_BOOL LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "osAllocPages";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8416 = 0;
F.line = 38;F.filename = "alloc.nim";
Result_8416 = mmap(NIM_NIL, Size_8415, ((NI32) 3), ((NI32) 4098), ((NI32) -1), 0);
F.line = 40;F.filename = "alloc.nim";
LOC2 = (Result_8416 == NIM_NIL);
if (LOC2) goto LA3;
LOC2 = (Result_8416 == ((void*) -1));
LA3: ;
if (!LOC2) goto LA4;
F.line = 41;F.filename = "alloc.nim";
Raiseoutofmem_8259();
LA4: ;
framePtr = framePtr->prev;
return Result_8416;
}
static N_INLINE(void, Inccurrmem_8886)(TY8874* A_8889, NI Bytes_8890) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "incCurrMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 159;F.filename = "alloc.nim";
(*A_8889).Currmem += Bytes_8890;
framePtr = framePtr->prev;
}
N_NIMCALL(void*, Llalloc_8930)(TY8874* A_8933, NI Size_8934) {
void* Result_8935;
NIM_BOOL LOC2;
NI Request_8949;
void* LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "llAlloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8935 = 0;
F.line = 177;F.filename = "alloc.nim";
LOC2 = ((*A_8933).Llmem == NIM_NIL);
if (LOC2) goto LA3;
LOC2 = ((*(*A_8933).Llmem).Size < Size_8934);
LA3: ;
if (!LOC2) goto LA4;
Request_8949 = 0;
F.line = 178;F.filename = "alloc.nim";
Request_8949 = Roundup_8856((NI64)(Size_8934 + ((NI)sizeof(TY8872))), 4096);
F.line = 179;F.filename = "alloc.nim";
LOC6 = Osallocpages_8413(Request_8949);
(*A_8933).Llmem = ((TY8872*) (LOC6));
F.line = 180;F.filename = "alloc.nim";
Inccurrmem_8886(A_8933, Request_8949);
F.line = 181;F.filename = "alloc.nim";
(*(*A_8933).Llmem).Size = (NI64)(Request_8949 - ((NI)sizeof(TY8872)));
F.line = 182;F.filename = "alloc.nim";
(*(*A_8933).Llmem).Acc = ((NI)sizeof(TY8872));
LA4: ;
F.line = 183;F.filename = "alloc.nim";
Result_8935 = ((void*) ((NI64)(((NI) ((*A_8933).Llmem)) + (*(*A_8933).Llmem).Acc)));
F.line = 184;F.filename = "alloc.nim";
(*(*A_8933).Llmem).Size -= Size_8934;
F.line = 185;F.filename = "alloc.nim";
(*(*A_8933).Llmem).Acc += Size_8934;
F.line = 186;F.filename = "alloc.nim";
zeroMem(Result_8935, Size_8934);
framePtr = framePtr->prev;
return Result_8935;
}
N_NIMCALL(TY8807*, Intsetput_8993)(TY8811* T_8996, NI Key_8997) {
TY8807* Result_8998;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "IntSetPut";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8998 = 0;
F.line = 196;F.filename = "alloc.nim";
Result_8998 = Intsetget_8974(&(*T_8996), Key_8997);
F.line = 197;F.filename = "alloc.nim";
if (!(Result_8998 == NIM_NIL)) goto LA2;
F.line = 198;F.filename = "alloc.nim";
LOC4 = Llalloc_8930(&Allocator_8929, ((NI)sizeof(TY8807)));
Result_8998 = ((TY8807*) (LOC4));
F.line = 199;F.filename = "alloc.nim";
(*Result_8998).Next = (*T_8996).Data[((NI64)(Key_8997 & 1023))-0];
F.line = 200;F.filename = "alloc.nim";
(*T_8996).Data[((NI64)(Key_8997 & 1023))-0] = Result_8998;
F.line = 201;F.filename = "alloc.nim";
(*Result_8998).Key = Key_8997;
LA2: ;
framePtr = framePtr->prev;
return Result_8998;
}
N_NIMCALL(void, Incl_9031)(TY8811* S_9034, NI Key_9035) {
TY8807* T_9036;
NI U_9037;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Incl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
T_9036 = 0;
F.line = 212;F.filename = "alloc.nim";
T_9036 = Intsetput_8993(S_9034, (NI64)((NU64)(Key_9035) >> (NU64)(9)));
U_9037 = 0;
F.line = 213;F.filename = "alloc.nim";
U_9037 = (NI64)(Key_9035 & 511);
F.line = 214;F.filename = "alloc.nim";
(*T_9036).Bits[((NI64)((NU64)(U_9037) >> (NU64)(6)))-0] = (NI64)((*T_9036).Bits[((NI64)((NU64)(U_9037) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_9037 & 63))));
framePtr = framePtr->prev;
}
N_NIMCALL(void, Splitchunk_9666)(TY8874* A_9669, TY8834* C_9670, NI Size_9671) {
TY8834* Rest_9672;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "splitChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Rest_9672 = 0;
F.line = 378;F.filename = "alloc.nim";
Rest_9672 = ((TY8834*) ((NI64)((NU64)(((NI) (C_9670))) + (NU64)(Size_9671))));
F.line = 379;F.filename = "alloc.nim";
F.line = 383;F.filename = "alloc.nim";
(*Rest_9672).Sup.Size = (NI64)((*C_9670).Sup.Size - Size_9671);
F.line = 384;F.filename = "alloc.nim";
(*Rest_9672).Sup.Used = NIM_FALSE;
F.line = 385;F.filename = "alloc.nim";
(*Rest_9672).Next = NIM_NIL;
F.line = 386;F.filename = "alloc.nim";
(*Rest_9672).Prev = NIM_NIL;
F.line = 387;F.filename = "alloc.nim";
(*Rest_9672).Sup.Prevsize = Size_9671;
F.line = 388;F.filename = "alloc.nim";
Updateprevsize_9211(A_9669, C_9670, (*Rest_9672).Sup.Size);
F.line = 389;F.filename = "alloc.nim";
(*C_9670).Sup.Size = Size_9671;
F.line = 390;F.filename = "alloc.nim";
LOC1 = Pageindex_9077(&Rest_9672->Sup);
Incl_9031(&(*A_9669).Chunkstarts, LOC1);
F.line = 391;F.filename = "alloc.nim";
Listadd_9607(&(*A_9669).Freechunkslist, Rest_9672);
framePtr = framePtr->prev;
}
N_NIMCALL(TY8834*, Requestoschunks_9092)(TY8874* A_9095, NI Size_9096) {
TY8834* Result_9097;
void* LOC1;
NI Nxt_9112;
TY8830* Next_9115;
NI LOC3;
NIM_BOOL LOC4;
NI Prv_9118;
TY8830* Prev_9121;
NIM_BOOL LOC8;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "requestOsChunks";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9097 = 0;
F.line = 249;F.filename = "alloc.nim";
Inccurrmem_8886(A_9095, Size_9096);
F.line = 250;F.filename = "alloc.nim";
(*A_9095).Freemem += Size_9096;
F.line = 251;F.filename = "alloc.nim";
LOC1 = Osallocpages_8413(Size_9096);
Result_9097 = ((TY8834*) (LOC1));
F.line = 252;F.filename = "alloc.nim";
F.line = 254;F.filename = "alloc.nim";
(*Result_9097).Next = NIM_NIL;
F.line = 255;F.filename = "alloc.nim";
(*Result_9097).Prev = NIM_NIL;
F.line = 256;F.filename = "alloc.nim";
(*Result_9097).Sup.Used = NIM_FALSE;
F.line = 257;F.filename = "alloc.nim";
(*Result_9097).Sup.Size = Size_9096;
Nxt_9112 = 0;
F.line = 259;F.filename = "alloc.nim";
Nxt_9112 = (NI64)((NU64)(((NI) (Result_9097))) + (NU64)(Size_9096));
F.line = 260;F.filename = "alloc.nim";
Next_9115 = 0;
F.line = 261;F.filename = "alloc.nim";
Next_9115 = ((TY8830*) (Nxt_9112));
F.line = 262;F.filename = "alloc.nim";
LOC3 = Pageindex_9077(Next_9115);
LOC4 = Contains_9011(&(*A_9095).Chunkstarts, LOC3);
if (!LOC4) goto LA5;
F.line = 264;F.filename = "alloc.nim";
(*Next_9115).Prevsize = Size_9096;
LA5: ;
Prv_9118 = 0;
F.line = 266;F.filename = "alloc.nim";
Prv_9118 = (NI64)((NU64)(((NI) (Result_9097))) - (NU64)(Lastsize_9091));
F.line = 267;F.filename = "alloc.nim";
Prev_9121 = 0;
F.line = 268;F.filename = "alloc.nim";
Prev_9121 = ((TY8830*) (Prv_9118));
F.line = 269;F.filename = "alloc.nim";
LOC9 = Pageindex_9077(Prev_9121);
LOC8 = Contains_9011(&(*A_9095).Chunkstarts, LOC9);
if (!(LOC8)) goto LA10;
LOC8 = ((*Prev_9121).Size == Lastsize_9091);
LA10: ;
if (!LOC8) goto LA11;
F.line = 271;F.filename = "alloc.nim";
(*Result_9097).Sup.Prevsize = Lastsize_9091;
goto LA7;
LA11: ;
F.line = 273;F.filename = "alloc.nim";
(*Result_9097).Sup.Prevsize = 0;
LA7: ;
F.line = 274;F.filename = "alloc.nim";
Lastsize_9091 = Size_9096;
framePtr = framePtr->prev;
return Result_9097;
}
N_NIMCALL(TY8834*, Getbigchunk_9692)(TY8874* A_9695, NI Size_9696) {
TY8834* Result_9697;
NI LOC11;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getBigChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9697 = 0;
F.line = 395;F.filename = "alloc.nim";
F.line = 396;F.filename = "alloc.nim";
F.line = 397;F.filename = "alloc.nim";
Result_9697 = (*A_9695).Freechunkslist;
F.line = 399;F.filename = "alloc.nim";
while (1) {
if (!!((Result_9697 == NIM_NIL))) goto LA2;
F.line = 402;F.filename = "alloc.nim";
F.line = 403;F.filename = "alloc.nim";
if (!((*Result_9697).Sup.Size == Size_9696)) goto LA4;
F.line = 404;F.filename = "alloc.nim";
Listremove_9246(&(*A_9695).Freechunkslist, Result_9697);
F.line = 405;F.filename = "alloc.nim";
goto LA1;
goto LA3;
LA4: ;
if (!(Size_9696 < (*Result_9697).Sup.Size)) goto LA6;
F.line = 408;F.filename = "alloc.nim";
Listremove_9246(&(*A_9695).Freechunkslist, Result_9697);
F.line = 409;F.filename = "alloc.nim";
Splitchunk_9666(A_9695, Result_9697, Size_9696);
F.line = 410;F.filename = "alloc.nim";
goto LA1;
goto LA3;
LA6: ;
LA3: ;
F.line = 411;F.filename = "alloc.nim";
Result_9697 = (*Result_9697).Next;
F.line = 412;F.filename = "alloc.nim";
} LA2: ;
F.line = 413;F.filename = "alloc.nim";
if (!(Size_9696 < 524288)) goto LA9;
F.line = 414;F.filename = "alloc.nim";
Result_9697 = Requestoschunks_9092(A_9695, 524288);
F.line = 415;F.filename = "alloc.nim";
Splitchunk_9666(A_9695, Result_9697, Size_9696);
goto LA8;
LA9: ;
F.line = 417;F.filename = "alloc.nim";
Result_9697 = Requestoschunks_9092(A_9695, Size_9696);
LA8: ;
LA1: ;
F.line = 418;F.filename = "alloc.nim";
(*Result_9697).Sup.Prevsize = 0;
F.line = 419;F.filename = "alloc.nim";
(*Result_9697).Sup.Used = NIM_TRUE;
F.line = 420;F.filename = "alloc.nim";
LOC11 = Pageindex_9077(&Result_9697->Sup);
Incl_9031(&(*A_9695).Chunkstarts, LOC11);
F.line = 421;F.filename = "alloc.nim";
(*A_9695).Freemem -= Size_9696;
framePtr = framePtr->prev;
return Result_9697;
}
N_NIMCALL(TY8832*, Getsmallchunk_9762)(TY8874* A_9765) {
TY8832* Result_9766;
TY8834* Res_9767;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getSmallChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9766 = 0;
Res_9767 = 0;
F.line = 424;F.filename = "alloc.nim";
Res_9767 = Getbigchunk_9692(A_9765, 4096);
F.line = 425;F.filename = "alloc.nim";
F.line = 426;F.filename = "alloc.nim";
F.line = 427;F.filename = "alloc.nim";
Result_9766 = ((TY8832*) (Res_9767));
framePtr = framePtr->prev;
return Result_9766;
}
N_NIMCALL(void*, Rawalloc_9795)(TY8874* A_9798, NI Requestedsize_9799) {
void* Result_9800;
NI Size_9805;
NI S_9808;
TY8832* C_9809;
TY8834* C_10036;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawAlloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9800 = 0;
F.line = 436;F.filename = "alloc.nim";
F.line = 437;F.filename = "alloc.nim";
Size_9805 = 0;
F.line = 438;F.filename = "alloc.nim";
Size_9805 = Roundup_8856(Requestedsize_9799, 8);
F.line = 440;F.filename = "alloc.nim";
if (!(Size_9805 <= (NI64)(4096 - (NI64)(((NI)sizeof(TY8832)) - 8)))) goto LA2;
S_9808 = 0;
F.line = 442;F.filename = "alloc.nim";
S_9808 = (NI64)(Size_9805 / 8);
C_9809 = 0;
F.line = 443;F.filename = "alloc.nim";
C_9809 = (*A_9798).Freesmallchunks[(S_9808)-0];
F.line = 444;F.filename = "alloc.nim";
if (!(C_9809 == NIM_NIL)) goto LA5;
F.line = 445;F.filename = "alloc.nim";
C_9809 = Getsmallchunk_9762(A_9798);
F.line = 446;F.filename = "alloc.nim";
(*C_9809).Freelist = NIM_NIL;
F.line = 447;F.filename = "alloc.nim";
F.line = 448;F.filename = "alloc.nim";
(*C_9809).Sup.Size = Size_9805;
F.line = 449;F.filename = "alloc.nim";
(*C_9809).Acc = Size_9805;
F.line = 450;F.filename = "alloc.nim";
(*C_9809).Free = (NI64)((NI64)(4096 - (NI64)(((NI)sizeof(TY8832)) - 8)) - Size_9805);
F.line = 451;F.filename = "alloc.nim";
(*C_9809).Next = NIM_NIL;
F.line = 452;F.filename = "alloc.nim";
(*C_9809).Prev = NIM_NIL;
F.line = 453;F.filename = "alloc.nim";
Listadd_9826(&(*A_9798).Freesmallchunks[(S_9808)-0], C_9809);
F.line = 454;F.filename = "alloc.nim";
Result_9800 = ((void*) (&(*C_9809).Data));
F.line = 455;F.filename = "alloc.nim";
goto LA4;
LA5: ;
F.line = 457;F.filename = "alloc.nim";
F.line = 460;F.filename = "alloc.nim";
F.line = 461;F.filename = "alloc.nim";
if (!((*C_9809).Freelist == NIM_NIL)) goto LA8;
F.line = 462;F.filename = "alloc.nim";
F.line = 463;F.filename = "alloc.nim";
Result_9800 = ((void*) ((NI64)((NU64)(((NI) (&(*C_9809).Data))) + (NU64)((*C_9809).Acc))));
F.line = 464;F.filename = "alloc.nim";
(*C_9809).Acc += Size_9805;
goto LA7;
LA8: ;
F.line = 466;F.filename = "alloc.nim";
Result_9800 = ((void*) ((*C_9809).Freelist));
F.line = 467;F.filename = "alloc.nim";
F.line = 468;F.filename = "alloc.nim";
(*C_9809).Freelist = (*(*C_9809).Freelist).Next;
LA7: ;
F.line = 469;F.filename = "alloc.nim";
(*C_9809).Free -= Size_9805;
F.line = 470;F.filename = "alloc.nim";
LA4: ;
F.line = 471;F.filename = "alloc.nim";
if (!((*C_9809).Free < Size_9805)) goto LA11;
F.line = 472;F.filename = "alloc.nim";
Listremove_9968(&(*A_9798).Freesmallchunks[(S_9808)-0], C_9809);
LA11: ;
goto LA1;
LA2: ;
F.line = 474;F.filename = "alloc.nim";
Size_9805 = Roundup_8856((NI64)(Requestedsize_9799 + (NI64)(((NI)sizeof(TY8834)) - 8)), 4096);
C_10036 = 0;
F.line = 476;F.filename = "alloc.nim";
C_10036 = Getbigchunk_9692(A_9798, Size_9805);
F.line = 477;F.filename = "alloc.nim";
F.line = 478;F.filename = "alloc.nim";
F.line = 479;F.filename = "alloc.nim";
F.line = 480;F.filename = "alloc.nim";
Result_9800 = ((void*) (&(*C_10036).Data));
F.line = 481;F.filename = "alloc.nim";
LA1: ;
F.line = 482;F.filename = "alloc.nim";
framePtr = framePtr->prev;
return Result_9800;
}
N_NOCONV(void*, Alloc_1950)(NI Size_1952) {
void* Result_10418;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "alloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10418 = 0;
F.line = 536;F.filename = "alloc.nim";
Result_10418 = Rawalloc_9795(&Allocator_8929, (NI64)(Size_1952 + ((NI)sizeof(TY8822))));
F.line = 537;F.filename = "alloc.nim";
(*((TY8822*) (Result_10418))).Zerofield = 1;
F.line = 538;F.filename = "alloc.nim";
F.line = 539;F.filename = "alloc.nim";
Result_10418 = ((void*) ((NI64)((NU64)(((NI) (Result_10418))) + (NU64)(((NI)sizeof(TY8822))))));
framePtr = framePtr->prev;
return Result_10418;
}
N_NOCONV(void*, Alloc0_1953)(NI Size_1955) {
void* Result_10424;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "alloc0";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10424 = 0;
F.line = 542;F.filename = "alloc.nim";
Result_10424 = Alloc_1950(Size_1955);
F.line = 543;F.filename = "alloc.nim";
zeroMem(Result_10424, Size_1955);
framePtr = framePtr->prev;
return Result_10424;
}
N_NIMCALL(void, Init_10878)(TY10818* S_10881, NI Cap_10882) {
void* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "init";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 59;F.filename = "cellsets.nim";
(*S_10881).Len = 0;
F.line = 60;F.filename = "cellsets.nim";
(*S_10881).Cap = Cap_10882;
F.line = 61;F.filename = "cellsets.nim";
LOC1 = Alloc0_1953((NI64)(Cap_10882 * 8));
(*S_10881).D = ((TY10802**) (LOC1));
framePtr = framePtr->prev;
}
N_NIMCALL(void, Initgc_3011)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "initGC";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 266;F.filename = "gc.nim";
Gch_11210.Stat.Stackscans = 0;
F.line = 267;F.filename = "gc.nim";
Gch_11210.Stat.Cyclecollections = 0;
F.line = 268;F.filename = "gc.nim";
Gch_11210.Stat.Maxthreshold = 0;
F.line = 269;F.filename = "gc.nim";
Gch_11210.Stat.Maxstacksize = 0;
F.line = 270;F.filename = "gc.nim";
Gch_11210.Stat.Maxstackcells = 0;
F.line = 271;F.filename = "gc.nim";
Gch_11210.Stat.Cycletablesize = 0;
F.line = 273;F.filename = "gc.nim";
Init_10878(&Gch_11210.Zct, 1024);
F.line = 274;F.filename = "gc.nim";
Init_10878(&Gch_11210.Tempstack, 1024);
F.line = 275;F.filename = "gc.nim";
Init_10888(&Gch_11210.Cycleroots);
F.line = 276;F.filename = "gc.nim";
Init_10878(&Gch_11210.Decstack, 1024);
F.line = 277;F.filename = "gc.nim";
pthread_mutex_init(&Gch_11210.Cyclerootslock, NIM_NIL);
F.line = 278;F.filename = "gc.nim";
pthread_mutex_init(&Gch_11210.Zctlock, NIM_NIL);
F.line = 279;F.filename = "gc.nim";
asgnRefNoCycle((void**) &Goutofmem_8258, (TY442*) newObj(NTI8262, sizeof(TY442)));
(*Goutofmem_8258).Sup.Sup.Sup.Sup.m_type = NTI442;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Cmp_1321)(NimStringDesc* X_1323, NimStringDesc* Y_1324) {
NI Result_3319;
int LOC1;
Result_3319 = 0;
LOC1 = strcmp(X_1323->data, Y_1324->data);
Result_3319 = ((NI) (LOC1));
goto BeforeRet;
BeforeRet: ;
return Result_3319;
}
N_NIMCALL(void, Rawreadline_3789)(FILE* F_3791, NimStringDesc** Result_3793) {
int C_3794;
(*Result_3793) = setLengthStr((*Result_3793), 0);
while (1) {
C_3794 = 0;
C_3794 = fgetc(F_3791);
if (!(C_3794 < ((NI32) 0))) goto LA3;
goto LA1;
LA3: ;
if (!(C_3794 == ((NI32) 10))) goto LA6;
goto LA1;
LA6: ;
if (!(C_3794 == ((NI32) 13))) goto LA9;
C_3794 = fgetc(F_3791);
if (!!((C_3794 == ((NI32) 10)))) goto LA12;
ungetc(C_3794, F_3791);
LA12: ;
goto LA1;
LA9: ;
(*Result_3793) = addChar((*Result_3793), ((NIM_CHAR) (((NI) (((NI) (C_3794)))))));
} LA1: ;
}
N_NIMCALL(NimStringDesc*, Readline_3679)(FILE* F_3681) {
NimStringDesc* Result_3806;
Result_3806 = 0;
Result_3806 = copyString(((NimStringDesc*) &TMP20320));
Rawreadline_3789(F_3681, &Result_3806);
return Result_3806;
}
N_NIMCALL(void, Write_3654)(FILE* F_3656, NI I_3657) {
fprintf(F_3656, "%lld", I_3657);
}
N_NIMCALL(void, Write_3662)(FILE* F_3664, NIM_BOOL B_3665) {
if (!B_3665) goto LA2;
Write_3658(F_3664, ((NimStringDesc*) &TMP20321));
goto LA1;
LA2: ;
Write_3658(F_3664, ((NimStringDesc*) &TMP20322));
LA1: ;
}
N_NIMCALL(void, Write_3650)(FILE* F_3652, NF R_3653) {
fprintf(F_3652, "%g", R_3653);
}
N_NIMCALL(void, Write_3666)(FILE* F_3668, NIM_CHAR C_3669) {
putc(C_3669, F_3668);
}
N_NIMCALL(void, Write_3674)(FILE* F_3676, NimStringDesc** A_3678, NI A_3678Len0) {
NimStringDesc* X_4053;
NI I_20006;
X_4053 = 0;
I_20006 = 0;
I_20006 = 0;
while (1) {
if (!(I_20006 < A_3678Len0)) goto LA1;
X_4053 = A_3678[I_20006];
Write_3658(F_3676, X_4053);
I_20006 += 1;
} LA1: ;
}
static N_INLINE(void, pushSafePoint)(TSafePoint* S_4635) {
(*S_4635).prev = excHandler;
excHandler = S_4635;
}
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623) {
NIM_BOOL Result_4112;
void* P_4113;
int LOC5;
TY442* E_4119;
int LOC11;
Result_4112 = 0;
P_4113 = 0;
P_4113 = fopen(Filename_3621->data, Formatopen_4101[(Mode_3622)-0]->data);
Result_4112 = !((P_4113 == NIM_NIL));
(*F_3620) = ((FILE*) (P_4113));
if (!(0 < Bufsize_3623)) goto LA2;
LOC5 = setvbuf((*F_3620), NIM_NIL, _IOFBF, ((int) (Bufsize_3623)));
if (!!((LOC5 == ((NI32) 0)))) goto LA6;
E_4119 = 0;
E_4119 = (TY442*) newObj(NTI8262, sizeof(TY442));
(*E_4119).Sup.Sup.Sup.Sup.m_type = NTI442;
asgnRefNoCycle((void**) &(*E_4119).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20319)));
raiseException((E_Base*)E_4119, "EOutOfMemory");
LA6: ;
goto LA1;
LA2: ;
if (!(Bufsize_3623 == 0)) goto LA9;
LOC11 = setvbuf((*F_3620), NIM_NIL, _IONBF, ((NI32) 0));
goto LA1;
LA9: ;
LA1: ;
return Result_4112;
}
N_NIMCALL(NI64, Getfilepos_3742)(FILE* F_3744) {
NI64 Result_4305;
NI LOC1;
TY420* E_4309;
Result_4305 = 0;
LOC1 = ftell(F_3744);
Result_4305 = ((NI64) (LOC1));
if (!(Result_4305 < 0)) goto LA3;
E_4309 = 0;
E_4309 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4309).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4309).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20324)));
raiseException((E_Base*)E_4309, "EIO");
LA3: ;
return Result_4305;
}
N_NIMCALL(void, Setfilepos_3738)(FILE* F_3740, NI64 Pos_3741) {
NI LOC2;
TY420* E_4286;
LOC2 = fseek(F_3740, ((NI) (Pos_3741)), 0);
if (!!((LOC2 == 0))) goto LA3;
E_4286 = 0;
E_4286 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4286).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4286).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20325)));
raiseException((E_Base*)E_4286, "EIO");
LA3: ;
}
N_NIMCALL(NI64, Getfilesize_3695)(FILE* F_3697) {
NI64 Result_4328;
NI64 Oldpos_4329;
NI LOC1;
Result_4328 = 0;
Oldpos_4329 = 0;
Oldpos_4329 = Getfilepos_3742(F_3697);
LOC1 = fseek(F_3697, 0, 2);
Result_4328 = Getfilepos_3742(F_3697);
Setfilepos_3738(F_3697, Oldpos_4329);
return Result_4328;
}
N_NIMCALL(NI, Readbuffer_3714)(FILE* F_3716, void* Buffer_3717, NI Len_3718) {
NI Result_4199;
Result_4199 = 0;
Result_4199 = fread(Buffer_3717, 1, Len_3718, F_3716);
return Result_4199;
}
static N_INLINE(void, popSafePoint)(void) {
excHandler = (*excHandler).prev;
}
static N_INLINE(E_Base*, getCurrentException)(void) {
E_Base* Result_19404;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getCurrentException";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_19404 = 0;
F.line = 1584;F.filename = "system.nim";
Result_19404 = Currexception_4632;
framePtr = framePtr->prev;
return Result_19404;
}
static N_INLINE(void, popCurrentException)(void) {
asgnRef((void**) &Currexception_4632, (*Currexception_4632).parent);
}
N_NIMCALL(void, reraiseException)(void) {
TY452* E_5234;
if (!(Currexception_4632 == NIM_NIL)) goto LA2;
E_5234 = 0;
E_5234 = (TY452*) newObj(NTI5233, sizeof(TY452));
(*E_5234).Sup.Sup.Sup.m_type = NTI452;
asgnRefNoCycle((void**) &(*E_5234).Sup.Sup.message, copyString(((NimStringDesc*) &TMP20326)));
raiseException((E_Base*)E_5234, "ENoExceptionToReraise");
goto LA1;
LA2: ;
raiseException(Currexception_4632, (*Currexception_4632).name);
LA1: ;
}
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649) {
NimStringDesc* Result_4057;
FILE* F_4058;
TSafePoint TMP20323;
NIM_BOOL LOC2;
NI64 volatile Len_4060;
NI LOC9;
Result_4057 = 0;
F_4058 = 0;
pushSafePoint(&TMP20323);
TMP20323.status = setjmp(TMP20323.context);
if (TMP20323.status == 0) {
LOC2 = Open_3617(&F_4058, Filename_3649, ((NU8) 0), -1);
if (!LOC2) goto LA3;
Len_4060 = 0;
Len_4060 = Getfilesize_3695(F_4058);
if (!(Len_4060 < IL64(9223372036854775807))) goto LA6;
Result_4057 = mnewString(((NI) (Len_4060)));
LOC9 = Readbuffer_3714(F_4058, ((void*) (&Result_4057->data[0])), ((NI) (Len_4060)));
if (!!((((NI64) (LOC9)) == Len_4060))) goto LA10;
Result_4057 = copyString(NIM_NIL);
LA10: ;
LA6: ;
fclose(F_4058);
goto LA1;
LA3: ;
Result_4057 = copyString(NIM_NIL);
LA1: ;
popSafePoint();
} else {
popSafePoint();
if (getCurrentException()->Sup.m_type == NTI420) {
Result_4057 = copyString(NIM_NIL);
TMP20323.status = 0;popCurrentException();}
}
if (TMP20323.status != 0) reraiseException();
return Result_4057;
}
N_NIMCALL(NIM_BOOL, Endoffile_3638)(FILE* F_3640) {
NIM_BOOL Result_4069;
int C_4070;
Result_4069 = 0;
C_4070 = 0;
C_4070 = fgetc(F_3640);
ungetc(C_4070, F_3640);
Result_4069 = (C_4070 == ((NI32) -1));
goto BeforeRet;
BeforeRet: ;
return Result_4069;
}
N_NIMCALL(NIM_BOOL, Reopen_3630)(FILE* F_3632, NimStringDesc* Filename_3633, NU8 Mode_3634) {
NIM_BOOL Result_4142;
void* P_4143;
FILE* LOC1;
Result_4142 = 0;
P_4143 = 0;
LOC1 = freopen(Filename_3633->data, Formatopen_4101[(Mode_3634)-0]->data, F_3632);
P_4143 = ((void*) (LOC1));
Result_4142 = !((P_4143 == NIM_NIL));
return Result_4142;
}
N_NIMCALL(NIM_BOOL, Open_3624)(FILE** F_3627, int Filehandle_3628, NU8 Mode_3629) {
NIM_BOOL Result_4162;
Result_4162 = 0;
(*F_3627) = fdopen(Filehandle_3628, Formatopen_4101[(Mode_3629)-0]->data);
Result_4162 = !(((*F_3627) == NIM_NIL));
return Result_4162;
}
N_NIMCALL(NI, Readbytes_3698)(FILE* F_3700, NI8* A_3703, NI A_3703Len0, NI Start_3704, NI Len_3705) {
NI Result_4208;
Result_4208 = 0;
Result_4208 = Readbuffer_3714(F_3700, ((void*) (&A_3703[Start_3704])), Len_3705);
return Result_4208;
}
N_NIMCALL(NI, Readchars_3706)(FILE* F_3708, NIM_CHAR* A_3711, NI A_3711Len0, NI Start_3712, NI Len_3713) {
NI Result_4218;
Result_4218 = 0;
Result_4218 = Readbuffer_3714(F_3708, ((void*) (&A_3711[Start_3712])), Len_3713);
return Result_4218;
}
N_NIMCALL(NI, Writebytes_3719)(FILE* F_3721, NI8* A_3723, NI A_3723Len0, NI Start_3724, NI Len_3725) {
NI Result_4227;
NI8* X_4231;
Result_4227 = 0;
X_4231 = 0;
X_4231 = ((NI8*) (A_3723));
Result_4227 = Writebuffer_3733(F_3721, ((void*) (&X_4231[(Start_3724)-0])), Len_3725);
return Result_4227;
}
N_NIMCALL(NI, Writechars_3726)(FILE* F_3728, NIM_CHAR* A_3730, NI A_3730Len0, NI Start_3731, NI Len_3732) {
NI Result_4240;
NI8* X_4244;
Result_4240 = 0;
X_4244 = 0;
X_4244 = ((NI8*) (A_3730));
Result_4240 = Writebuffer_3733(F_3728, ((void*) (&X_4244[(Start_3731)-0])), Len_3732);
return Result_4240;
}
N_NOINLINE(void, raiseOverflow)(void) {
EOverflow* E_5692;
E_5692 = 0;
E_5692 = (EOverflow*) newObj(NTI5691, sizeof(EOverflow));
(*E_5692).Sup.Sup.Sup.Sup.m_type = NTI432;
asgnRefNoCycle((void**) &(*E_5692).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20332)));
raiseException((E_Base*)E_5692, "EOverflow");
}
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804) {
NI Result_5805;
NIM_BOOL LOC2;
Result_5805 = 0;
Result_5805 = (NI64)((NU64)(A_5803) + (NU64)(B_5804));
LOC2 = (0 <= (NI64)(Result_5805 ^ A_5803));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_5805 ^ B_5804));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5805;
}
N_NIMCALL(NI, mulInt)(NI A_6803, NI B_6804) {
NI Result_6805;
NF Resasfloat_6806;
NF Floatprod_6807;
Result_6805 = 0;
Resasfloat_6806 = 0;
Floatprod_6807 = 0;
Result_6805 = (NI64)((NU64)(A_6803) * (NU64)(B_6804));
Floatprod_6807 = (((double) (A_6803)) * ((double) (B_6804)));
Resasfloat_6806 = ((double) (Result_6805));
if (!(Resasfloat_6806 == Floatprod_6807)) goto LA2;
goto BeforeRet;
LA2: ;
if (!((32.0000 * ((Resasfloat_6806 - Floatprod_6807) > 0? ((Resasfloat_6806 - Floatprod_6807)) : -((Resasfloat_6806 - Floatprod_6807)))) <= (Floatprod_6807 > 0? (Floatprod_6807) : -(Floatprod_6807)))) goto LA5;
goto BeforeRet;
LA5: ;
raiseOverflow();
BeforeRet: ;
return Result_6805;
}
N_NIMCALL(void*, newSeq)(TNimType* Typ_13004, NI Len_13005) {
void* Result_13006;
NI LOC1;
NI LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newSeq";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_13006 = 0;
F.line = 363;F.filename = "gc.nim";
LOC1 = mulInt(Len_13005, (*(*Typ_13004).base).size);
LOC2 = addInt(LOC1, 16);
Result_13006 = newObj(Typ_13004, LOC2);
F.line = 364;F.filename = "gc.nim";
(*((TGenericSeq*) (Result_13006))).len = Len_13005;
F.line = 365;F.filename = "gc.nim";
(*((TGenericSeq*) (Result_13006))).space = Len_13005;
framePtr = framePtr->prev;
return Result_13006;
}
N_NIMCALL(TY4377*, Cstringarraytoseq_4373)(NCSTRING* A_4375, NI Len_4376) {
TY4377* Result_4378;
NI I_4413;
NI HEX3Atmp_20012;
NI Res_20014;
Result_4378 = 0;
Result_4378 = (TY4377*) newSeq(NTI4377, Len_4376);
I_4413 = 0;
HEX3Atmp_20012 = 0;
HEX3Atmp_20012 = (NI64)(Len_4376 - 1);
Res_20014 = 0;
Res_20014 = 0;
while (1) {
if (!(Res_20014 <= HEX3Atmp_20012)) goto LA1;
I_4413 = Res_20014;
asgnRefNoCycle((void**) &Result_4378->data[I_4413], cstrToNimstr(A_4375[(I_4413)-0]));
Res_20014 += 1;
} LA1: ;
return Result_4378;
}
N_NIMCALL(TY4377*, Cstringarraytoseq_4414)(NCSTRING* A_4416) {
TY4377* Result_4418;
NI L_4419;
Result_4418 = 0;
L_4419 = 0;
L_4419 = 0;
while (1) {
if (!!((A_4416[(L_4419)-0] == NIM_NIL))) goto LA1;
L_4419 += 1;
} LA1: ;
Result_4418 = Cstringarraytoseq_4373(A_4416, L_4419);
return Result_4418;
}
N_NIMCALL(void, internalAssert)(NCSTRING File_5254, NI Line_5255, NIM_BOOL Cond_5256) {
NimStringDesc* LOC7;
if (!!(Cond_5256)) goto LA2;
Gcdisable_2663();
if (!!(Assertbuf_4654 == 0)) goto LA5;
Assertbuf_4654 = setLengthStr(Assertbuf_4654, 0);
Assertbuf_4654 = resizeString(Assertbuf_4654, 26);
appendString(Assertbuf_4654, ((NimStringDesc*) &TMP20333));
Add_2722(&Assertbuf_4654, File_5254);
Assertbuf_4654 = resizeString(Assertbuf_4654, 7);
appendString(Assertbuf_4654, ((NimStringDesc*) &TMP20334));
LOC7 = 0;
LOC7 = nimIntToStr(Line_5255);
Assertbuf_4654 = resizeString(Assertbuf_4654, LOC7->Sup.len + 0);
appendString(Assertbuf_4654, LOC7);
Assertbuf_4654 = resizeString(Assertbuf_4654, 1);
appendString(Assertbuf_4654, ((NimStringDesc*) &TMP20317));
asgnRefNoCycle((void**) &(*Gassertionfailed_5251).Sup.Sup.message, copyString(Assertbuf_4654));
LA5: ;
Gcenable_2665();
if (!!((Gassertionfailed_5251 == NIM_NIL))) goto LA9;
raiseException((E_Base*)Gassertionfailed_5251, "EAssertionFailed");
goto LA8;
LA9: ;
fprintf(stdout, "Assertion failure: file %s line %ld\012", File_5254, Line_5255);
exit(1);
LA8: ;
LA2: ;
}
N_NIMCALL(void, Writestacktrace_5271)(void) {
NimStringDesc* S_5273;
S_5273 = 0;
S_5273 = copyString(((NimStringDesc*) &TMP20320));
Rawwritestacktrace_4843(&S_5273);
Writetostderr_4432(S_5273->data);
}
N_NOCONV(void, signalHandler)(int Sig_5278) {
int S_5279;
S_5279 = 0;
S_5279 = Sig_5278;
Gcdisable_2663();
Buf_4653 = setLengthStr(Buf_4653, 0);
Rawwritestacktrace_4843(&Buf_4653);
if (!(S_5279 == SIGINT)) goto LA2;
Buf_4653 = resizeString(Buf_4653, 31);
appendString(Buf_4653, ((NimStringDesc*) &TMP20335));
goto LA1;
LA2: ;
if (!(S_5279 == SIGSEGV)) goto LA4;
Buf_4653 = resizeString(Buf_4653, 61);
appendString(Buf_4653, ((NimStringDesc*) &TMP20336));
goto LA1;
LA4: ;
if (!(S_5279 == SIGABRT)) goto LA6;
if (!Dbgaborting_5275) goto LA9;
goto BeforeRet;
LA9: ;
Buf_4653 = resizeString(Buf_4653, 31);
appendString(Buf_4653, ((NimStringDesc*) &TMP20337));
goto LA1;
LA6: ;
if (!(S_5279 == SIGFPE)) goto LA11;
Buf_4653 = resizeString(Buf_4653, 26);
appendString(Buf_4653, ((NimStringDesc*) &TMP20338));
goto LA1;
LA11: ;
if (!(S_5279 == SIGILL)) goto LA13;
Buf_4653 = resizeString(Buf_4653, 27);
appendString(Buf_4653, ((NimStringDesc*) &TMP20339));
goto LA1;
LA13: ;
if (!(S_5279 == SIGBUS)) goto LA15;
Buf_4653 = resizeString(Buf_4653, 60);
appendString(Buf_4653, ((NimStringDesc*) &TMP20340));
goto LA1;
LA15: ;
Buf_4653 = resizeString(Buf_4653, 15);
appendString(Buf_4653, ((NimStringDesc*) &TMP20341));
LA1: ;
Writetostderr_4432(Buf_4653->data);
Dbgaborting_5275 = NIM_TRUE;
Gcenable_2665();
exit(1);
BeforeRet: ;
}
N_NIMCALL(void, registerSignalHandler)(void) {
signal(SIGINT, signalHandler);
signal(SIGSEGV, signalHandler);
signal(SIGABRT, signalHandler);
signal(SIGFPE, signalHandler);
signal(SIGILL, signalHandler);
signal(SIGBUS, signalHandler);
}
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_18267) {
NimStringDesc* Result_18268;
NI I_18269;
NI64 Y_18270;
NI64 D_18271;
NI J_18312;
NI HEX3Atmp_20219;
NI Res_20221;
NIM_CHAR LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimInt64ToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18268 = 0;
F.line = 253;F.filename = "sysstr.nim";
Result_18268 = mnewString(32);
I_18269 = 0;
F.line = 254;F.filename = "sysstr.nim";
I_18269 = 0;
Y_18270 = 0;
F.line = 255;F.filename = "sysstr.nim";
Y_18270 = X_18267;
F.line = 256;F.filename = "sysstr.nim";
while (1) {
D_18271 = 0;
F.line = 257;F.filename = "sysstr.nim";
D_18271 = (NI64)(Y_18270 / 10);
F.line = 258;F.filename = "sysstr.nim";
Result_18268->data[I_18269] = ((NIM_CHAR) (((NI) ((NI64)((NI64)abs(((NI) ((NI64)(Y_18270 - (NI64)(D_18271 * 10))))) + 48)))));
F.line = 259;F.filename = "sysstr.nim";
I_18269 += 1;
F.line = 260;F.filename = "sysstr.nim";
Y_18270 = D_18271;
F.line = 261;F.filename = "sysstr.nim";
if (!(Y_18270 == 0)) goto LA3;
F.line = 261;F.filename = "sysstr.nim";
goto LA1;
LA3: ;
} LA1: ;
F.line = 262;F.filename = "sysstr.nim";
if (!(X_18267 < 0)) goto LA6;
F.line = 263;F.filename = "sysstr.nim";
Result_18268->data[I_18269] = 45;
F.line = 264;F.filename = "sysstr.nim";
I_18269 += 1;
LA6: ;
F.line = 265;F.filename = "sysstr.nim";
Result_18268 = setLengthStr(Result_18268, I_18269);
J_18312 = 0;
HEX3Atmp_20219 = 0;
F.line = 267;F.filename = "sysstr.nim";
HEX3Atmp_20219 = (NI64)((NI64)(I_18269 / 2) - 1);
Res_20221 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20221 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20221 <= HEX3Atmp_20219)) goto LA8;
F.line = 1021;F.filename = "system.nim";
J_18312 = Res_20221;
F.line = 268;F.filename = "sysstr.nim";
LOC9 = Result_18268->data[J_18312];
Result_18268->data[J_18312] = Result_18268->data[(NI64)((NI64)(I_18269 - J_18312) - 1)];
Result_18268->data[(NI64)((NI64)(I_18269 - J_18312) - 1)] = LOC9;
F.line = 1024;F.filename = "system.nim";
Res_20221 += 1;
} LA8: ;
framePtr = framePtr->prev;
return Result_18268;
}
N_NOINLINE(void, raiseRangeError)(NI64 Val_5418) {
TY448* E_5420;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
E_5420 = 0;
E_5420 = (TY448*) newObj(NTI5419, sizeof(TY448));
(*E_5420).Sup.Sup.Sup.m_type = NTI448;
LOC2 = 0;
LOC3 = 0;
LOC3 = nimInt64ToStr(Val_5418);
LOC2 = rawNewString(LOC3->Sup.len + 19);
appendString(LOC2, ((NimStringDesc*) &TMP20342));
appendString(LOC2, LOC3);
appendString(LOC2, ((NimStringDesc*) &TMP20343));
asgnRefNoCycle((void**) &(*E_5420).Sup.Sup.message, LOC2);
raiseException((E_Base*)E_5420, "EOutOfRange");
}
N_NOINLINE(void, raiseIndexError)(void) {
TY444* E_5457;
E_5457 = 0;
E_5457 = (TY444*) newObj(NTI5456, sizeof(TY444));
(*E_5457).Sup.Sup.Sup.m_type = NTI444;
asgnRefNoCycle((void**) &(*E_5457).Sup.Sup.message, copyString(((NimStringDesc*) &TMP20344)));
raiseException((E_Base*)E_5457, "EInvalidIndex");
}
N_NOINLINE(void, raiseFieldError)(NimStringDesc* F_5475) {
TY446* E_5477;
NimStringDesc* LOC2;
E_5477 = 0;
E_5477 = (TY446*) newObj(NTI5476, sizeof(TY446));
(*E_5477).Sup.Sup.Sup.m_type = NTI446;
LOC2 = 0;
LOC2 = rawNewString(F_5475->Sup.len + 18);
appendString(LOC2, F_5475);
appendString(LOC2, ((NimStringDesc*) &TMP20345));
asgnRefNoCycle((void**) &(*E_5477).Sup.Sup.message, LOC2);
raiseException((E_Base*)E_5477, "EInvalidField");
}
static N_INLINE(NI, chckIndx)(NI I_4605, NI A_4606, NI B_4607) {
NI Result_5506;
NIM_BOOL LOC2;
Result_5506 = 0;
LOC2 = (A_4606 <= I_4605);
if (!(LOC2)) goto LA3;
LOC2 = (I_4605 <= B_4607);
LA3: ;
if (!LOC2) goto LA4;
Result_5506 = I_4605;
goto BeforeRet;
goto LA1;
LA4: ;
raiseIndexError();
LA1: ;
BeforeRet: ;
return Result_5506;
}
static N_INLINE(NI, chckRange)(NI I_4610, NI A_4611, NI B_4612) {
NI Result_5516;
NIM_BOOL LOC2;
Result_5516 = 0;
LOC2 = (A_4611 <= I_4610);
if (!(LOC2)) goto LA3;
LOC2 = (I_4610 <= B_4612);
LA3: ;
if (!LOC2) goto LA4;
Result_5516 = I_4610;
goto BeforeRet;
goto LA1;
LA4: ;
raiseRangeError(((NI64) (I_4610)));
LA1: ;
BeforeRet: ;
return Result_5516;
}
N_NIMCALL(NI64, chckRange64)(NI64 I_5523, NI64 A_5524, NI64 B_5525) {
NI64 Result_5526;
NIM_BOOL LOC2;
Result_5526 = 0;
LOC2 = (A_5524 <= I_5523);
if (!(LOC2)) goto LA3;
LOC2 = (I_5523 <= B_5525);
LA3: ;
if (!LOC2) goto LA4;
Result_5526 = I_5523;
goto BeforeRet;
goto LA1;
LA4: ;
raiseRangeError(I_5523);
LA1: ;
BeforeRet: ;
return Result_5526;
}
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_18260) {
NimStringDesc* Result_18261;
TY18262 Buf_18264;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimFloatToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18261 = 0;
memset((void*)&Buf_18264, 0, sizeof(Buf_18264));
F.line = 247;F.filename = "sysstr.nim";
sprintf(((NCSTRING) (Buf_18264)), "%#g", X_18260);
F.line = 248;F.filename = "sysstr.nim";
F.line = 248;F.filename = "sysstr.nim";
Result_18261 = cstrToNimstr(((NCSTRING) (Buf_18264)));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18261;
}
static N_INLINE(NF, chckRangeF)(NF X_4615, NF A_4616, NF B_4617) {
NF Result_5536;
NIM_BOOL LOC2;
TY448* E_5538;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
Result_5536 = 0;
LOC2 = (A_4616 <= X_4615);
if (!(LOC2)) goto LA3;
LOC2 = (X_4615 <= B_4617);
LA3: ;
if (!LOC2) goto LA4;
Result_5536 = X_4615;
goto BeforeRet;
goto LA1;
LA4: ;
E_5538 = 0;
E_5538 = (TY448*) newObj(NTI5419, sizeof(TY448));
(*E_5538).Sup.Sup.Sup.m_type = NTI448;
LOC7 = 0;
LOC8 = 0;
LOC8 = nimFloatToStr(X_4615);
LOC7 = rawNewString(LOC8->Sup.len + 19);
appendString(LOC7, ((NimStringDesc*) &TMP20342));
appendString(LOC7, LOC8);
appendString(LOC7, ((NimStringDesc*) &TMP20343));
asgnRefNoCycle((void**) &(*E_5538).Sup.Sup.message, LOC7);
raiseException((E_Base*)E_5538, "EOutOfRange");
LA1: ;
BeforeRet: ;
return Result_5536;
}
static N_INLINE(void, chckNil)(void* P_4620) {
if (!(P_4620 == NIM_NIL)) goto LA2;
raise(SIGSEGV);
LA2: ;
}
N_NIMCALL(void, chckObj)(TNimType* Obj_5575, TNimType* Subclass_5576) {
TNimType* X_5577;
TY456* E_5608;
X_5577 = 0;
X_5577 = Obj_5575;
if (!(X_5577 == Subclass_5576)) goto LA2;
goto BeforeRet;
LA2: ;
while (1) {
if (!!((X_5577 == Subclass_5576))) goto LA4;
if (!(X_5577 == NIM_NIL)) goto LA6;
E_5608 = 0;
E_5608 = (TY456*) newObj(NTI5607, sizeof(TY456));
(*E_5608).Sup.Sup.Sup.m_type = NTI456;
asgnRefNoCycle((void**) &(*E_5608).Sup.Sup.message, copyString(((NimStringDesc*) &TMP20346)));
raiseException((E_Base*)E_5608, "EInvalidObjectConversion");
LA6: ;
X_5577 = (*X_5577).base;
} LA4: ;
BeforeRet: ;
}
static N_INLINE(void, chckObjAsgn)(TNimType* A_5626, TNimType* B_5627) {
TY454* E_5638;
if (!!((A_5626 == B_5627))) goto LA2;
E_5638 = 0;
E_5638 = (TY454*) newObj(NTI5637, sizeof(TY454));
(*E_5638).Sup.Sup.Sup.m_type = NTI454;
asgnRefNoCycle((void**) &(*E_5638).Sup.Sup.message, copyString(((NimStringDesc*) &TMP20347)));
raiseException((E_Base*)E_5638, "EInvalidObjectAssignment");
LA2: ;
}
N_NIMCALL(NIM_BOOL, isObj)(TNimType* Obj_5656, TNimType* Subclass_5657) {
NIM_BOOL Result_5658;
TNimType* X_5659;
Result_5658 = 0;
X_5659 = 0;
X_5659 = Obj_5656;
if (!(X_5659 == Subclass_5657)) goto LA2;
Result_5658 = NIM_TRUE;
goto BeforeRet;
LA2: ;
while (1) {
if (!!((X_5659 == Subclass_5657))) goto LA4;
if (!(X_5659 == NIM_NIL)) goto LA6;
Result_5658 = NIM_FALSE;
goto BeforeRet;
LA6: ;
X_5659 = (*X_5659).base;
} LA4: ;
Result_5658 = NIM_TRUE;
goto BeforeRet;
BeforeRet: ;
return Result_5658;
}
N_NOINLINE(void, raiseDivByZero)(void) {
EDivByZero* E_5711;
E_5711 = 0;
E_5711 = (EDivByZero*) newObj(NTI5710, sizeof(EDivByZero));
(*E_5711).Sup.Sup.Sup.Sup.m_type = NTI430;
asgnRefNoCycle((void**) &(*E_5711).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20348)));
raiseException((E_Base*)E_5711, "EDivByZero");
}
static N_INLINE(NI64, addInt64)(NI64 A_5729, NI64 B_5730) {
NI64 Result_5731;
NIM_BOOL LOC2;
Result_5731 = 0;
Result_5731 = (NI64)((NU64)(A_5729) + (NU64)(B_5730));
LOC2 = (0 <= (Result_5731 ^ A_5729));
if (LOC2) goto LA3;
LOC2 = (0 <= (Result_5731 ^ B_5730));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5731;
}
static N_INLINE(NI64, subInt64)(NI64 A_5738, NI64 B_5739) {
NI64 Result_5740;
NIM_BOOL LOC2;
Result_5740 = 0;
Result_5740 = (NI64)((NU64)(A_5738) - (NU64)(B_5739));
LOC2 = (0 <= (Result_5740 ^ A_5738));
if (LOC2) goto LA3;
LOC2 = (0 <= (Result_5740 ^ ~(B_5739)));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5740;
}
static N_INLINE(NI64, negInt64)(NI64 A_5747) {
NI64 Result_5748;
Result_5748 = 0;
if (!!((A_5747 == (IL64(-9223372036854775807) - IL64(1))))) goto LA2;
Result_5748 = -(A_5747);
goto BeforeRet;
LA2: ;
raiseOverflow();
BeforeRet: ;
return Result_5748;
}
static N_INLINE(NI64, absInt64)(NI64 A_5753) {
NI64 Result_5754;
Result_5754 = 0;
if (!!((A_5753 == (IL64(-9223372036854775807) - IL64(1))))) goto LA2;
if (!(0 <= A_5753)) goto LA5;
Result_5754 = A_5753;
goto BeforeRet;
goto LA4;
LA5: ;
Result_5754 = -(A_5753);
goto BeforeRet;
LA4: ;
LA2: ;
raiseOverflow();
BeforeRet: ;
return Result_5754;
}
static N_INLINE(NI64, divInt64)(NI64 A_5761, NI64 B_5762) {
NI64 Result_5763;
NIM_BOOL LOC5;
Result_5763 = 0;
if (!(B_5762 == 0)) goto LA2;
raiseDivByZero();
LA2: ;
LOC5 = (A_5761 == (IL64(-9223372036854775807) - IL64(1)));
if (!(LOC5)) goto LA6;
LOC5 = (B_5762 == -1);
LA6: ;
if (!LOC5) goto LA7;
raiseOverflow();
LA7: ;
Result_5763 = (NI64)(A_5761 / B_5762);
goto BeforeRet;
BeforeRet: ;
return Result_5763;
}
static N_INLINE(NI64, modInt64)(NI64 A_5772, NI64 B_5773) {
NI64 Result_5774;
Result_5774 = 0;
if (!(B_5773 == 0)) goto LA2;
raiseDivByZero();
LA2: ;
Result_5774 = (NI64)(A_5772 % B_5773);
goto BeforeRet;
BeforeRet: ;
return Result_5774;
}
N_NIMCALL(NI64, mulInt64)(NI64 A_5779, NI64 B_5780) {
NI64 Result_5781;
NF64 Resasfloat_5782;
NF64 Floatprod_5783;
Result_5781 = 0;
Resasfloat_5782 = 0;
Floatprod_5783 = 0;
Result_5781 = (NI64)((NU64)(A_5779) * (NU64)(B_5780));
Floatprod_5783 = ((double) (A_5779));
Floatprod_5783 = ((NF64) ((((NF) (Floatprod_5783)) * ((NF) (((double) (B_5780)))))));
Resasfloat_5782 = ((double) (Result_5781));
if (!(((NF) (Resasfloat_5782)) == ((NF) (Floatprod_5783)))) goto LA2;
goto BeforeRet;
LA2: ;
if (!((32.0000 * ((((NF) (Resasfloat_5782)) - ((NF) (Floatprod_5783))) > 0? ((((NF) (Resasfloat_5782)) - ((NF) (Floatprod_5783)))) : -((((NF) (Resasfloat_5782)) - ((NF) (Floatprod_5783)))))) <= (((NF) (Floatprod_5783)) > 0? (((NF) (Floatprod_5783))) : -(((NF) (Floatprod_5783)))))) goto LA5;
goto BeforeRet;
LA5: ;
raiseOverflow();
BeforeRet: ;
return Result_5781;
}
static N_INLINE(NI, absInt)(NI A_5786) {
NI Result_5787;
Result_5787 = 0;
if (!!((A_5786 == (IL64(-9223372036854775807) - IL64(1))))) goto LA2;
if (!(0 <= A_5786)) goto LA5;
Result_5787 = A_5786;
goto BeforeRet;
goto LA4;
LA5: ;
Result_5787 = ((NI64)-(A_5786));
goto BeforeRet;
LA4: ;
LA2: ;
raiseOverflow();
BeforeRet: ;
return Result_5787;
}
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004) {
NI Result_6005;
NIM_BOOL LOC2;
Result_6005 = 0;
Result_6005 = (NI64)((NU64)(A_6003) - (NU64)(B_6004));
LOC2 = (0 <= (NI64)(Result_6005 ^ A_6003));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_6005 ^ (NI64)((NU64) ~(B_6004))));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_6005;
}
static N_INLINE(NI, negInt)(NI A_6203) {
NI Result_6204;
Result_6204 = 0;
if (!!((A_6203 == (IL64(-9223372036854775807) - IL64(1))))) goto LA2;
Result_6204 = ((NI64)-(A_6203));
goto BeforeRet;
LA2: ;
raiseOverflow();
BeforeRet: ;
return Result_6204;
}
static N_INLINE(NI, divInt)(NI A_6403, NI B_6404) {
NI Result_6405;
NIM_BOOL LOC5;
Result_6405 = 0;
if (!(B_6404 == 0)) goto LA2;
raiseDivByZero();
LA2: ;
LOC5 = (A_6403 == (IL64(-9223372036854775807) - IL64(1)));
if (!(LOC5)) goto LA6;
LOC5 = (B_6404 == -1);
LA6: ;
if (!LOC5) goto LA7;
raiseOverflow();
LA7: ;
Result_6405 = (NI64)(A_6403 / B_6404);
goto BeforeRet;
BeforeRet: ;
return Result_6405;
}
static N_INLINE(NI, modInt)(NI A_6603, NI B_6604) {
NI Result_6605;
Result_6605 = 0;
if (!(B_6604 == 0)) goto LA2;
raiseDivByZero();
LA2: ;
Result_6605 = (NI64)(A_6603 % B_6604);
goto BeforeRet;
BeforeRet: ;
return Result_6605;
}
N_NOINLINE(void, Raisefloatinvalidop_7001)(void) {
EFloatInvalidOp* E_7004;
E_7004 = 0;
E_7004 = (EFloatInvalidOp*) newObj(NTI7003, sizeof(EFloatInvalidOp));
(*E_7004).Sup.Sup.Sup.Sup.m_type = NTI460;
asgnRefNoCycle((void**) &(*E_7004).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20349)));
raiseException((E_Base*)E_7004, "EFloatInvalidOp");
}
static N_INLINE(void, nanCheck)(NF64 X_7022) {
if (!!((((NF) (X_7022)) == ((NF) (X_7022))))) goto LA2;
Raisefloatinvalidop_7001();
LA2: ;
}
N_NOINLINE(void, Raisefloatoverflow_7023)(NF64 X_7025) {
EFloatOverflow* E_7027;
EFloatUnderflow* E_7044;
if (!(0.00000 < ((NF) (X_7025)))) goto LA2;
E_7027 = 0;
E_7027 = (EFloatOverflow*) newObj(NTI7026, sizeof(EFloatOverflow));
(*E_7027).Sup.Sup.Sup.Sup.m_type = NTI464;
asgnRefNoCycle((void**) &(*E_7027).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20350)));
raiseException((E_Base*)E_7027, "EFloatOverflow");
goto LA1;
LA2: ;
E_7044 = 0;
E_7044 = (EFloatUnderflow*) newObj(NTI7043, sizeof(EFloatUnderflow));
(*E_7044).Sup.Sup.Sup.Sup.m_type = NTI466;
asgnRefNoCycle((void**) &(*E_7044).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20351)));
raiseException((E_Base*)E_7044, "EFloatUnderflow");
LA1: ;
}
static N_INLINE(void, infCheck)(NF64 X_7062) {
NIM_BOOL LOC2;
LOC2 = !((((NF) (X_7062)) == 0.00000));
if (!(LOC2)) goto LA3;
LOC2 = ((((NF) (X_7062)) * 0.500000) == ((NF) (X_7062)));
LA3: ;
if (!LOC2) goto LA4;
Raisefloatoverflow_7023(X_7062);
LA4: ;
}
N_NIMCALL(void, Rawwrite_7064)(FILE* F_7066, NimStringDesc* S_7067) {
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawWrite";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 20;F.filename = "dyncalls.nim";
LOC1 = Writebuffer_3733(F_7066, ((void*) (S_7067->data)), S_7067->Sup.len);
framePtr = framePtr->prev;
}
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* Path_1621) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimLoadLibraryError";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 26;F.filename = "dyncalls.nim";
Rawwrite_7064(stdout, ((NimStringDesc*) &TMP20352));
F.line = 27;F.filename = "dyncalls.nim";
Rawwrite_7064(stdout, Path_1621);
F.line = 28;F.filename = "dyncalls.nim";
Rawwrite_7064(stdout, ((NimStringDesc*) &TMP20317));
F.line = 29;F.filename = "dyncalls.nim";
exit(1);
framePtr = framePtr->prev;
}
N_NOINLINE(void, Procaddrerror_7073)(NCSTRING Name_7075) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ProcAddrError";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 33;F.filename = "dyncalls.nim";
Rawwrite_7064(stdout, ((NimStringDesc*) &TMP20353));
F.line = 34;F.filename = "dyncalls.nim";
Write_3670(stdout, Name_7075);
F.line = 35;F.filename = "dyncalls.nim";
Rawwrite_7064(stdout, ((NimStringDesc*) &TMP20317));
F.line = 36;F.filename = "dyncalls.nim";
exit(1);
framePtr = framePtr->prev;
}
N_NIMCALL(void, nimUnloadLibrary)(void* Lib_1614) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimUnloadLibrary";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 67;F.filename = "dyncalls.nim";
dlclose(Lib_1614);
framePtr = framePtr->prev;
}
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* Path_1611) {
void* Result_7096;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimLoadLibrary";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7096 = 0;
F.line = 70;F.filename = "dyncalls.nim";
Result_7096 = dlopen(Path_1611->data, RTLD_NOW);
framePtr = framePtr->prev;
return Result_7096;
}
N_NIMCALL(void*, nimGetProcAddr)(void* Lib_1617, NCSTRING Name_1618) {
void* Result_7101;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimGetProcAddr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7101 = 0;
F.line = 74;F.filename = "dyncalls.nim";
Result_7101 = dlsym(Lib_1617, Name_1618);
F.line = 75;F.filename = "dyncalls.nim";
if (!(Result_7101 == NIM_NIL)) goto LA2;
F.line = 75;F.filename = "dyncalls.nim";
Procaddrerror_7073(Name_1618);
LA2: ;
framePtr = framePtr->prev;
return Result_7101;
}
N_NIMCALL(NI, countBits32)(int N_7206) {
NI Result_7207;
int V_7208;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "countBits32";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7207 = 0;
V_7208 = 0;
F.line = 16;F.filename = "sets.nim";
V_7208 = N_7206;
F.line = 17;F.filename = "sets.nim";
V_7208 = (NI32)((NU32)(V_7208) - (NU32)((NI32)((NI32)((NU32)(V_7208) >> (NU32)(((NI32) 1))) & ((NI32) 1431655765))));
F.line = 18;F.filename = "sets.nim";
V_7208 = (NI32)((NU32)((NI32)(V_7208 & ((NI32) 858993459))) + (NU32)((NI32)((NI32)((NU32)(V_7208) >> (NU32)(((NI32) 2))) & ((NI32) 858993459))));
F.line = 19;F.filename = "sets.nim";
Result_7207 = ((NI) ((NI32)((NU32)((NI32)((NU32)((NI32)((NI32)((NU32)(V_7208) + (NU32)((NI32)((NU32)(V_7208) >> (NU32)(((NI32) 4))))) & ((NI32) 252645135))) * (NU32)(((NI32) 16843009)))) >> (NU32)(((NI32) 24)))));
framePtr = framePtr->prev;
return Result_7207;
}
N_NIMCALL(NI, countBits64)(NI64 N_7211) {
NI Result_7212;
NI LOC1;
NI LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "countBits64";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7212 = 0;
F.line = 22;F.filename = "sets.nim";
LOC1 = countBits32(((NI32)(NU32)(NU64)((N_7211 & 65535))));
LOC2 = countBits32(((NI32)(NU32)(NU64)((NI64)((NU64)(N_7211) >> (NU64)(16)))));
Result_7212 = (NI64)(LOC1 + LOC2);
framePtr = framePtr->prev;
return Result_7212;
}
N_NIMCALL(NI, cardSet)(TY7202 S_7215, NI Len_7216) {
NI Result_7217;
NI I_7225;
NI HEX3Atmp_20046;
NI Res_20048;
NI LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "cardSet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7217 = 0;
F.line = 26;F.filename = "sets.nim";
Result_7217 = 0;
I_7225 = 0;
HEX3Atmp_20046 = 0;
F.line = 27;F.filename = "sets.nim";
HEX3Atmp_20046 = (NI64)(Len_7216 - 1);
Res_20048 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20048 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20048 <= HEX3Atmp_20046)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_7225 = Res_20048;
F.line = 28;F.filename = "sets.nim";
LOC2 = countBits32(((int) (((NI)(NU)(NU8)(S_7215[(I_7225)-0])))));
Result_7217 += LOC2;
F.line = 1024;F.filename = "system.nim";
Res_20048 += 1;
} LA1: ;
framePtr = framePtr->prev;
return Result_7217;
}
N_NIMCALL(void, Createthread_8210)(TY8202* T_8213, TY8204 Fn_8214) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "createThread";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Destroythread_8215)(TY8202* T_8218) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "destroyThread";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Getmaxmem_8922)(TY8874* A_8925) {
NI Result_8926;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getMaxMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8926 = 0;
F.line = 169;F.filename = "alloc.nim";
F.line = 169;F.filename = "alloc.nim";
Result_8926 = (((*A_8925).Currmem >= (*A_8925).Maxmem) ? (*A_8925).Currmem : (*A_8925).Maxmem);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_8926;
}
N_NIMCALL(NIM_BOOL, Containsorincl_9056)(TY8811* S_9059, NI Key_9060) {
NIM_BOOL Result_9061;
TY8807* T_9062;
NI U_9074;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ContainsOrIncl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9061 = 0;
T_9062 = 0;
F.line = 224;F.filename = "alloc.nim";
T_9062 = Intsetget_8974(&(*S_9059), (NI64)((NU64)(Key_9060) >> (NU64)(9)));
F.line = 225;F.filename = "alloc.nim";
if (!!((T_9062 == NIM_NIL))) goto LA2;
U_9074 = 0;
F.line = 226;F.filename = "alloc.nim";
U_9074 = (NI64)(Key_9060 & 511);
F.line = 227;F.filename = "alloc.nim";
Result_9061 = !(((NI64)((*T_9062).Bits[((NI64)((NU64)(U_9074) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_9074 & 63)))) == 0));
F.line = 228;F.filename = "alloc.nim";
if (!!(Result_9061)) goto LA5;
F.line = 229;F.filename = "alloc.nim";
(*T_9062).Bits[((NI64)((NU64)(U_9074) >> (NU64)(6)))-0] = (NI64)((*T_9062).Bits[((NI64)((NU64)(U_9074) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_9074 & 63))));
LA5: ;
goto LA1;
LA2: ;
F.line = 232;F.filename = "alloc.nim";
Incl_9031(S_9059, Key_9060);
F.line = 233;F.filename = "alloc.nim";
Result_9061 = NIM_FALSE;
LA1: ;
framePtr = framePtr->prev;
return Result_9061;
}
N_NIMCALL(void, Writefreelist_9167)(TY8874* A_9169) {
TY8834* It_9170;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "writeFreeList";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
It_9170 = 0;
F.line = 300;F.filename = "alloc.nim";
It_9170 = (*A_9169).Freechunkslist;
F.line = 301;F.filename = "alloc.nim";
fprintf(stdout, "freeChunksList: %p\012", It_9170);
F.line = 302;F.filename = "alloc.nim";
while (1) {
if (!!((It_9170 == NIM_NIL))) goto LA1;
F.line = 303;F.filename = "alloc.nim";
fprintf(stdout, "it: %p, next: %p, prev: %p\012", It_9170, (*It_9170).Next, (*It_9170).Prev);
F.line = 305;F.filename = "alloc.nim";
It_9170 = (*It_9170).Next;
} LA1: ;
framePtr = framePtr->prev;
}
static N_INLINE(NI, Getcellsize_9790)(void* P_9792) {
NI Result_9793;
TY8830* C_9794;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getCellSize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9793 = 0;
C_9794 = 0;
F.line = 432;F.filename = "alloc.nim";
C_9794 = Pageaddr_9085(P_9792);
F.line = 433;F.filename = "alloc.nim";
Result_9793 = (*C_9794).Size;
framePtr = framePtr->prev;
return Result_9793;
}
N_NIMCALL(NI, Ptrsize_10433)(void* P_10435) {
NI Result_10436;
void* X_10437;
TY8830* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ptrSize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10436 = 0;
X_10437 = 0;
F.line = 552;F.filename = "alloc.nim";
X_10437 = ((void*) ((NI64)((NU64)(((NI) (P_10435))) - (NU64)(((NI)sizeof(TY8822))))));
F.line = 553;F.filename = "alloc.nim";
LOC1 = Pageaddr_9085(X_10437);
Result_10436 = (NI64)((*LOC1).Size - ((NI)sizeof(TY8822)));
framePtr = framePtr->prev;
return Result_10436;
}
N_NOCONV(void*, Realloc_1956)(void* P_1958, NI Newsize_1959) {
void* Result_10442;
NI LOC7;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "realloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10442 = 0;
F.line = 556;F.filename = "alloc.nim";
if (!(0 < Newsize_1959)) goto LA2;
F.line = 557;F.filename = "alloc.nim";
Result_10442 = Alloc_1950(Newsize_1959);
F.line = 558;F.filename = "alloc.nim";
if (!!((P_1958 == NIM_NIL))) goto LA5;
F.line = 559;F.filename = "alloc.nim";
LOC7 = Ptrsize_10433(P_1958);
memcpy(Result_10442, P_1958, LOC7);
F.line = 560;F.filename = "alloc.nim";
Dealloc_1960(P_1958);
LA5: ;
goto LA1;
LA2: ;
if (!!((P_1958 == NIM_NIL))) goto LA8;
F.line = 562;F.filename = "alloc.nim";
Dealloc_1960(P_1958);
goto LA1;
LA8: ;
LA1: ;
framePtr = framePtr->prev;
return Result_10442;
}
N_NIMCALL(NI, Countfreemem_10445)(void) {
NI Result_10447;
TY8834* It_10448;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "countFreeMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10447 = 0;
It_10448 = 0;
F.line = 566;F.filename = "alloc.nim";
It_10448 = Allocator_8929.Freechunkslist;
F.line = 567;F.filename = "alloc.nim";
while (1) {
if (!!((It_10448 == NIM_NIL))) goto LA1;
F.line = 568;F.filename = "alloc.nim";
Result_10447 += (*It_10448).Sup.Size;
F.line = 569;F.filename = "alloc.nim";
It_10448 = (*It_10448).Next;
} LA1: ;
framePtr = framePtr->prev;
return Result_10447;
}
static N_INLINE(NIM_BOOL, Contains_10836)(TY10818* S_10838, TY10802* C_10839) {
NIM_BOOL Result_10840;
NI I_10848;
NI HEX3Atmp_20056;
NI Res_20058;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10840 = 0;
I_10848 = 0;
HEX3Atmp_20056 = 0;
F.line = 43;F.filename = "cellsets.nim";
HEX3Atmp_20056 = (NI64)((*S_10838).Len - 1);
Res_20058 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20058 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20058 <= HEX3Atmp_20056)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_10848 = Res_20058;
F.line = 44;F.filename = "cellsets.nim";
if (!((*S_10838).D[(I_10848)-0] == C_10839)) goto LA3;
F.line = 44;F.filename = "cellsets.nim";
F.line = 44;F.filename = "cellsets.nim";
Result_10840 = NIM_TRUE;
goto BeforeRet;
LA3: ;
F.line = 1024;F.filename = "system.nim";
Res_20058 += 1;
} LA1: ;
F.line = 45;F.filename = "cellsets.nim";
F.line = 45;F.filename = "cellsets.nim";
Result_10840 = NIM_FALSE;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10840;
}
N_NIMCALL(void, Deinit_10883)(TY10818* S_10886) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "deinit";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 64;F.filename = "cellsets.nim";
Dealloc_1960(((void*) ((*S_10886).D)));
F.line = 65;F.filename = "cellsets.nim";
(*S_10886).D = NIM_NIL;
F.line = 66;F.filename = "cellsets.nim";
(*S_10886).Len = 0;
F.line = 67;F.filename = "cellsets.nim";
(*S_10886).Cap = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(TNimType*, extGetCellType)(void* C_11257) {
TNimType* Result_11258;
TY10802* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "extGetCellType";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11258 = 0;
F.line = 107;F.filename = "gc.nim";
LOC1 = Usrtocell_11236(C_11257);
Result_11258 = (*LOC1).Typ;
framePtr = framePtr->prev;
return Result_11258;
}
N_NIMCALL(NI, getRefcount)(void* P_11261) {
NI Result_11262;
TY10802* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "internRefcount";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11262 = 0;
F.line = 110;F.filename = "gc.nim";
LOC1 = Usrtocell_11236(P_11261);
Result_11262 = (NI64)((NU64)(((NI) ((*LOC1).Refcount))) >> (NU64)(3));
framePtr = framePtr->prev;
return Result_11262;
}
static N_INLINE(void, nimGCref)(void* P_12008) {
TY10802* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimGCref";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 230;F.filename = "gc.nim";
LOC1 = Usrtocell_11236(P_12008);
Incref_12002(LOC1);
framePtr = framePtr->prev;
}
static N_INLINE(void, nimGCunref)(void* P_12011) {
TY10802* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimGCunref";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 231;F.filename = "gc.nim";
LOC1 = Usrtocell_11236(P_12011);
Decref_11864(LOC1);
framePtr = framePtr->prev;
}
N_NOINLINE(NIM_BOOL, Isonstack_11809)(void* P_11811) {
NIM_BOOL Result_15609;
void* volatile Stacktop_15610;
NI B_15611;
NI A_15613;
NI X_15614;
NIM_BOOL LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "IsOnStack";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_15609 = 0;
Stacktop_15610 = 0;
B_15611 = 0;
F.line = 574;F.filename = "gc.nim";
B_15611 = ((NI) (Stackbottom_11209));
A_15613 = 0;
F.line = 575;F.filename = "gc.nim";
A_15613 = ((NI) (&Stacktop_15610));
X_15614 = 0;
F.line = 576;F.filename = "gc.nim";
X_15614 = ((NI) (P_11811));
F.line = 577;F.filename = "gc.nim";
LOC1 = ((NU64)(A_15613) <= (NU64)(X_15614));
if (!(LOC1)) goto LA2;
LOC1 = ((NU64)(X_15614) <= (NU64)(B_15611));
LA2: ;
Result_15609 = LOC1;
framePtr = framePtr->prev;
return Result_15609;
}
N_NIMCALL(void, unsureAsgnRef)(void** Dest_12026, void* Src_12027) {
NIM_BOOL LOC2;
TY10802* LOC8;
TY10802* LOC12;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "unsureAsgnRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 257;F.filename = "gc.nim";
LOC2 = Isonstack_11809(((void*) (Dest_12026)));
if (!!(LOC2)) goto LA3;
F.line = 258;F.filename = "gc.nim";
if (!!((Src_12027 == NIM_NIL))) goto LA6;
F.line = 258;F.filename = "gc.nim";
LOC8 = Usrtocell_11236(Src_12027);
Incref_12002(LOC8);
LA6: ;
F.line = 259;F.filename = "gc.nim";
if (!!(((*Dest_12026) == NIM_NIL))) goto LA10;
F.line = 259;F.filename = "gc.nim";
LOC12 = Usrtocell_11236((*Dest_12026));
Decref_11864(LOC12);
LA10: ;
LA3: ;
F.line = 260;F.filename = "gc.nim";
(*Dest_12026) = Src_12027;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Gcsetstrategy_2675)(NU8 Strategy_2677) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_setStrategy";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 661;F.filename = "gc.nim";
switch (Strategy_2677) {
case ((NU8) 0):
break;
case ((NU8) 1):
break;
case ((NU8) 3):
break;
case ((NU8) 2):
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Gcenablemarkandsweep_2678)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_enableMarkAndSweep";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 668;F.filename = "gc.nim";
Cyclethreshold_11211 = 4194304;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Gcdisablemarkandsweep_2680)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_disableMarkAndSweep";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 671;F.filename = "gc.nim";
Cyclethreshold_11211 = IL64(9223372036854775806);
framePtr = framePtr->prev;
}
N_NIMCALL(void, Gcfullcollect_2667)(void) {
NI Oldthreshold_16619;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_fullCollect";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 675;F.filename = "gc.nim";
Lock_11213(&Gch_11210);
Oldthreshold_16619 = 0;
F.line = 676;F.filename = "gc.nim";
Oldthreshold_16619 = Cyclethreshold_11211;
F.line = 677;F.filename = "gc.nim";
Cyclethreshold_11211 = 0;
F.line = 678;F.filename = "gc.nim";
Collectct_11805(&Gch_11210);
F.line = 679;F.filename = "gc.nim";
Cyclethreshold_11211 = Oldthreshold_16619;
F.line = 680;F.filename = "gc.nim";
Unlock_11219(&Gch_11210);
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, Gcgetstatistics_2682)(void) {
NimStringDesc* Result_16624;
NimStringDesc* LOC1;
NI LOC2;
NimStringDesc* LOC3;
NI LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_getStatistics";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_16624 = 0;
F.line = 683;F.filename = "gc.nim";
Gcdisable_2663();
F.line = 684;F.filename = "gc.nim";
LOC1 = 0;
LOC2 = Gettotalmem_2021();
LOC3 = 0;
LOC3 = nimIntToStr(LOC2);
LOC4 = Getoccupiedmem_2017();
LOC5 = 0;
LOC5 = nimIntToStr(LOC4);
LOC6 = 0;
LOC6 = nimIntToStr(Gch_11210.Stat.Stackscans);
LOC7 = 0;
LOC7 = nimIntToStr(Gch_11210.Stat.Maxstackcells);
LOC8 = 0;
LOC8 = nimIntToStr(Gch_11210.Stat.Cyclecollections);
LOC9 = 0;
LOC9 = nimIntToStr(Gch_11210.Stat.Maxthreshold);
LOC10 = 0;
LOC10 = nimIntToStr(Gch_11210.Zct.Cap);
LOC11 = 0;
LOC11 = nimIntToStr(Gch_11210.Stat.Cycletablesize);
LOC12 = 0;
LOC12 = nimIntToStr(Gch_11210.Stat.Maxstacksize);
LOC1 = rawNewString(LOC3->Sup.len + LOC5->Sup.len + LOC6->Sup.len + LOC7->Sup.len + LOC8->Sup.len + LOC9->Sup.len + LOC10->Sup.len + LOC11->Sup.len + LOC12->Sup.len + 196);
appendString(LOC1, ((NimStringDesc*) &TMP20354));
appendString(LOC1, LOC3);
appendString(LOC1, ((NimStringDesc*) &TMP20355));
appendString(LOC1, LOC5);
appendString(LOC1, ((NimStringDesc*) &TMP20356));
appendString(LOC1, LOC6);
appendString(LOC1, ((NimStringDesc*) &TMP20357));
appendString(LOC1, LOC7);
appendString(LOC1, ((NimStringDesc*) &TMP20358));
appendString(LOC1, LOC8);
appendString(LOC1, ((NimStringDesc*) &TMP20359));
appendString(LOC1, LOC9);
appendString(LOC1, ((NimStringDesc*) &TMP20360));
appendString(LOC1, LOC10);
appendString(LOC1, ((NimStringDesc*) &TMP20361));
appendString(LOC1, LOC11);
appendString(LOC1, ((NimStringDesc*) &TMP20362));
appendString(LOC1, LOC12);
Result_16624 = LOC1;
F.line = 694;F.filename = "gc.nim";
Gcenable_2665();
framePtr = framePtr->prev;
return Result_16624;
}
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_17411, NimStringDesc* B_17412) {
NI Result_17413;
int LOC10;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "cmpStrings";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17413 = 0;
F.line = 26;F.filename = "sysstr.nim";
if (!(A_17411 == B_17412)) goto LA2;
F.line = 26;F.filename = "sysstr.nim";
F.line = 26;F.filename = "sysstr.nim";
Result_17413 = 0;
goto BeforeRet;
LA2: ;
F.line = 27;F.filename = "sysstr.nim";
if (!(A_17411 == NIM_NIL)) goto LA5;
F.line = 27;F.filename = "sysstr.nim";
F.line = 27;F.filename = "sysstr.nim";
Result_17413 = -1;
goto BeforeRet;
LA5: ;
F.line = 28;F.filename = "sysstr.nim";
if (!(B_17412 == NIM_NIL)) goto LA8;
F.line = 28;F.filename = "sysstr.nim";
F.line = 28;F.filename = "sysstr.nim";
Result_17413 = 1;
goto BeforeRet;
LA8: ;
F.line = 29;F.filename = "sysstr.nim";
F.line = 29;F.filename = "sysstr.nim";
LOC10 = strcmp(((NCSTRING) ((*A_17411).data)), ((NCSTRING) ((*B_17412).data)));
Result_17413 = ((NI) (LOC10));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17413;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_17447, NimStringDesc* B_17448) {
NIM_BOOL Result_17449;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
int LOC11;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "eqStrings";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17449 = 0;
F.line = 32;F.filename = "sysstr.nim";
if (!(A_17447 == B_17448)) goto LA2;
F.line = 32;F.filename = "sysstr.nim";
F.line = 32;F.filename = "sysstr.nim";
Result_17449 = NIM_TRUE;
goto BeforeRet;
LA2: ;
F.line = 33;F.filename = "sysstr.nim";
LOC5 = (A_17447 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_17448 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
F.line = 33;F.filename = "sysstr.nim";
F.line = 33;F.filename = "sysstr.nim";
Result_17449 = NIM_FALSE;
goto BeforeRet;
LA7: ;
F.line = 34;F.filename = "sysstr.nim";
F.line = 34;F.filename = "sysstr.nim";
LOC9 = ((*A_17447).Sup.len == (*B_17448).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_17447).data)), ((NCSTRING) ((*B_17448).data)), ((int) ((NI64)((*A_17447).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_17449 = LOC9;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17449;
}
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_17495) {
NimStringDesc* Result_17496;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "mnewString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17496 = 0;
F.line = 46;F.filename = "sysstr.nim";
Result_17496 = rawNewString(Len_17495);
F.line = 47;F.filename = "sysstr.nim";
(*Result_17496).Sup.len = Len_17495;
framePtr = framePtr->prev;
return Result_17496;
}
N_NIMCALL(NI, hashString)(NimStringDesc* S_17523) {
NI Result_17524;
NI H_17525;
NI I_17535;
NI HEX3Atmp_20199;
NI Res_20201;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "hashString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17524 = 0;
H_17525 = 0;
F.line = 67;F.filename = "sysstr.nim";
H_17525 = 0;
I_17535 = 0;
HEX3Atmp_20199 = 0;
F.line = 68;F.filename = "sysstr.nim";
HEX3Atmp_20199 = (NI64)(S_17523->Sup.len - 1);
Res_20201 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20201 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20201 <= HEX3Atmp_20199)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_17535 = Res_20201;
F.line = 69;F.filename = "sysstr.nim";
H_17525 = (NI64)((NU64)(H_17525) + (NU64)(((NU8)(S_17523->data[I_17535]))));
F.line = 70;F.filename = "sysstr.nim";
H_17525 = (NI64)((NU64)(H_17525) + (NU64)((NI64)((NU64)(H_17525) << (NU64)(10))));
F.line = 71;F.filename = "sysstr.nim";
H_17525 = (NI64)(H_17525 ^ (NI64)((NU64)(H_17525) >> (NU64)(6)));
F.line = 1024;F.filename = "system.nim";
Res_20201 += 1;
} LA1: ;
F.line = 72;F.filename = "sysstr.nim";
H_17525 = (NI64)((NU64)(H_17525) + (NU64)((NI64)((NU64)(H_17525) << (NU64)(3))));
F.line = 73;F.filename = "sysstr.nim";
H_17525 = (NI64)(H_17525 ^ (NI64)((NU64)(H_17525) >> (NU64)(11)));
F.line = 74;F.filename = "sysstr.nim";
H_17525 = (NI64)((NU64)(H_17525) + (NU64)((NI64)((NU64)(H_17525) << (NU64)(15))));
F.line = 75;F.filename = "sysstr.nim";
Result_17524 = H_17525;
framePtr = framePtr->prev;
return Result_17524;
}
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_17543, NI Start_17544, NI Last_17545) {
NimStringDesc* Result_17546;
NI Start_17549;
NI Len_17552;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "copyStrLast";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17546 = 0;
Start_17549 = 0;
F.line = 78;F.filename = "sysstr.nim";
Start_17549 = ((Start_17544 >= 0) ? Start_17544 : 0);
Len_17552 = 0;
F.line = 79;F.filename = "sysstr.nim";
Len_17552 = (NI64)((NI64)(((Last_17545 <= (NI64)((*S_17543).Sup.len - 1)) ? Last_17545 : (NI64)((*S_17543).Sup.len - 1)) - Start_17549) + 1);
F.line = 80;F.filename = "sysstr.nim";
if (!(0 < Len_17552)) goto LA2;
F.line = 81;F.filename = "sysstr.nim";
Result_17546 = rawNewString(Len_17552);
F.line = 82;F.filename = "sysstr.nim";
(*Result_17546).Sup.len = Len_17552;
F.line = 83;F.filename = "sysstr.nim";
memcpy(((NCSTRING) ((*Result_17546).data)), ((NCSTRING) (&(*S_17543).data[(Start_17549)-0])), ((int) ((NI64)(Len_17552 * 1))));
F.line = 84;F.filename = "sysstr.nim";
(*Result_17546).data[(Len_17552)-0] = 0;
goto LA1;
LA2: ;
F.line = 86;F.filename = "sysstr.nim";
Result_17546 = mnewString(0);
LA1: ;
framePtr = framePtr->prev;
return Result_17546;
}
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_17558, NI Start_17559) {
NimStringDesc* Result_17560;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "copyStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17560 = 0;
F.line = 89;F.filename = "sysstr.nim";
F.line = 89;F.filename = "sysstr.nim";
Result_17560 = copyStrLast(S_17558, Start_17559, (NI64)((*S_17558).Sup.len - 1));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17560;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17609, NIM_CHAR C_17610) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 154;F.filename = "sysstr.nim";
(*Dest_17609).data[((*Dest_17609).Sup.len)-0] = C_17610;
F.line = 155;F.filename = "sysstr.nim";
(*Dest_17609).data[((NI64)((*Dest_17609).Sup.len + 1))-0] = 0;
F.line = 156;F.filename = "sysstr.nim";
(*Dest_17609).Sup.len += 1;
framePtr = framePtr->prev;
}
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_17635, NI Elemsize_17636) {
TGenericSeq* Result_17637;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "incrSeq";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17637 = 0;
F.line = 186;F.filename = "sysstr.nim";
Result_17637 = Seq_17635;
F.line = 187;F.filename = "sysstr.nim";
if (!((*Result_17637).space <= (*Result_17637).len)) goto LA2;
F.line = 188;F.filename = "sysstr.nim";
(*Result_17637).space = Resize_17401((*Result_17637).space);
F.line = 189;F.filename = "sysstr.nim";
LOC4 = Growobj_13007(((void*) (Result_17637)), (NI64)((NI64)(Elemsize_17636 * (*Result_17637).space) + 16));
Result_17637 = ((TGenericSeq*) (LOC4));
LA2: ;
F.line = 197;F.filename = "sysstr.nim";
(*Result_17637).len += 1;
framePtr = framePtr->prev;
return Result_17637;
}
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17803, NI Elemsize_17804, NI Newlen_17805) {
TGenericSeq* Result_17806;
NI LOC4;
void* LOC5;
NI I_17820;
NI HEX3Atmp_20205;
NI Res_20207;
TNimType* LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "setLengthSeq";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17806 = 0;
F.line = 209;F.filename = "sysstr.nim";
Result_17806 = Seq_17803;
F.line = 210;F.filename = "sysstr.nim";
if (!((*Result_17806).space < Newlen_17805)) goto LA2;
F.line = 211;F.filename = "sysstr.nim";
LOC4 = Resize_17401((*Result_17806).space);
(*Result_17806).space = ((LOC4 >= Newlen_17805) ? LOC4 : Newlen_17805);
F.line = 212;F.filename = "sysstr.nim";
LOC5 = Growobj_13007(((void*) (Result_17806)), (NI64)((NI64)(Elemsize_17804 * (*Result_17806).space) + 16));
Result_17806 = ((TGenericSeq*) (LOC5));
goto LA1;
LA2: ;
if (!(Newlen_17805 < (*Result_17806).len)) goto LA6;
I_17820 = 0;
HEX3Atmp_20205 = 0;
F.line = 217;F.filename = "sysstr.nim";
HEX3Atmp_20205 = (NI64)((*Result_17806).len - 1);
Res_20207 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20207 = Newlen_17805;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20207 <= HEX3Atmp_20205)) goto LA8;
F.line = 1021;F.filename = "system.nim";
I_17820 = Res_20207;
F.line = 218;F.filename = "sysstr.nim";
LOC9 = extGetCellType(((void*) (Result_17806)));
Forallchildrenaux_11820(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Result_17806))) + (NU64)(16))) + (NU64)((NI64)((NU64)(I_17820) * (NU64)(Elemsize_17804)))))), (*LOC9).base, ((NU8) 0));
F.line = 1024;F.filename = "system.nim";
Res_20207 += 1;
} LA8: ;
F.line = 222;F.filename = "sysstr.nim";
zeroMem(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Result_17806))) + (NU64)(16))) + (NU64)((NI64)((NU64)(Newlen_17805) * (NU64)(Elemsize_17804)))))), (NI64)((NU64)((NI64)((NU64)((*Result_17806).len) - (NU64)(Newlen_17805))) * (NU64)(Elemsize_17804)));
goto LA1;
LA6: ;
LA1: ;
F.line = 224;F.filename = "sysstr.nim";
(*Result_17806).len = Newlen_17805;
framePtr = framePtr->prev;
return Result_17806;
}
N_NIMCALL(NimStringDesc*, nimBoolToStr)(NIM_BOOL X_18324) {
NimStringDesc* Result_18325;
NimStringDesc* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimBoolToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18325 = 0;
F.line = 271;F.filename = "sysstr.nim";
F.line = 271;F.filename = "sysstr.nim";
LOC1 = 0;
if (!X_18324) goto LA3;
LOC1 = copyString(((NimStringDesc*) &TMP20321));
goto LA2;
LA3: ;
LOC1 = copyString(((NimStringDesc*) &TMP20322));
LA2: ;
Result_18325 = LOC1;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18325;
}
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR X_18328) {
NimStringDesc* Result_18329;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimCharToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18329 = 0;
F.line = 274;F.filename = "sysstr.nim";
Result_18329 = mnewString(1);
F.line = 275;F.filename = "sysstr.nim";
Result_18329->data[0] = X_18328;
framePtr = framePtr->prev;
return Result_18329;
}
N_NIMCALL(NI, binaryStrSearch)(NimStringDesc** X_18333, NI X_18333Len0, NimStringDesc* Y_18334) {
NI Result_18335;
NI A_18336;
NI B_18347;
NI Mid_18350;
NIM_BOOL LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "binaryStrSearch";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18335 = 0;
A_18336 = 0;
F.line = 279;F.filename = "sysstr.nim";
A_18336 = 0;
B_18347 = 0;
F.line = 280;F.filename = "sysstr.nim";
B_18347 = X_18333Len0;
F.line = 281;F.filename = "sysstr.nim";
while (1) {
if (!(A_18336 < B_18347)) goto LA1;
Mid_18350 = 0;
F.line = 282;F.filename = "sysstr.nim";
Mid_18350 = (NI64)((NI64)(A_18336 + B_18347) / 2);
F.line = 283;F.filename = "sysstr.nim";
if (!(cmpStrings(X_18333[Mid_18350], Y_18334) < 0)) goto LA3;
F.line = 284;F.filename = "sysstr.nim";
A_18336 = (NI64)(Mid_18350 + 1);
goto LA2;
LA3: ;
F.line = 286;F.filename = "sysstr.nim";
B_18347 = Mid_18350;
LA2: ;
} LA1: ;
F.line = 287;F.filename = "sysstr.nim";
LOC6 = (A_18336 < X_18333Len0);
if (!(LOC6)) goto LA7;
LOC6 = eqStrings(X_18333[A_18336], Y_18334);
LA7: ;
if (!LOC6) goto LA8;
F.line = 288;F.filename = "sysstr.nim";
F.line = 288;F.filename = "sysstr.nim";
Result_18335 = A_18336;
goto BeforeRet;
goto LA5;
LA8: ;
F.line = 290;F.filename = "sysstr.nim";
F.line = 290;F.filename = "sysstr.nim";
Result_18335 = -1;
goto BeforeRet;
LA5: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18335;
}
N_NIMCALL(void, genericAssign)(void* Dest_18365, void* Src_18366, TNimType* Mt_18367) {
NI D_18401;
NI S_18402;
void* S2_18414;
TGenericSeq* Seq_18415;
void** X_18416;
void* LOC4;
NI Dst_18417;
NI I_18425;
NI HEX3Atmp_20232;
NI Res_20234;
TGenericSeq* Dstseq_18426;
NI I_18434;
NI HEX3Atmp_20238;
NI Res_20240;
void* S2_18435;
NimStringDesc* LOC10;
void** X_18436;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "genericAssign";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18401 = 0;
F.line = 33;F.filename = "assign.nim";
D_18401 = ((NI) (Dest_18365));
S_18402 = 0;
F.line = 34;F.filename = "assign.nim";
S_18402 = ((NI) (Src_18366));
F.line = 36;F.filename = "assign.nim";
F.line = 37;F.filename = "assign.nim";
switch ((*Mt_18367).kind) {
case ((NU8) 24):
S2_18414 = 0;
F.line = 39;F.filename = "assign.nim";
S2_18414 = (*((void**) (Src_18366)));
Seq_18415 = 0;
F.line = 40;F.filename = "assign.nim";
Seq_18415 = ((TGenericSeq*) (S2_18414));
F.line = 41;F.filename = "assign.nim";
if (!(S2_18414 == NIM_NIL)) goto LA2;
X_18416 = 0;
F.line = 42;F.filename = "assign.nim";
X_18416 = ((void**) (Dest_18365));
F.line = 43;F.filename = "assign.nim";
(*X_18416) = NIM_NIL;
F.line = 44;F.filename = "assign.nim";
goto BeforeRet;
LA2: ;
F.line = 45;F.filename = "assign.nim";
F.line = 46;F.filename = "assign.nim";
LOC4 = newObj(Mt_18367, (NI64)((NI64)((*Seq_18415).len * (*(*Mt_18367).base).size) + 16));
unsureAsgnRef(((void**) (Dest_18365)), LOC4);
Dst_18417 = 0;
F.line = 48;F.filename = "assign.nim";
Dst_18417 = ((NI) ((*((void**) (Dest_18365)))));
I_18425 = 0;
HEX3Atmp_20232 = 0;
F.line = 49;F.filename = "assign.nim";
HEX3Atmp_20232 = (NI64)((*Seq_18415).len - 1);
Res_20234 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20234 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20234 <= HEX3Atmp_20232)) goto LA5;
F.line = 1021;F.filename = "system.nim";
I_18425 = Res_20234;
F.line = 50;F.filename = "assign.nim";
genericAssign(((void*) ((NI64)((NU64)((NI64)((NU64)(Dst_18417) + (NU64)((NI64)((NU64)(I_18425) * (NU64)((*(*Mt_18367).base).size))))) + (NU64)(16)))), ((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (S2_18414))) + (NU64)((NI64)((NU64)(I_18425) * (NU64)((*(*Mt_18367).base).size))))) + (NU64)(16)))), (*Mt_18367).base);
F.line = 1024;F.filename = "system.nim";
Res_20234 += 1;
} LA5: ;
Dstseq_18426 = 0;
F.line = 55;F.filename = "assign.nim";
Dstseq_18426 = ((TGenericSeq*) (Dst_18417));
F.line = 56;F.filename = "assign.nim";
(*Dstseq_18426).len = (*Seq_18415).len;
F.line = 57;F.filename = "assign.nim";
(*Dstseq_18426).space = (*Seq_18415).len;
break;
case ((NU8) 17):
case ((NU8) 18):
case ((NU8) 40):
F.line = 60;F.filename = "assign.nim";
Genericassignaux_18368(Dest_18365, Src_18366, (*Mt_18367).node);
break;
case ((NU8) 16):
case ((NU8) 4):
I_18434 = 0;
HEX3Atmp_20238 = 0;
F.line = 62;F.filename = "assign.nim";
HEX3Atmp_20238 = (NI64)((NI64)((*Mt_18367).size / (*(*Mt_18367).base).size) - 1);
Res_20240 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20240 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20240 <= HEX3Atmp_20238)) goto LA6;
F.line = 1021;F.filename = "system.nim";
I_18434 = Res_20240;
F.line = 63;F.filename = "assign.nim";
genericAssign(((void*) ((NI64)((NU64)(D_18401) + (NU64)((NI64)((NU64)(I_18434) * (NU64)((*(*Mt_18367).base).size)))))), ((void*) ((NI64)((NU64)(S_18402) + (NU64)((NI64)((NU64)(I_18434) * (NU64)((*(*Mt_18367).base).size)))))), (*Mt_18367).base);
F.line = 1024;F.filename = "system.nim";
Res_20240 += 1;
} LA6: ;
break;
case ((NU8) 28):
S2_18435 = 0;
F.line = 66;F.filename = "assign.nim";
S2_18435 = (*((void**) (S_18402)));
F.line = 67;F.filename = "assign.nim";
if (!!((S2_18435 == NIM_NIL))) goto LA8;
F.line = 68;F.filename = "assign.nim";
LOC10 = copyString(((NimStringDesc*) (S2_18435)));
unsureAsgnRef(((void**) (Dest_18365)), ((void*) (LOC10)));
goto LA7;
LA8: ;
X_18436 = 0;
F.line = 70;F.filename = "assign.nim";
X_18436 = ((void**) (Dest_18365));
F.line = 71;F.filename = "assign.nim";
(*X_18436) = NIM_NIL;
F.line = 72;F.filename = "assign.nim";
goto BeforeRet;
LA7: ;
break;
case ((NU8) 22):
F.line = 74;F.filename = "assign.nim";
unsureAsgnRef(((void**) (Dest_18365)), (*((void**) (S_18402))));
break;
default:
F.line = 76;F.filename = "assign.nim";
memcpy(Dest_18365, Src_18366, (*Mt_18367).size);
break;
}
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Genericassignaux_18368)(void* Dest_18370, void* Src_18371, TNimNode* N_18373) {
NI D_18374;
NI S_18375;
NI I_18383;
NI HEX3Atmp_20226;
NI Res_20228;
TNimNode* M_18384;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "genericAssignAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18374 = 0;
F.line = 15;F.filename = "assign.nim";
D_18374 = ((NI) (Dest_18370));
S_18375 = 0;
F.line = 16;F.filename = "assign.nim";
S_18375 = ((NI) (Src_18371));
F.line = 17;F.filename = "assign.nim";
switch ((*N_18373).kind) {
case ((NU8) 0):
F.line = 18;F.filename = "assign.nim";
break;
case ((NU8) 1):
F.line = 20;F.filename = "assign.nim";
genericAssign(((void*) ((NI64)((NU64)(D_18374) + (NU64)((*N_18373).offset)))), ((void*) ((NI64)((NU64)(S_18375) + (NU64)((*N_18373).offset)))), (*N_18373).typ);
break;
case ((NU8) 2):
I_18383 = 0;
HEX3Atmp_20226 = 0;
F.line = 23;F.filename = "assign.nim";
HEX3Atmp_20226 = (NI64)((*N_18373).len - 1);
Res_20228 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20228 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20228 <= HEX3Atmp_20226)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_18383 = Res_20228;
F.line = 24;F.filename = "assign.nim";
Genericassignaux_18368(Dest_18370, Src_18371, (*N_18373).sons[(I_18383)-0]);
F.line = 1024;F.filename = "system.nim";
Res_20228 += 1;
} LA1: ;
break;
case ((NU8) 3):
F.line = 26;F.filename = "assign.nim";
memcpy(((void*) ((NI64)((NU64)(D_18374) + (NU64)((*N_18373).offset)))), ((void*) ((NI64)((NU64)(S_18375) + (NU64)((*N_18373).offset)))), (*(*N_18373).typ).size);
M_18384 = 0;
F.line = 28;F.filename = "assign.nim";
M_18384 = Selectbranch_7263(Src_18371, N_18373);
F.line = 29;F.filename = "assign.nim";
if (!!((M_18384 == NIM_NIL))) goto LA3;
F.line = 29;F.filename = "assign.nim";
Genericassignaux_18368(Dest_18370, Src_18371, M_18384);
LA3: ;
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, genericSeqAssign)(void* Dest_18439, void* Src_18440, TNimType* Mt_18441) {
void* Src_18442;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "genericSeqAssign";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Src_18442 = 0;
F.line = 79;F.filename = "assign.nim";
Src_18442 = Src_18440;
F.line = 80;F.filename = "assign.nim";
genericAssign(Dest_18439, ((void*) (&Src_18442)), Mt_18441);
framePtr = framePtr->prev;
}
N_NIMCALL(void, genericAssignOpenArray)(void* Dest_18446, void* Src_18447, NI Len_18448, TNimType* Mt_18449) {
NI D_18450;
NI S_18451;
NI I_18459;
NI HEX3Atmp_20244;
NI Res_20246;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "genericAssignOpenArray";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18450 = 0;
F.line = 85;F.filename = "assign.nim";
D_18450 = ((NI) (Dest_18446));
S_18451 = 0;
F.line = 86;F.filename = "assign.nim";
S_18451 = ((NI) (Src_18447));
I_18459 = 0;
HEX3Atmp_20244 = 0;
F.line = 87;F.filename = "assign.nim";
HEX3Atmp_20244 = (NI64)(Len_18448 - 1);
Res_20246 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20246 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20246 <= HEX3Atmp_20244)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_18459 = Res_20246;
F.line = 88;F.filename = "assign.nim";
genericAssign(((void*) ((NI64)((NU64)(D_18450) + (NU64)((NI64)((NU64)(I_18459) * (NU64)((*(*Mt_18449).base).size)))))), ((void*) ((NI64)((NU64)(S_18451) + (NU64)((NI64)((NU64)(I_18459) * (NU64)((*(*Mt_18449).base).size)))))), (*Mt_18449).base);
F.line = 1024;F.filename = "system.nim";
Res_20246 += 1;
} LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, objectInit)(void* Dest_18462, TNimType* Typ_18463) {
NI D_18494;
TNimType** Pint_18496;
NI I_18504;
NI HEX3Atmp_20256;
NI Res_20258;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "objectInit";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18494 = 0;
F.line = 107;F.filename = "assign.nim";
D_18494 = ((NI) (Dest_18462));
F.line = 108;F.filename = "assign.nim";
switch ((*Typ_18463).kind) {
case ((NU8) 17):
Pint_18496 = 0;
F.line = 112;F.filename = "assign.nim";
Pint_18496 = ((TNimType**) (Dest_18462));
F.line = 113;F.filename = "assign.nim";
(*Pint_18496) = Typ_18463;
F.line = 114;F.filename = "assign.nim";
Objectinitaux_18464(Dest_18462, (*Typ_18463).node);
break;
case ((NU8) 18):
case ((NU8) 40):
F.line = 116;F.filename = "assign.nim";
Objectinitaux_18464(Dest_18462, (*Typ_18463).node);
break;
case ((NU8) 16):
case ((NU8) 4):
I_18504 = 0;
HEX3Atmp_20256 = 0;
F.line = 118;F.filename = "assign.nim";
HEX3Atmp_20256 = (NI64)((NI64)((*Typ_18463).size / (*(*Typ_18463).base).size) - 1);
Res_20258 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20258 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20258 <= HEX3Atmp_20256)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_18504 = Res_20258;
F.line = 119;F.filename = "assign.nim";
objectInit(((void*) ((NI64)((NU64)(D_18494) + (NU64)((NI64)(I_18504 * (*(*Typ_18463).base).size))))), (*Typ_18463).base);
F.line = 1024;F.filename = "system.nim";
Res_20258 += 1;
} LA1: ;
break;
default:
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Objectinitaux_18464)(void* Dest_18466, TNimNode* N_18468) {
NI D_18469;
NI I_18477;
NI HEX3Atmp_20250;
NI Res_20252;
TNimNode* M_18478;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "objectInitAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18469 = 0;
F.line = 93;F.filename = "assign.nim";
D_18469 = ((NI) (Dest_18466));
F.line = 94;F.filename = "assign.nim";
switch ((*N_18468).kind) {
case ((NU8) 0):
F.line = 95;F.filename = "assign.nim";
break;
case ((NU8) 1):
F.line = 96;F.filename = "assign.nim";
objectInit(((void*) ((NI64)((NU64)(D_18469) + (NU64)((*N_18468).offset)))), (*N_18468).typ);
break;
case ((NU8) 2):
I_18477 = 0;
HEX3Atmp_20250 = 0;
F.line = 98;F.filename = "assign.nim";
HEX3Atmp_20250 = (NI64)((*N_18468).len - 1);
Res_20252 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20252 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20252 <= HEX3Atmp_20250)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_18477 = Res_20252;
F.line = 99;F.filename = "assign.nim";
Objectinitaux_18464(Dest_18466, (*N_18468).sons[(I_18477)-0]);
F.line = 1024;F.filename = "system.nim";
Res_20252 += 1;
} LA1: ;
break;
case ((NU8) 3):
M_18478 = 0;
F.line = 101;F.filename = "assign.nim";
M_18478 = Selectbranch_7263(Dest_18466, N_18468);
F.line = 102;F.filename = "assign.nim";
if (!!((M_18478 == NIM_NIL))) goto LA3;
F.line = 102;F.filename = "assign.nim";
Objectinitaux_18464(Dest_18466, M_18478);
LA3: ;
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, reprInt)(NI64 X_18507) {
NimStringDesc* Result_18508;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprInt";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18508 = 0;
F.line = 15;F.filename = "repr.nim";
F.line = 15;F.filename = "repr.nim";
Result_18508 = nimInt64ToStr(X_18507);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18508;
}
N_NIMCALL(NimStringDesc*, reprFloat)(NF X_18513) {
NimStringDesc* Result_18514;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprFloat";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18514 = 0;
F.line = 16;F.filename = "repr.nim";
F.line = 16;F.filename = "repr.nim";
Result_18514 = nimFloatToStr(X_18513);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18514;
}
N_NIMCALL(NimStringDesc*, reprPointer)(void* X_18517) {
NimStringDesc* Result_18518;
TY18262 Buf_18521;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprPointer";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18518 = 0;
memset((void*)&Buf_18521, 0, sizeof(Buf_18521));
F.line = 20;F.filename = "repr.nim";
sprintf(((NCSTRING) (Buf_18521)), "%p", X_18517);
F.line = 21;F.filename = "repr.nim";
F.line = 21;F.filename = "repr.nim";
Result_18518 = cstrToNimstr(((NCSTRING) (Buf_18521)));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18518;
}
N_NIMCALL(void, Reprstraux_18522)(NimStringDesc** Result_18525, NimStringDesc* S_18526) {
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NIM_CHAR C_18537;
NI I_20263;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprStrAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 24;F.filename = "repr.nim";
if (!(((void*) (S_18526)) == NIM_NIL)) goto LA2;
F.line = 25;F.filename = "repr.nim";
(*Result_18525) = resizeString((*Result_18525), 3);
appendString((*Result_18525), ((NimStringDesc*) &TMP20363));
F.line = 26;F.filename = "repr.nim";
goto BeforeRet;
LA2: ;
F.line = 27;F.filename = "repr.nim";
LOC4 = 0;
LOC5 = 0;
LOC5 = reprPointer(((void*) (S_18526)));
LOC4 = rawNewString(LOC5->Sup.len + 1);
appendString(LOC4, LOC5);
appendString(LOC4, ((NimStringDesc*) &TMP20364));
(*Result_18525) = resizeString((*Result_18525), LOC4->Sup.len + 0);
appendString((*Result_18525), LOC4);
C_18537 = 0;
I_20263 = 0;
F.line = 1079;F.filename = "system.nim";
I_20263 = 0;
F.line = 1080;F.filename = "system.nim";
while (1) {
if (!(I_20263 < S_18526->Sup.len)) goto LA6;
F.line = 1081;F.filename = "system.nim";
C_18537 = S_18526->data[I_20263];
F.line = 29;F.filename = "repr.nim";
switch (((NU8)(C_18537))) {
case 34:
F.line = 30;F.filename = "repr.nim";
(*Result_18525) = resizeString((*Result_18525), 2);
appendString((*Result_18525), ((NimStringDesc*) &TMP20365));
break;
case 92:
F.line = 31;F.filename = "repr.nim";
(*Result_18525) = resizeString((*Result_18525), 2);
appendString((*Result_18525), ((NimStringDesc*) &TMP20366));
break;
case 10:
F.line = 32;F.filename = "repr.nim";
(*Result_18525) = resizeString((*Result_18525), 6);
appendString((*Result_18525), ((NimStringDesc*) &TMP20367));
break;
case 128 ... 255:
case 0 ... 9:
case 11 ... 31:
F.line = 34;F.filename = "repr.nim";
LOC7 = 0;
LOC8 = 0;
LOC8 = reprInt(((NI64) (((NU8)(C_18537)))));
LOC7 = rawNewString(LOC8->Sup.len + 1);
appendString(LOC7, ((NimStringDesc*) &TMP20368));
appendString(LOC7, LOC8);
(*Result_18525) = resizeString((*Result_18525), LOC7->Sup.len + 0);
appendString((*Result_18525), LOC7);
break;
default:
F.line = 35;F.filename = "repr.nim";
(*Result_18525) = addChar((*Result_18525), C_18537);
break;
}
F.line = 1082;F.filename = "system.nim";
I_20263 += 1;
} LA6: ;
F.line = 36;F.filename = "repr.nim";
(*Result_18525) = resizeString((*Result_18525), 1);
appendString((*Result_18525), ((NimStringDesc*) &TMP20364));
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, reprStr)(NimStringDesc* S_18553) {
NimStringDesc* Result_18554;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18554 = 0;
F.line = 39;F.filename = "repr.nim";
Result_18554 = copyString(((NimStringDesc*) &TMP20320));
F.line = 40;F.filename = "repr.nim";
Reprstraux_18522(&Result_18554, S_18553);
framePtr = framePtr->prev;
return Result_18554;
}
N_NIMCALL(NimStringDesc*, reprBool)(NIM_BOOL X_18558) {
NimStringDesc* Result_18559;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprBool";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18559 = 0;
F.line = 43;F.filename = "repr.nim";
if (!X_18558) goto LA2;
F.line = 43;F.filename = "repr.nim";
Result_18559 = copyString(((NimStringDesc*) &TMP20321));
goto LA1;
LA2: ;
F.line = 44;F.filename = "repr.nim";
Result_18559 = copyString(((NimStringDesc*) &TMP20322));
LA1: ;
framePtr = framePtr->prev;
return Result_18559;
}
N_NIMCALL(NimStringDesc*, reprChar)(NIM_CHAR X_18562) {
NimStringDesc* Result_18563;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18563 = 0;
F.line = 47;F.filename = "repr.nim";
Result_18563 = copyString(((NimStringDesc*) &TMP20369));
F.line = 48;F.filename = "repr.nim";
switch (((NU8)(X_18562))) {
case 34:
F.line = 49;F.filename = "repr.nim";
Result_18563 = resizeString(Result_18563, 2);
appendString(Result_18563, ((NimStringDesc*) &TMP20365));
break;
case 92:
F.line = 50;F.filename = "repr.nim";
Result_18563 = resizeString(Result_18563, 2);
appendString(Result_18563, ((NimStringDesc*) &TMP20366));
break;
case 128 ... 255:
case 0 ... 31:
F.line = 51;F.filename = "repr.nim";
LOC1 = 0;
LOC2 = 0;
LOC2 = reprInt(((NI64) (((NU8)(X_18562)))));
LOC1 = rawNewString(LOC2->Sup.len + 1);
appendString(LOC1, ((NimStringDesc*) &TMP20368));
appendString(LOC1, LOC2);
Result_18563 = resizeString(Result_18563, LOC1->Sup.len + 0);
appendString(Result_18563, LOC1);
break;
default:
F.line = 52;F.filename = "repr.nim";
Result_18563 = addChar(Result_18563, X_18562);
break;
}
F.line = 53;F.filename = "repr.nim";
Result_18563 = resizeString(Result_18563, 1);
appendString(Result_18563, ((NimStringDesc*) &TMP20369));
framePtr = framePtr->prev;
return Result_18563;
}
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_18579, TNimType* Typ_18580) {
NimStringDesc* Result_18581;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprEnum";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18581 = 0;
F.line = 56;F.filename = "repr.nim";
if (!((NU64)(E_18579) < (NU64)((*(*Typ_18580).node).len))) goto LA2;
F.line = 57;F.filename = "repr.nim";
Result_18581 = cstrToNimstr((*(*(*Typ_18580).node).sons[(E_18579)-0]).name);
goto LA1;
LA2: ;
F.line = 59;F.filename = "repr.nim";
LOC4 = 0;
LOC5 = 0;
LOC5 = nimIntToStr(E_18579);
LOC4 = rawNewString(LOC5->Sup.len + 16);
appendString(LOC4, LOC5);
appendString(LOC4, ((NimStringDesc*) &TMP20370));
Result_18581 = LOC4;
LA1: ;
framePtr = framePtr->prev;
return Result_18581;
}
N_NIMCALL(void, Addsetelem_18596)(NimStringDesc** Result_18599, NI Elem_18600, TNimType* Typ_18601) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "addSetElem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 65;F.filename = "repr.nim";
switch ((*Typ_18601).kind) {
case ((NU8) 14):
F.line = 66;F.filename = "repr.nim";
LOC1 = 0;
LOC1 = reprEnum(Elem_18600, Typ_18601);
(*Result_18599) = resizeString((*Result_18599), LOC1->Sup.len + 0);
appendString((*Result_18599), LOC1);
break;
case ((NU8) 1):
F.line = 67;F.filename = "repr.nim";
LOC2 = 0;
LOC2 = reprBool(((NIM_BOOL) (Elem_18600)));
(*Result_18599) = resizeString((*Result_18599), LOC2->Sup.len + 0);
appendString((*Result_18599), LOC2);
break;
case ((NU8) 2):
F.line = 68;F.filename = "repr.nim";
LOC3 = 0;
LOC3 = reprChar(((NIM_CHAR) (((NI) (Elem_18600)))));
(*Result_18599) = resizeString((*Result_18599), LOC3->Sup.len + 0);
appendString((*Result_18599), LOC3);
break;
case ((NU8) 20):
F.line = 69;F.filename = "repr.nim";
Addsetelem_18596(Result_18599, Elem_18600, (*Typ_18601).base);
break;
case ((NU8) 31) ... ((NU8) 35):
F.line = 70;F.filename = "repr.nim";
LOC4 = 0;
LOC4 = reprInt(((NI64) (Elem_18600)));
(*Result_18599) = resizeString((*Result_18599), LOC4->Sup.len + 0);
appendString((*Result_18599), LOC4);
break;
default:
F.line = 72;F.filename = "repr.nim";
(*Result_18599) = resizeString((*Result_18599), 16);
appendString((*Result_18599), ((NimStringDesc*) &TMP20370));
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprsetaux_18602)(NimStringDesc** Result_18605, void* P_18606, TNimType* Typ_18607) {
NI Elemcounter_18608;
NI64 U_18609;
NI8* A_18614;
NI I_18622;
NI HEX3Atmp_20267;
NI Res_20269;
NI I_18648;
NI Res_20274;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprSetAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Elemcounter_18608 = 0;
F.line = 76;F.filename = "repr.nim";
Elemcounter_18608 = 0;
F.line = 78;F.filename = "repr.nim";
(*Result_18605) = resizeString((*Result_18605), 1);
appendString((*Result_18605), ((NimStringDesc*) &TMP20371));
U_18609 = 0;
F.line = 80;F.filename = "repr.nim";
switch ((*Typ_18607).size) {
case 1:
F.line = 81;F.filename = "repr.nim";
U_18609 = ((NI64)(NU64)(NU8)((*((NI8*) (P_18606)))));
break;
case 2:
F.line = 82;F.filename = "repr.nim";
U_18609 = ((NI64)(NU64)(NU16)((*((NI16*) (P_18606)))));
break;
case 4:
F.line = 83;F.filename = "repr.nim";
U_18609 = ((NI64)(NU64)(NU32)((*((int*) (P_18606)))));
break;
case 8:
F.line = 84;F.filename = "repr.nim";
U_18609 = (*((NI64*) (P_18606)));
break;
default:
A_18614 = 0;
F.line = 86;F.filename = "repr.nim";
A_18614 = ((NI8*) (P_18606));
I_18622 = 0;
HEX3Atmp_20267 = 0;
F.line = 87;F.filename = "repr.nim";
HEX3Atmp_20267 = (NI64)((NI64)((*Typ_18607).size * 8) - 1);
Res_20269 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20269 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20269 <= HEX3Atmp_20267)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_18622 = Res_20269;
F.line = 88;F.filename = "repr.nim";
if (!!(((NI64)(((NI)(NU)(NU8)(A_18614[((NI64)(I_18622 / 8))-0])) & (NI64)((NU64)(1) << (NU64)((NI64)(I_18622 % 8)))) == 0))) goto LA3;
F.line = 89;F.filename = "repr.nim";
if (!(0 < Elemcounter_18608)) goto LA6;
F.line = 89;F.filename = "repr.nim";
(*Result_18605) = resizeString((*Result_18605), 2);
appendString((*Result_18605), ((NimStringDesc*) &TMP20372));
LA6: ;
F.line = 90;F.filename = "repr.nim";
Addsetelem_18596(Result_18605, (NI64)(I_18622 + (*(*Typ_18607).node).len), (*Typ_18607).base);
F.line = 91;F.filename = "repr.nim";
Elemcounter_18608 += 1;
LA3: ;
F.line = 1024;F.filename = "system.nim";
Res_20269 += 1;
} LA1: ;
break;
}
F.line = 92;F.filename = "repr.nim";
if (!((*Typ_18607).size <= 8)) goto LA9;
I_18648 = 0;
Res_20274 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20274 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20274 <= 63)) goto LA11;
F.line = 1021;F.filename = "system.nim";
I_18648 = Res_20274;
F.line = 94;F.filename = "repr.nim";
if (!!(((U_18609 & ((NI64) ((NI64)((NU64)(1) << (NU64)(I_18648))))) == 0))) goto LA13;
F.line = 95;F.filename = "repr.nim";
if (!(0 < Elemcounter_18608)) goto LA16;
F.line = 95;F.filename = "repr.nim";
(*Result_18605) = resizeString((*Result_18605), 2);
appendString((*Result_18605), ((NimStringDesc*) &TMP20372));
LA16: ;
F.line = 96;F.filename = "repr.nim";
Addsetelem_18596(Result_18605, (NI64)(I_18648 + (*(*Typ_18607).node).len), (*Typ_18607).base);
F.line = 97;F.filename = "repr.nim";
Elemcounter_18608 += 1;
LA13: ;
F.line = 1024;F.filename = "system.nim";
Res_20274 += 1;
} LA11: ;
LA9: ;
F.line = 98;F.filename = "repr.nim";
(*Result_18605) = resizeString((*Result_18605), 1);
appendString((*Result_18605), ((NimStringDesc*) &TMP20373));
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, reprSet)(void* P_18667, TNimType* Typ_18668) {
NimStringDesc* Result_18669;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprSet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18669 = 0;
F.line = 101;F.filename = "repr.nim";
Result_18669 = copyString(((NimStringDesc*) &TMP20320));
F.line = 102;F.filename = "repr.nim";
Reprsetaux_18602(&Result_18669, P_18667, Typ_18668);
framePtr = framePtr->prev;
return Result_18669;
}
N_NIMCALL(void, Initreprclosure_18676)(TY18672* Cl_18679) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "initReprClosure";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 113;F.filename = "repr.nim";
Init_10888(&(*Cl_18679).Marked);
F.line = 114;F.filename = "repr.nim";
(*Cl_18679).Recdepth = -1;
F.line = 115;F.filename = "repr.nim";
(*Cl_18679).Indent = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Deinitreprclosure_18681)(TY18672* Cl_18684) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "deinitReprClosure";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 118;F.filename = "repr.nim";
Deinit_10892(&(*Cl_18684).Marked);
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprbreak_18686)(NimStringDesc** Result_18689, TY18672* Cl_18690) {
NI I_18698;
NI HEX3Atmp_20278;
NI Res_20280;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprBreak";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 121;F.filename = "repr.nim";
(*Result_18689) = resizeString((*Result_18689), 1);
appendString((*Result_18689), ((NimStringDesc*) &TMP20317));
I_18698 = 0;
HEX3Atmp_20278 = 0;
F.line = 122;F.filename = "repr.nim";
HEX3Atmp_20278 = (NI64)((*Cl_18690).Indent - 1);
Res_20280 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20280 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20280 <= HEX3Atmp_20278)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_18698 = Res_20280;
F.line = 122;F.filename = "repr.nim";
(*Result_18689) = addChar((*Result_18689), 32);
F.line = 1024;F.filename = "system.nim";
Res_20280 += 1;
} LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprrecordaux_18753)(NimStringDesc** Result_18756, void* P_18757, TNimNode* N_18759, TY18672* Cl_18761) {
NimStringDesc* LOC1;
NI I_18769;
NI HEX3Atmp_20296;
NI Res_20298;
TNimNode* M_18772;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprRecordAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 151;F.filename = "repr.nim";
switch ((*N_18759).kind) {
case ((NU8) 0):
F.line = 152;F.filename = "repr.nim";
break;
case ((NU8) 1):
F.line = 154;F.filename = "repr.nim";
LOC1 = 0;
LOC1 = cstrToNimstr((*N_18759).name);
(*Result_18756) = resizeString((*Result_18756), LOC1->Sup.len + 0);
appendString((*Result_18756), LOC1);
F.line = 155;F.filename = "repr.nim";
(*Result_18756) = resizeString((*Result_18756), 3);
appendString((*Result_18756), ((NimStringDesc*) &TMP20376));
F.line = 156;F.filename = "repr.nim";
Repraux_18699(Result_18756, ((void*) ((NI64)(((NI) (P_18757)) + (*N_18759).offset))), (*N_18759).typ, Cl_18761);
break;
case ((NU8) 2):
I_18769 = 0;
HEX3Atmp_20296 = 0;
F.line = 158;F.filename = "repr.nim";
HEX3Atmp_20296 = (NI64)((*N_18759).len - 1);
Res_20298 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20298 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20298 <= HEX3Atmp_20296)) goto LA2;
F.line = 1021;F.filename = "system.nim";
I_18769 = Res_20298;
F.line = 159;F.filename = "repr.nim";
if (!(0 < I_18769)) goto LA4;
F.line = 159;F.filename = "repr.nim";
(*Result_18756) = resizeString((*Result_18756), 2);
appendString((*Result_18756), ((NimStringDesc*) &TMP20377));
LA4: ;
F.line = 160;F.filename = "repr.nim";
Reprrecordaux_18753(Result_18756, P_18757, (*N_18759).sons[(I_18769)-0], Cl_18761);
F.line = 1024;F.filename = "system.nim";
Res_20298 += 1;
} LA2: ;
break;
case ((NU8) 3):
M_18772 = 0;
F.line = 162;F.filename = "repr.nim";
M_18772 = Selectbranch_7263(P_18757, N_18759);
F.line = 163;F.filename = "repr.nim";
Repraux_18699(Result_18756, ((void*) ((NI64)(((NI) (P_18757)) + (*N_18759).offset))), (*N_18759).typ, Cl_18761);
F.line = 164;F.filename = "repr.nim";
if (!!((M_18772 == NIM_NIL))) goto LA7;
F.line = 164;F.filename = "repr.nim";
Reprrecordaux_18753(Result_18756, P_18757, M_18772, Cl_18761);
LA7: ;
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprrecord_18784)(NimStringDesc** Result_18787, void* P_18788, TNimType* Typ_18789, TY18672* Cl_18791) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprRecord";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 168;F.filename = "repr.nim";
(*Result_18787) = resizeString((*Result_18787), 1);
appendString((*Result_18787), ((NimStringDesc*) &TMP20374));
F.line = 169;F.filename = "repr.nim";
Reprrecordaux_18753(Result_18787, P_18788, (*Typ_18789).node, Cl_18791);
F.line = 170;F.filename = "repr.nim";
(*Result_18787) = resizeString((*Result_18787), 1);
appendString((*Result_18787), ((NimStringDesc*) &TMP20378));
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprref_18792)(NimStringDesc** Result_18795, void* P_18796, TNimType* Typ_18797, TY18672* Cl_18799) {
TY10802* Cell_18800;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
NIM_BOOL LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Cell_18800 = 0;
F.line = 178;F.filename = "repr.nim";
Cell_18800 = Usrtocell_11236(P_18796);
F.line = 179;F.filename = "repr.nim";
LOC1 = 0;
LOC2 = 0;
LOC2 = reprPointer(P_18796);
LOC1 = rawNewString(LOC2->Sup.len + 4);
appendString(LOC1, ((NimStringDesc*) &TMP20379));
appendString(LOC1, LOC2);
(*Result_18795) = resizeString((*Result_18795), LOC1->Sup.len + 0);
appendString((*Result_18795), LOC1);
F.line = 180;F.filename = "repr.nim";
LOC4 = Contains_11054(&(*Cl_18799).Marked, Cell_18800);
if (!!(LOC4)) goto LA5;
F.line = 182;F.filename = "repr.nim";
Incl_11074(&(*Cl_18799).Marked, Cell_18800);
F.line = 183;F.filename = "repr.nim";
(*Result_18795) = resizeString((*Result_18795), 5);
appendString((*Result_18795), ((NimStringDesc*) &TMP20380));
F.line = 184;F.filename = "repr.nim";
Repraux_18699(Result_18795, P_18796, (*Typ_18797).base, Cl_18799);
LA5: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprsequence_18726)(NimStringDesc** Result_18729, void* P_18730, TNimType* Typ_18731, TY18672* Cl_18733) {
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NI Bs_18742;
NI I_18750;
NI HEX3Atmp_20290;
NI Res_20292;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprSequence";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 138;F.filename = "repr.nim";
if (!(P_18730 == NIM_NIL)) goto LA2;
F.line = 139;F.filename = "repr.nim";
(*Result_18729) = resizeString((*Result_18729), 3);
appendString((*Result_18729), ((NimStringDesc*) &TMP20363));
F.line = 140;F.filename = "repr.nim";
goto BeforeRet;
LA2: ;
F.line = 141;F.filename = "repr.nim";
LOC4 = 0;
LOC5 = 0;
LOC5 = reprPointer(P_18730);
LOC4 = rawNewString(LOC5->Sup.len + 1);
appendString(LOC4, LOC5);
appendString(LOC4, ((NimStringDesc*) &TMP20374));
(*Result_18729) = resizeString((*Result_18729), LOC4->Sup.len + 0);
appendString((*Result_18729), LOC4);
Bs_18742 = 0;
F.line = 142;F.filename = "repr.nim";
Bs_18742 = (*(*Typ_18731).base).size;
I_18750 = 0;
HEX3Atmp_20290 = 0;
F.line = 143;F.filename = "repr.nim";
HEX3Atmp_20290 = (NI64)((*((TGenericSeq*) (P_18730))).len - 1);
Res_20292 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20292 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20292 <= HEX3Atmp_20290)) goto LA6;
F.line = 1021;F.filename = "system.nim";
I_18750 = Res_20292;
F.line = 144;F.filename = "repr.nim";
if (!(0 < I_18750)) goto LA8;
F.line = 144;F.filename = "repr.nim";
(*Result_18729) = resizeString((*Result_18729), 2);
appendString((*Result_18729), ((NimStringDesc*) &TMP20372));
LA8: ;
F.line = 145;F.filename = "repr.nim";
Repraux_18699(Result_18729, ((void*) ((NI64)((NI64)(((NI) (P_18730)) + 16) + (NI64)(I_18750 * Bs_18742)))), (*Typ_18731).base, Cl_18733);
F.line = 1024;F.filename = "system.nim";
Res_20292 += 1;
} LA6: ;
F.line = 147;F.filename = "repr.nim";
(*Result_18729) = resizeString((*Result_18729), 1);
appendString((*Result_18729), ((NimStringDesc*) &TMP20378));
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Repraux_18699)(NimStringDesc** Result_18702, void* P_18703, TNimType* Typ_18704, TY18672* Cl_18706) {
TNimType* T_19035;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
NimStringDesc* LOC13;
NimStringDesc* LOC14;
NimStringDesc* LOC15;
NimStringDesc* LOC16;
NimStringDesc* LOC17;
NimStringDesc* LOC18;
NimStringDesc* LOC22;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 188;F.filename = "repr.nim";
if (!((*Cl_18706).Recdepth == 0)) goto LA2;
F.line = 189;F.filename = "repr.nim";
(*Result_18702) = resizeString((*Result_18702), 3);
appendString((*Result_18702), ((NimStringDesc*) &TMP20375));
F.line = 190;F.filename = "repr.nim";
goto BeforeRet;
LA2: ;
F.line = 191;F.filename = "repr.nim";
(*Cl_18706).Recdepth -= 1;
F.line = 192;F.filename = "repr.nim";
switch ((*Typ_18704).kind) {
case ((NU8) 19):
F.line = 193;F.filename = "repr.nim";
Reprsetaux_18602(Result_18702, P_18703, Typ_18704);
break;
case ((NU8) 16):
F.line = 194;F.filename = "repr.nim";
Reprarray_18707(Result_18702, P_18703, Typ_18704, Cl_18706);
break;
case ((NU8) 18):
case ((NU8) 40):
F.line = 195;F.filename = "repr.nim";
Reprrecord_18784(Result_18702, P_18703, Typ_18704, Cl_18706);
break;
case ((NU8) 17):
T_19035 = 0;
F.line = 197;F.filename = "repr.nim";
T_19035 = (*((TNimType**) (P_18703)));
F.line = 198;F.filename = "repr.nim";
Reprrecord_18784(Result_18702, P_18703, T_19035, Cl_18706);
break;
case ((NU8) 22):
case ((NU8) 21):
F.line = 200;F.filename = "repr.nim";
F.line = 201;F.filename = "repr.nim";
if (!((*((void**) (P_18703))) == NIM_NIL)) goto LA5;
F.line = 201;F.filename = "repr.nim";
(*Result_18702) = resizeString((*Result_18702), 3);
appendString((*Result_18702), ((NimStringDesc*) &TMP20363));
goto LA4;
LA5: ;
F.line = 202;F.filename = "repr.nim";
Reprref_18792(Result_18702, (*((void**) (P_18703))), Typ_18704, Cl_18706);
LA4: ;
break;
case ((NU8) 24):
F.line = 204;F.filename = "repr.nim";
Reprsequence_18726(Result_18702, (*((void**) (P_18703))), Typ_18704, Cl_18706);
break;
case ((NU8) 31):
F.line = 205;F.filename = "repr.nim";
LOC7 = 0;
LOC7 = nimIntToStr((*((NI*) (P_18703))));
(*Result_18702) = resizeString((*Result_18702), LOC7->Sup.len + 0);
appendString((*Result_18702), LOC7);
break;
case ((NU8) 32):
F.line = 206;F.filename = "repr.nim";
LOC8 = 0;
LOC8 = nimIntToStr(((NI) ((*((NI8*) (P_18703))))));
(*Result_18702) = resizeString((*Result_18702), LOC8->Sup.len + 0);
appendString((*Result_18702), LOC8);
break;
case ((NU8) 33):
F.line = 207;F.filename = "repr.nim";
LOC9 = 0;
LOC9 = nimIntToStr(((NI) ((*((NI16*) (P_18703))))));
(*Result_18702) = resizeString((*Result_18702), LOC9->Sup.len + 0);
appendString((*Result_18702), LOC9);
break;
case ((NU8) 34):
F.line = 208;F.filename = "repr.nim";
LOC10 = 0;
LOC10 = nimIntToStr(((NI) ((*((int*) (P_18703))))));
(*Result_18702) = resizeString((*Result_18702), LOC10->Sup.len + 0);
appendString((*Result_18702), LOC10);
break;
case ((NU8) 35):
F.line = 209;F.filename = "repr.nim";
LOC11 = 0;
LOC11 = nimInt64ToStr((*((NI64*) (P_18703))));
(*Result_18702) = resizeString((*Result_18702), LOC11->Sup.len + 0);
appendString((*Result_18702), LOC11);
break;
case ((NU8) 36):
F.line = 210;F.filename = "repr.nim";
LOC12 = 0;
LOC12 = nimFloatToStr((*((NF*) (P_18703))));
(*Result_18702) = resizeString((*Result_18702), LOC12->Sup.len + 0);
appendString((*Result_18702), LOC12);
break;
case ((NU8) 37):
F.line = 211;F.filename = "repr.nim";
LOC13 = 0;
LOC13 = nimFloatToStr(((NF) ((*((NF32*) (P_18703))))));
(*Result_18702) = resizeString((*Result_18702), LOC13->Sup.len + 0);
appendString((*Result_18702), LOC13);
break;
case ((NU8) 38):
F.line = 212;F.filename = "repr.nim";
LOC14 = 0;
LOC14 = nimFloatToStr(((NF) ((*((NF64*) (P_18703))))));
(*Result_18702) = resizeString((*Result_18702), LOC14->Sup.len + 0);
appendString((*Result_18702), LOC14);
break;
case ((NU8) 14):
F.line = 213;F.filename = "repr.nim";
LOC15 = 0;
LOC15 = reprEnum((*((NI*) (P_18703))), Typ_18704);
(*Result_18702) = resizeString((*Result_18702), LOC15->Sup.len + 0);
appendString((*Result_18702), LOC15);
break;
case ((NU8) 1):
F.line = 214;F.filename = "repr.nim";
LOC16 = 0;
LOC16 = reprBool((*((NIM_BOOL*) (P_18703))));
(*Result_18702) = resizeString((*Result_18702), LOC16->Sup.len + 0);
appendString((*Result_18702), LOC16);
break;
case ((NU8) 2):
F.line = 215;F.filename = "repr.nim";
LOC17 = 0;
LOC17 = reprChar((*((NIM_CHAR*) (P_18703))));
(*Result_18702) = resizeString((*Result_18702), LOC17->Sup.len + 0);
appendString((*Result_18702), LOC17);
break;
case ((NU8) 28):
F.line = 216;F.filename = "repr.nim";
Reprstraux_18522(Result_18702, (*((NimStringDesc**) (P_18703))));
break;
case ((NU8) 29):
F.line = 217;F.filename = "repr.nim";
LOC18 = 0;
LOC18 = cstrToNimstr((*((NCSTRING*) (P_18703))));
Reprstraux_18522(Result_18702, LOC18);
break;
case ((NU8) 20):
F.line = 218;F.filename = "repr.nim";
Repraux_18699(Result_18702, P_18703, (*Typ_18704).base, Cl_18706);
break;
case ((NU8) 25):
case ((NU8) 26):
F.line = 220;F.filename = "repr.nim";
if (!((*((void**) (P_18703))) == NIM_NIL)) goto LA20;
F.line = 220;F.filename = "repr.nim";
(*Result_18702) = resizeString((*Result_18702), 3);
appendString((*Result_18702), ((NimStringDesc*) &TMP20363));
goto LA19;
LA20: ;
F.line = 221;F.filename = "repr.nim";
LOC22 = 0;
LOC22 = reprPointer((*((void**) (P_18703))));
(*Result_18702) = resizeString((*Result_18702), LOC22->Sup.len + 0);
appendString((*Result_18702), LOC22);
LA19: ;
break;
default:
F.line = 223;F.filename = "repr.nim";
(*Result_18702) = resizeString((*Result_18702), 15);
appendString((*Result_18702), ((NimStringDesc*) &TMP20381));
break;
}
F.line = 224;F.filename = "repr.nim";
(*Cl_18706).Recdepth += 1;
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprarray_18707)(NimStringDesc** Result_18710, void* P_18711, TNimType* Typ_18712, TY18672* Cl_18714) {
NI Bs_18715;
NI I_18723;
NI HEX3Atmp_20284;
NI Res_20286;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprArray";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 129;F.filename = "repr.nim";
(*Result_18710) = resizeString((*Result_18710), 1);
appendString((*Result_18710), ((NimStringDesc*) &TMP20374));
Bs_18715 = 0;
F.line = 130;F.filename = "repr.nim";
Bs_18715 = (*(*Typ_18712).base).size;
I_18723 = 0;
HEX3Atmp_20284 = 0;
F.line = 131;F.filename = "repr.nim";
HEX3Atmp_20284 = (NI64)((NI64)((*Typ_18712).size / Bs_18715) - 1);
Res_20286 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20286 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20286 <= HEX3Atmp_20284)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_18723 = Res_20286;
F.line = 132;F.filename = "repr.nim";
if (!(0 < I_18723)) goto LA3;
F.line = 132;F.filename = "repr.nim";
(*Result_18710) = resizeString((*Result_18710), 2);
appendString((*Result_18710), ((NimStringDesc*) &TMP20372));
LA3: ;
F.line = 133;F.filename = "repr.nim";
Repraux_18699(Result_18710, ((void*) ((NI64)(((NI) (P_18711)) + (NI64)(I_18723 * Bs_18715)))), (*Typ_18712).base, Cl_18714);
F.line = 1024;F.filename = "system.nim";
Res_20286 += 1;
} LA1: ;
F.line = 134;F.filename = "repr.nim";
(*Result_18710) = resizeString((*Result_18710), 1);
appendString((*Result_18710), ((NimStringDesc*) &TMP20378));
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, reprOpenArray)(void* P_19203, NI Length_19204, TNimType* Elemtyp_19205) {
NimStringDesc* Result_19206;
TY18672 Cl_19207;
NI Bs_19209;
NI I_19217;
NI HEX3Atmp_20302;
NI Res_20304;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprOpenArray";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_19206 = 0;
memset((void*)&Cl_19207, 0, sizeof(Cl_19207));
F.line = 230;F.filename = "repr.nim";
Initreprclosure_18676(&Cl_19207);
F.line = 231;F.filename = "repr.nim";
Result_19206 = copyString(((NimStringDesc*) &TMP20374));
Bs_19209 = 0;
F.line = 232;F.filename = "repr.nim";
Bs_19209 = (*Elemtyp_19205).size;
I_19217 = 0;
HEX3Atmp_20302 = 0;
F.line = 233;F.filename = "repr.nim";
HEX3Atmp_20302 = (NI64)(Length_19204 - 1);
Res_20304 = 0;
F.line = 1021;F.filename = "system.nim";
Res_20304 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_20304 <= HEX3Atmp_20302)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_19217 = Res_20304;
F.line = 234;F.filename = "repr.nim";
if (!(0 < I_19217)) goto LA3;
F.line = 234;F.filename = "repr.nim";
Result_19206 = resizeString(Result_19206, 2);
appendString(Result_19206, ((NimStringDesc*) &TMP20372));
LA3: ;
F.line = 235;F.filename = "repr.nim";
Repraux_18699(&Result_19206, ((void*) ((NI64)(((NI) (P_19203)) + (NI64)(I_19217 * Bs_19209)))), Elemtyp_19205, &Cl_19207);
F.line = 1024;F.filename = "system.nim";
Res_20304 += 1;
} LA1: ;
F.line = 236;F.filename = "repr.nim";
Result_19206 = resizeString(Result_19206, 1);
appendString(Result_19206, ((NimStringDesc*) &TMP20378));
F.line = 237;F.filename = "repr.nim";
Deinitreprclosure_18681(&Cl_19207);
framePtr = framePtr->prev;
return Result_19206;
}
N_NIMCALL(NimStringDesc*, reprAny)(void* P_7241, TNimType* Typ_7242) {
NimStringDesc* Result_19227;
TY18672 Cl_19228;
void* P_19244;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprAny";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_19227 = 0;
memset((void*)&Cl_19228, 0, sizeof(Cl_19228));
F.line = 243;F.filename = "repr.nim";
Initreprclosure_18676(&Cl_19228);
F.line = 244;F.filename = "repr.nim";
Result_19227 = copyString(((NimStringDesc*) &TMP20320));
F.line = 245;F.filename = "repr.nim";
if (!((IL64(1099512610816) &(IL64(1)<<(((*Typ_7242).kind)&IL64(63))))!=0)) goto LA2;
F.line = 246;F.filename = "repr.nim";
Repraux_18699(&Result_19227, P_7241, Typ_7242, &Cl_19228);
goto LA1;
LA2: ;
P_19244 = 0;
F.line = 248;F.filename = "repr.nim";
P_19244 = P_7241;
F.line = 249;F.filename = "repr.nim";
Repraux_18699(&Result_19227, ((void*) (&P_19244)), Typ_7242, &Cl_19228);
LA1: ;
F.line = 250;F.filename = "repr.nim";
Result_19227 = resizeString(Result_19227, 1);
appendString(Result_19227, ((NimStringDesc*) &TMP20317));
F.line = 251;F.filename = "repr.nim";
Deinitreprclosure_18681(&Cl_19228);
framePtr = framePtr->prev;
return Result_19227;
}
static N_INLINE(NimStringDesc*, Getcurrentexceptionmsg_19405)(void) {
NimStringDesc* Result_19407;
E_Base* E_19408;
NimStringDesc* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getCurrentExceptionMsg";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_19407 = 0;
E_19408 = 0;
F.line = 1589;F.filename = "system.nim";
E_19408 = getCurrentException();
F.line = 1590;F.filename = "system.nim";
F.line = 1590;F.filename = "system.nim";
LOC1 = 0;
if (!(E_19408 == NIM_NIL)) goto LA3;
LOC1 = copyString(((NimStringDesc*) &TMP20320));
goto LA2;
LA3: ;
LOC1 = copyString((*E_19408).message);
LA2: ;
Result_19407 = LOC1;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_19407;
}
N_NIMCALL(void, Listremove_9246)(TY8834** Head_9250, TY8834* C_9251) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ListRemove";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 318;F.filename = "alloc.nim";
F.line = 319;F.filename = "alloc.nim";
if (!(C_9251 == (*Head_9250))) goto LA2;
F.line = 320;F.filename = "alloc.nim";
(*Head_9250) = (*C_9251).Next;
F.line = 321;F.filename = "alloc.nim";
F.line = 322;F.filename = "alloc.nim";
if (!!(((*Head_9250) == NIM_NIL))) goto LA5;
F.line = 322;F.filename = "alloc.nim";
(*(*Head_9250)).Prev = NIM_NIL;
LA5: ;
goto LA1;
LA2: ;
F.line = 324;F.filename = "alloc.nim";
F.line = 325;F.filename = "alloc.nim";
(*(*C_9251).Prev).Next = (*C_9251).Next;
F.line = 326;F.filename = "alloc.nim";
if (!!(((*C_9251).Next == NIM_NIL))) goto LA8;
F.line = 326;F.filename = "alloc.nim";
(*(*C_9251).Next).Prev = (*C_9251).Prev;
LA8: ;
LA1: ;
F.line = 327;F.filename = "alloc.nim";
(*C_9251).Next = NIM_NIL;
F.line = 328;F.filename = "alloc.nim";
(*C_9251).Prev = NIM_NIL;
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_BOOL, Contains_9255)(TY8834* List_9258, TY8834* X_9259) {
NIM_BOOL Result_9260;
TY8834* It_9261;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9260 = 0;
It_9261 = 0;
F.line = 294;F.filename = "alloc.nim";
It_9261 = List_9258;
F.line = 295;F.filename = "alloc.nim";
while (1) {
if (!!((It_9261 == NIM_NIL))) goto LA1;
F.line = 296;F.filename = "alloc.nim";
if (!(It_9261 == X_9259)) goto LA3;
F.line = 296;F.filename = "alloc.nim";
F.line = 31;F.filename = "system.nim";
Result_9260 = NIM_TRUE;
goto BeforeRet;
LA3: ;
F.line = 297;F.filename = "alloc.nim";
It_9261 = (*It_9261).Next;
} LA1: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_9260;
}
N_NIMCALL(void, Listadd_9607)(TY8834** Head_9611, TY8834* C_9612) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ListAdd";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 308;F.filename = "alloc.nim";
F.line = 309;F.filename = "alloc.nim";
F.line = 310;F.filename = "alloc.nim";
F.line = 311;F.filename = "alloc.nim";
(*C_9612).Next = (*Head_9611);
F.line = 312;F.filename = "alloc.nim";
if (!!(((*Head_9611) == NIM_NIL))) goto LA2;
F.line = 313;F.filename = "alloc.nim";
F.line = 314;F.filename = "alloc.nim";
(*(*Head_9611)).Prev = C_9612;
LA2: ;
F.line = 315;F.filename = "alloc.nim";
(*Head_9611) = C_9612;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Listadd_9826)(TY8832** Head_9830, TY8832* C_9831) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ListAdd";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 308;F.filename = "alloc.nim";
F.line = 309;F.filename = "alloc.nim";
F.line = 310;F.filename = "alloc.nim";
F.line = 311;F.filename = "alloc.nim";
(*C_9831).Next = (*Head_9830);
F.line = 312;F.filename = "alloc.nim";
if (!!(((*Head_9830) == NIM_NIL))) goto LA2;
F.line = 313;F.filename = "alloc.nim";
F.line = 314;F.filename = "alloc.nim";
(*(*Head_9830)).Prev = C_9831;
LA2: ;
F.line = 315;F.filename = "alloc.nim";
(*Head_9830) = C_9831;
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_BOOL, Contains_9835)(TY8832* List_9838, TY8832* X_9839) {
NIM_BOOL Result_9840;
TY8832* It_9841;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9840 = 0;
It_9841 = 0;
F.line = 294;F.filename = "alloc.nim";
It_9841 = List_9838;
F.line = 295;F.filename = "alloc.nim";
while (1) {
if (!!((It_9841 == NIM_NIL))) goto LA1;
F.line = 296;F.filename = "alloc.nim";
if (!(It_9841 == X_9839)) goto LA3;
F.line = 296;F.filename = "alloc.nim";
F.line = 31;F.filename = "system.nim";
Result_9840 = NIM_TRUE;
goto BeforeRet;
LA3: ;
F.line = 297;F.filename = "alloc.nim";
It_9841 = (*It_9841).Next;
} LA1: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_9840;
}
N_NIMCALL(void, Listremove_9968)(TY8832** Head_9972, TY8832* C_9973) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ListRemove";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 318;F.filename = "alloc.nim";
F.line = 319;F.filename = "alloc.nim";
if (!(C_9973 == (*Head_9972))) goto LA2;
F.line = 320;F.filename = "alloc.nim";
(*Head_9972) = (*C_9973).Next;
F.line = 321;F.filename = "alloc.nim";
F.line = 322;F.filename = "alloc.nim";
if (!!(((*Head_9972) == NIM_NIL))) goto LA5;
F.line = 322;F.filename = "alloc.nim";
(*(*Head_9972)).Prev = NIM_NIL;
LA5: ;
goto LA1;
LA2: ;
F.line = 324;F.filename = "alloc.nim";
F.line = 325;F.filename = "alloc.nim";
(*(*C_9973).Prev).Next = (*C_9973).Next;
F.line = 326;F.filename = "alloc.nim";
if (!!(((*C_9973).Next == NIM_NIL))) goto LA8;
F.line = 326;F.filename = "alloc.nim";
(*(*C_9973).Next).Prev = (*C_9973).Prev;
LA8: ;
LA1: ;
F.line = 327;F.filename = "alloc.nim";
(*C_9973).Next = NIM_NIL;
F.line = 328;F.filename = "alloc.nim";
(*C_9973).Prev = NIM_NIL;
framePtr = framePtr->prev;
}
N_NOINLINE(void, systemInit)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "system";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 1242;F.filename = "system.nim";
Dbglinehook_2721 = ((TY2718) (NIM_NIL));
F.line = 1326;F.filename = "system.nim";
Strdesc_3017.size = 8;
F.line = 1327;F.filename = "system.nim";
Strdesc_3017.kind = ((NU8) 28);
F.line = 1328;F.filename = "system.nim";
Strdesc_3017.flags = 2;
F.line = 1329;F.filename = "system.nim";
Initstackbottom_3013();
F.line = 1330;F.filename = "system.nim";
Initgc_3011();
F.line = 39;F.filename = "excpt.nim";
excHandler = NIM_NIL;
F.line = 77;F.filename = "excpt.nim";
asgnRefNoCycle((void**) &Stacktracenewline_4659, copyString(((NimStringDesc*) &TMP20317)));
F.line = 240;F.filename = "excpt.nim";
registerSignalHandler();
F.line = 243;F.filename = "excpt.nim";
asgnRefNoCycle((void**) &Gassertionfailed_5251, (EAssertionFailed*) newObj(NTI5250, sizeof(EAssertionFailed)));
(*Gassertionfailed_5251).Sup.Sup.Sup.m_type = NTI436;
F.line = 244;F.filename = "excpt.nim";
asgnRefNoCycle((void**) &Buf_4653, mnewString(2048));
F.line = 245;F.filename = "excpt.nim";
asgnRefNoCycle((void**) &Assertbuf_4654, mnewString(2048));
F.line = 246;F.filename = "excpt.nim";
Buf_4653 = setLengthStr(Buf_4653, 0);
F.line = 247;F.filename = "excpt.nim";
Assertbuf_4654 = setLengthStr(Assertbuf_4654, 0);
F.line = 134;F.filename = "alloc.nim";
F.line = 135;F.filename = "alloc.nim";
F.line = 136;F.filename = "alloc.nim";
F.line = 246;F.filename = "alloc.nim";
Lastsize_9091 = 4096;
F.line = 194;F.filename = "mmdisp.nim";
F.line = 71;F.filename = "gc.nim";
Cyclethreshold_11211 = 4194304;
F.line = 72;F.filename = "gc.nim";
Recgclock_11212 = 0;
framePtr = framePtr->prev;
}

