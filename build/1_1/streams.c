/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY420 TY420;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY418 TY418;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
typedef struct TNimObject TNimObject;
typedef struct TY10602 TY10602;
typedef struct TY8004 TY8004;
typedef struct TY10990 TY10990;
typedef struct TY10618 TY10618;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY10988 TY10988;
typedef struct TY61027 TY61027;
typedef struct TY61226 TY61226;
typedef struct TY61323 TY61323;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct E_Base {
  TNimObject Sup;
E_Base* parent;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY418 {
  TY416 Sup;
};
struct TY420 {
  TY418 Sup;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
typedef N_STDCALL_PTR(void, TY8016) (TY8004* L_8018);
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY8004 {
void* Debuginfo;
NI32 Lockcount;
NI32 Recursioncount;
NI Owningthread;
NI Locksemaphore;
NI32 Reserved;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY8004 Cyclerootslock;
TY8004 Zctlock;
TY10988 Stat;
};
typedef N_STDCALL_PTR(void, TY8020) (TY8004* L_8022);
typedef N_NIMCALL_PTR(void, TY61028) (TY61027* S_61029);
typedef N_NIMCALL_PTR(NIM_BOOL, TY61032) (TY61027* S_61033);
typedef N_NIMCALL_PTR(void, TY61036) (TY61027* S_61037, NI Pos_61038);
typedef N_NIMCALL_PTR(NI, TY61041) (TY61027* S_61042);
typedef N_NIMCALL_PTR(NI, TY61045) (TY61027* S_61046, void* Buffer_61047, NI Buflen_61048);
typedef N_NIMCALL_PTR(void, TY61051) (TY61027* S_61052, void* Buffer_61053, NI Buflen_61054);
struct TY61027 {
  TNimObject Sup;
TY61028 Close;
TY61032 Atend;
TY61036 Setposition;
TY61041 Getposition;
TY61045 Readdata;
TY61051 Writedata;
};
struct TY61226 {
  TY61027 Sup;
NimStringDesc* Data;
NI Pos;
};
struct TY61323 {
  TY61027 Sup;
FILE* F;
};
typedef NI TY8614[16];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
N_NIMCALL(TY420*, Neweio_61004)(NimStringDesc* Msg_61006);
N_NIMCALL(void*, newObj)(TNimType* Typ_12307, NI Size_12308);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819);
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660);
N_NOINLINE(void, Addzct_11025)(TY10618* S_11028, TY10602* C_11029);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17308);
N_NIMCALL(void, Write_61064)(TY61027* S_61066, NimStringDesc* X_61067);
N_NIMCALL(NIM_CHAR, Readchar_61077)(TY61027* S_61079);
N_NIMCALL(NIM_BOOL, Readbool_61082)(TY61027* S_61084);
N_NIMCALL(NI8, Readint8_61099)(TY61027* S_61101);
N_NIMCALL(NI16, Readint16_61116)(TY61027* S_61118);
N_NIMCALL(NI32, Readint32_61133)(TY61027* S_61135);
N_NIMCALL(NI64, Readint64_61150)(TY61027* S_61152);
N_NIMCALL(NF32, Readfloat32_61167)(TY61027* S_61169);
N_NIMCALL(NF64, Readfloat64_61184)(TY61027* S_61186);
N_NIMCALL(NimStringDesc*, Readstr_61201)(TY61027* S_61203, NI Length_61204);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1349);
N_NOINLINE(void, raiseIndexError)(void);
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17425, NI Newlen_17426);
N_NIMCALL(NimStringDesc*, Readline_61210)(TY61027* S_61212);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NIM_BOOL, Ssatend_61229)(TY61226* S_61231);
N_NIMCALL(void, Sssetposition_61237)(TY61226* S_61239, NI Pos_61240);
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004);
N_NOINLINE(void, raiseOverflow)(void);
N_NIMCALL(NI, Ssgetposition_61245)(TY61226* S_61247);
N_NIMCALL(NI, Ssreaddata_61249)(TY61226* S_61251, void* Buffer_61252, NI Buflen_61253);
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804);
N_NIMCALL(void, Sswritedata_61274)(TY61226* S_61276, void* Buffer_61277, NI Buflen_61278);
N_NIMCALL(void, Ssclose_61296)(TY61226* S_61298);
N_NIMCALL(TY61226*, Newstringstream_61299)(NimStringDesc* S_61301);
N_NIMCALL(void, Fsclose_61325)(TY61323* S_61327);
N_NIMCALL(NIM_BOOL, Fsatend_61328)(TY61323* S_61330);
N_NIMCALL(NIM_BOOL, Endoffile_3638)(FILE* F_3640);
N_NIMCALL(void, Fssetposition_61332)(TY61323* S_61334, NI Pos_61335);
N_NIMCALL(void, Setfilepos_3738)(FILE* F_3740, NI64 Pos_3741);
N_NIMCALL(NI, Fsgetposition_61336)(TY61323* S_61338);
N_NIMCALL(NI64, Getfilepos_3742)(FILE* F_3744);
N_NIMCALL(NI64, chckRange64)(NI64 I_5523, NI64 A_5524, NI64 B_5525);
N_NIMCALL(NI, Fsreaddata_61340)(TY61323* S_61342, void* Buffer_61343, NI Buflen_61344);
N_NIMCALL(NI, Readbuffer_3714)(FILE* F_3716, void* Buffer_3717, NI Len_3718);
N_NIMCALL(void, Fswritedata_61346)(TY61323* S_61348, void* Buffer_61349, NI Buflen_61350);
N_NIMCALL(NI, Writebuffer_3733)(FILE* F_3735, void* Buffer_3736, NI Len_3737);
N_NIMCALL(void, raiseException)(E_Base* E_5204, NCSTRING Ename_5205);
N_NIMCALL(TY61323*, Newfilestream_61354)(FILE* F_61356);
N_NIMCALL(TY61323*, Newfilestream_61373)(NimStringDesc* Filename_61375, NU8 Mode_61376);
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623);
N_NIMCALL(void, Read_61089)(TY61027* S_61092, NIM_BOOL* Result_61094);
N_NIMCALL(void, Read_61106)(TY61027* S_61109, NI8* Result_61111);
N_NIMCALL(void, Read_61123)(TY61027* S_61126, NI16* Result_61128);
N_NIMCALL(void, Read_61140)(TY61027* S_61143, NI32* Result_61145);
N_NIMCALL(void, Read_61157)(TY61027* S_61160, NI64* Result_61162);
N_NIMCALL(void, Read_61174)(TY61027* S_61177, NF32* Result_61179);
N_NIMCALL(void, Read_61191)(TY61027* S_61194, NF64* Result_61196);
STRING_LITERAL(TMP61222, "", 0);
STRING_LITERAL(TMP61353, "cannot write to stream", 22);
STRING_LITERAL(TMP61401, "cannot read from stream", 23);
extern TNimType* NTI4262; /* ref EIO */
extern TNimType* NTI420; /* EIO */
extern TY8016 Dl_8015;
extern TY10990 Gch_11010;
extern TY8020 Dl_8019;
extern TNimType* NTI61224; /* PStringStream */
extern TNimType* NTI61226; /* TStringStream */
extern TNimType* NTI61321; /* PFileStream */
extern TNimType* NTI61323; /* TFileStream */
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038) {
TY10602* Result_11039;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "usrToCell";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11039 = 0;
F.line = 100;F.filename = "gc.nim";
Result_11039 = ((TY10602*) ((NI32)((NU32)(((NI) (Usr_11038))) - (NU32)(((NI) (((NI)sizeof(TY10602))))))));
framePtr = framePtr->prev;
return Result_11039;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7408;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicInc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7408 = 0;
F.line = 29;F.filename = "systhread.nim";
Result_7408 = __sync_add_and_fetch(Memloc_3004, X_3005);
framePtr = framePtr->prev;
return Result_7408;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7606;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicDec";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7606 = 0;
F.line = 37;F.filename = "systhread.nim";
Result_7606 = __sync_sub_and_fetch(Memloc_3009, X_3010);
framePtr = framePtr->prev;
return Result_7606;
}
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 211;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 211;F.filename = "gc.nim";
Dl_8015(&Gch_11010.Zctlock);
LA2: ;
F.line = 212;F.filename = "gc.nim";
Addzct_11025(&Gch_11010.Zct, C_11660);
F.line = 213;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 213;F.filename = "gc.nim";
Dl_8019(&Gch_11010.Zctlock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819) {
TY10602* C_11820;
NI LOC4;
TY10602* C_11822;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRefNoCycle";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 244;F.filename = "gc.nim";
if (!!((Src_11819 == NIM_NIL))) goto LA2;
C_11820 = 0;
F.line = 245;F.filename = "gc.nim";
C_11820 = Usrtocell_11036(Src_11819);
F.line = 246;F.filename = "gc.nim";
LOC4 = Atomicinc_3001(&(*C_11820).Refcount, 8);
LA2: ;
F.line = 247;F.filename = "gc.nim";
if (!!(((*Dest_11818) == NIM_NIL))) goto LA6;
C_11822 = 0;
F.line = 248;F.filename = "gc.nim";
C_11822 = Usrtocell_11036((*Dest_11818));
F.line = 249;F.filename = "gc.nim";
LOC9 = Atomicdec_3006(&(*C_11822).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
F.line = 250;F.filename = "gc.nim";
Rtladdzct_11658(C_11822);
LA10: ;
LA6: ;
F.line = 251;F.filename = "gc.nim";
(*Dest_11818) = Src_11819;
framePtr = framePtr->prev;
}
N_NIMCALL(TY420*, Neweio_61004)(NimStringDesc* Msg_61006) {
TY420* Result_61008;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newEIO";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61008 = 0;
F.line = 16;F.filename = "streams.nim";
Result_61008 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*Result_61008).Sup.Sup.Sup.Sup.m_type = NTI420;
F.line = 17;F.filename = "streams.nim";
asgnRefNoCycle((void**) &(*Result_61008).Sup.Sup.Sup.message, copyString(Msg_61006));
framePtr = framePtr->prev;
return Result_61008;
}
N_NIMCALL(void, Write_61064)(TY61027* S_61066, NimStringDesc* X_61067) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "write";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 42;F.filename = "streams.nim";
(*S_61066).Writedata(S_61066, ((void*) (X_61067->data)), X_61067->Sup.len);
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_CHAR, Readchar_61077)(TY61027* S_61079) {
NIM_CHAR Result_61080;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61080 = 0;
F.line = 52;F.filename = "streams.nim";
LOC1 = (*S_61079).Readdata(S_61079, ((void*) (&Result_61080)), 1);
framePtr = framePtr->prev;
return Result_61080;
}
N_NIMCALL(NIM_BOOL, Readbool_61082)(TY61027* S_61084) {
NIM_BOOL Result_61085;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readBool";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61085 = 0;
F.line = 56;F.filename = "streams.nim";
Read_61089(S_61084, &Result_61085);
framePtr = framePtr->prev;
return Result_61085;
}
N_NIMCALL(NI8, Readint8_61099)(TY61027* S_61101) {
NI8 Result_61102;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readInt8";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61102 = 0;
F.line = 60;F.filename = "streams.nim";
Read_61106(S_61101, &Result_61102);
framePtr = framePtr->prev;
return Result_61102;
}
N_NIMCALL(NI16, Readint16_61116)(TY61027* S_61118) {
NI16 Result_61119;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readInt16";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61119 = 0;
F.line = 64;F.filename = "streams.nim";
Read_61123(S_61118, &Result_61119);
framePtr = framePtr->prev;
return Result_61119;
}
N_NIMCALL(NI32, Readint32_61133)(TY61027* S_61135) {
NI32 Result_61136;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readInt32";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61136 = 0;
F.line = 68;F.filename = "streams.nim";
Read_61140(S_61135, &Result_61136);
framePtr = framePtr->prev;
return Result_61136;
}
N_NIMCALL(NI64, Readint64_61150)(TY61027* S_61152) {
NI64 Result_61153;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readInt64";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61153 = 0;
F.line = 72;F.filename = "streams.nim";
Read_61157(S_61152, &Result_61153);
framePtr = framePtr->prev;
return Result_61153;
}
N_NIMCALL(NF32, Readfloat32_61167)(TY61027* S_61169) {
NF32 Result_61170;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readFloat32";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61170 = 0;
F.line = 76;F.filename = "streams.nim";
Read_61174(S_61169, &Result_61170);
framePtr = framePtr->prev;
return Result_61170;
}
N_NIMCALL(NF64, Readfloat64_61184)(TY61027* S_61186) {
NF64 Result_61187;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readFloat64";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61187 = 0;
F.line = 80;F.filename = "streams.nim";
Read_61191(S_61186, &Result_61187);
framePtr = framePtr->prev;
return Result_61187;
}
N_NIMCALL(NimStringDesc*, Readstr_61201)(TY61027* S_61203, NI Length_61204) {
NimStringDesc* Result_61205;
NI L_61207;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61205 = 0;
F.line = 85;F.filename = "streams.nim";
Result_61205 = mnewString(Length_61204);
L_61207 = 0;
F.line = 86;F.filename = "streams.nim";
if ((NU)(0) > (NU)(Result_61205->Sup.len)) raiseIndexError();
L_61207 = (*S_61203).Readdata(S_61203, ((void*) (&Result_61205->data[0])), Length_61204);
F.line = 87;F.filename = "streams.nim";
if (!!((L_61207 == Length_61204))) goto LA2;
F.line = 87;F.filename = "streams.nim";
Result_61205 = setLengthStr(Result_61205, L_61207);
LA2: ;
framePtr = framePtr->prev;
return Result_61205;
}
N_NIMCALL(NimStringDesc*, Readline_61210)(TY61027* S_61212) {
NimStringDesc* Result_61213;
NIM_BOOL LOC2;
NIM_CHAR C_61214;
NIM_BOOL LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readLine";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61213 = 0;
F.line = 92;F.filename = "streams.nim";
Result_61213 = copyString(((NimStringDesc*) &TMP61222));
F.line = 93;F.filename = "streams.nim";
while (1) {
LOC2 = (*S_61212).Atend(S_61212);
if (!!(LOC2)) goto LA1;
C_61214 = 0;
F.line = 94;F.filename = "streams.nim";
C_61214 = Readchar_61077(S_61212);
F.line = 95;F.filename = "streams.nim";
if (!((NU8)(C_61214) == (NU8)(13))) goto LA4;
F.line = 96;F.filename = "streams.nim";
C_61214 = Readchar_61077(S_61212);
F.line = 97;F.filename = "streams.nim";
goto LA1;
goto LA3;
LA4: ;
LOC6 = ((NU8)(C_61214) == (NU8)(10));
if (LOC6) goto LA7;
LOC6 = ((NU8)(C_61214) == (NU8)(0));
LA7: ;
if (!LOC6) goto LA8;
F.line = 98;F.filename = "streams.nim";
goto LA1;
goto LA3;
LA8: ;
LA3: ;
F.line = 99;F.filename = "streams.nim";
Result_61213 = addChar(Result_61213, C_61214);
} LA1: ;
framePtr = framePtr->prev;
return Result_61213;
}
N_NIMCALL(NIM_BOOL, Ssatend_61229)(TY61226* S_61231) {
NIM_BOOL Result_61232;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssAtEnd";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61232 = 0;
F.line = 108;F.filename = "streams.nim";
F.line = 587;F.filename = "system.nim";
Result_61232 = ((*S_61231).Data->Sup.len <= (*S_61231).Pos);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_61232;
}
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004) {
NI Result_6005;
NIM_BOOL LOC2;
Result_6005 = 0;
Result_6005 = (NI32)((NU32)(A_6003) - (NU32)(B_6004));
LOC2 = (0 <= (NI32)(Result_6005 ^ A_6003));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI32)(Result_6005 ^ (NI32)((NU32) ~(B_6004))));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_6005;
}
N_NIMCALL(void, Sssetposition_61237)(TY61226* S_61239, NI Pos_61240) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssSetPosition";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 111;F.filename = "streams.nim";
(*S_61239).Pos = ((Pos_61240 <= subInt((*S_61239).Data->Sup.len, 1)) ? Pos_61240 : subInt((*S_61239).Data->Sup.len, 1));
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Ssgetposition_61245)(TY61226* S_61247) {
NI Result_61248;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssGetPosition";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61248 = 0;
F.line = 114;F.filename = "streams.nim";
F.line = 114;F.filename = "streams.nim";
Result_61248 = (*S_61247).Pos;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_61248;
}
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804) {
NI Result_5805;
NIM_BOOL LOC2;
Result_5805 = 0;
Result_5805 = (NI32)((NU32)(A_5803) + (NU32)(B_5804));
LOC2 = (0 <= (NI32)(Result_5805 ^ A_5803));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI32)(Result_5805 ^ B_5804));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5805;
}
N_NIMCALL(NI, Ssreaddata_61249)(TY61226* S_61251, void* Buffer_61252, NI Buflen_61253) {
NI Result_61254;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssReadData";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61254 = 0;
F.line = 117;F.filename = "streams.nim";
Result_61254 = ((Buflen_61253 <= subInt((*S_61251).Data->Sup.len, (*S_61251).Pos)) ? Buflen_61253 : subInt((*S_61251).Data->Sup.len, (*S_61251).Pos));
F.line = 118;F.filename = "streams.nim";
if (!(0 < Result_61254)) goto LA2;
F.line = 119;F.filename = "streams.nim";
if ((NU)((*S_61251).Pos) > (NU)((*S_61251).Data->Sup.len)) raiseIndexError();
memcpy(Buffer_61252, ((void*) (&(*S_61251).Data->data[(*S_61251).Pos])), Result_61254);
F.line = 120;F.filename = "streams.nim";
(*S_61251).Pos = addInt((*S_61251).Pos, Result_61254);
LA2: ;
framePtr = framePtr->prev;
return Result_61254;
}
N_NIMCALL(void, Sswritedata_61274)(TY61226* S_61276, void* Buffer_61277, NI Buflen_61278) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssWriteData";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 123;F.filename = "streams.nim";
if (!(0 < Buflen_61278)) goto LA2;
F.line = 124;F.filename = "streams.nim";
(*S_61276).Data = setLengthStr((*S_61276).Data, addInt((*S_61276).Data->Sup.len, Buflen_61278));
F.line = 125;F.filename = "streams.nim";
if ((NU)((*S_61276).Pos) > (NU)((*S_61276).Data->Sup.len)) raiseIndexError();
memcpy(((void*) (&(*S_61276).Data->data[(*S_61276).Pos])), Buffer_61277, Buflen_61278);
F.line = 126;F.filename = "streams.nim";
(*S_61276).Pos = addInt((*S_61276).Pos, Buflen_61278);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Ssclose_61296)(TY61226* S_61298) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssClose";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 129;F.filename = "streams.nim";
asgnRefNoCycle((void**) &(*S_61298).Data, copyString(NIM_NIL));
framePtr = framePtr->prev;
}
N_NIMCALL(TY61226*, Newstringstream_61299)(NimStringDesc* S_61301) {
TY61226* Result_61302;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newStringStream";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61302 = 0;
F.line = 133;F.filename = "streams.nim";
Result_61302 = (TY61226*) newObj(NTI61224, sizeof(TY61226));
(*Result_61302).Sup.Sup.m_type = NTI61226;
F.line = 134;F.filename = "streams.nim";
asgnRefNoCycle((void**) &(*Result_61302).Data, copyString(S_61301));
F.line = 135;F.filename = "streams.nim";
(*Result_61302).Pos = 0;
F.line = 136;F.filename = "streams.nim";
(*Result_61302).Sup.Close = ((TY61028) (Ssclose_61296));
F.line = 137;F.filename = "streams.nim";
(*Result_61302).Sup.Atend = ((TY61032) (Ssatend_61229));
F.line = 138;F.filename = "streams.nim";
(*Result_61302).Sup.Setposition = ((TY61036) (Sssetposition_61237));
F.line = 139;F.filename = "streams.nim";
(*Result_61302).Sup.Getposition = ((TY61041) (Ssgetposition_61245));
F.line = 140;F.filename = "streams.nim";
(*Result_61302).Sup.Readdata = ((TY61045) (Ssreaddata_61249));
F.line = 141;F.filename = "streams.nim";
(*Result_61302).Sup.Writedata = ((TY61051) (Sswritedata_61274));
framePtr = framePtr->prev;
return Result_61302;
}
N_NIMCALL(void, Fsclose_61325)(TY61323* S_61327) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsClose";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 148;F.filename = "streams.nim";
fclose((*S_61327).F);
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_BOOL, Fsatend_61328)(TY61323* S_61330) {
NIM_BOOL Result_61331;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsAtEnd";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61331 = 0;
F.line = 149;F.filename = "streams.nim";
F.line = 149;F.filename = "streams.nim";
Result_61331 = Endoffile_3638((*S_61330).F);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_61331;
}
N_NIMCALL(void, Fssetposition_61332)(TY61323* S_61334, NI Pos_61335) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsSetPosition";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 150;F.filename = "streams.nim";
Setfilepos_3738((*S_61334).F, ((NI64) (Pos_61335)));
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Fsgetposition_61336)(TY61323* S_61338) {
NI Result_61339;
NI64 LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsGetPosition";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61339 = 0;
F.line = 151;F.filename = "streams.nim";
F.line = 151;F.filename = "streams.nim";
LOC1 = Getfilepos_3742((*S_61338).F);
Result_61339 = ((NI)chckRange64(LOC1, (-2147483647 -1), 2147483647));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_61339;
}
N_NIMCALL(NI, Fsreaddata_61340)(TY61323* S_61342, void* Buffer_61343, NI Buflen_61344) {
NI Result_61345;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsReadData";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61345 = 0;
F.line = 154;F.filename = "streams.nim";
Result_61345 = Readbuffer_3714((*S_61342).F, Buffer_61343, Buflen_61344);
framePtr = framePtr->prev;
return Result_61345;
}
N_NIMCALL(void, Fswritedata_61346)(TY61323* S_61348, void* Buffer_61349, NI Buflen_61350) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsWriteData";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 157;F.filename = "streams.nim";
LOC2 = Writebuffer_3733((*S_61348).F, Buffer_61349, Buflen_61350);
if (!!((LOC2 == Buflen_61350))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_61004(((NimStringDesc*) &TMP61353));
F.line = 158;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(TY61323*, Newfilestream_61354)(FILE* F_61356) {
TY61323* Result_61357;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newFileStream";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61357 = 0;
F.line = 162;F.filename = "streams.nim";
Result_61357 = (TY61323*) newObj(NTI61321, sizeof(TY61323));
(*Result_61357).Sup.Sup.m_type = NTI61323;
F.line = 163;F.filename = "streams.nim";
(*Result_61357).F = F_61356;
F.line = 164;F.filename = "streams.nim";
(*Result_61357).Sup.Close = ((TY61028) (Fsclose_61325));
F.line = 165;F.filename = "streams.nim";
(*Result_61357).Sup.Atend = ((TY61032) (Fsatend_61328));
F.line = 166;F.filename = "streams.nim";
(*Result_61357).Sup.Setposition = ((TY61036) (Fssetposition_61332));
F.line = 167;F.filename = "streams.nim";
(*Result_61357).Sup.Getposition = ((TY61041) (Fsgetposition_61336));
F.line = 168;F.filename = "streams.nim";
(*Result_61357).Sup.Readdata = ((TY61045) (Fsreaddata_61340));
F.line = 169;F.filename = "streams.nim";
(*Result_61357).Sup.Writedata = ((TY61051) (Fswritedata_61346));
framePtr = framePtr->prev;
return Result_61357;
}
N_NIMCALL(TY61323*, Newfilestream_61373)(NimStringDesc* Filename_61375, NU8 Mode_61376) {
TY61323* Result_61377;
FILE* F_61378;
NIM_BOOL LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newFileStream";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_61377 = 0;
F_61378 = 0;
F.line = 175;F.filename = "streams.nim";
LOC2 = Open_3617(&F_61378, Filename_61375, Mode_61376, -1);
if (!LOC2) goto LA3;
F.line = 175;F.filename = "streams.nim";
Result_61377 = Newfilestream_61354(F_61378);
LA3: ;
framePtr = framePtr->prev;
return Result_61377;
}
N_NIMCALL(void, Read_61089)(TY61027* S_61092, NIM_BOOL* Result_61094) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_61092).Readdata(S_61092, ((void*) (Result_61094)), 1);
if (!!((LOC2 == 1))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_61004(((NimStringDesc*) &TMP61401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_61106)(TY61027* S_61109, NI8* Result_61111) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_61109).Readdata(S_61109, ((void*) (Result_61111)), 1);
if (!!((LOC2 == 1))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_61004(((NimStringDesc*) &TMP61401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_61123)(TY61027* S_61126, NI16* Result_61128) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_61126).Readdata(S_61126, ((void*) (Result_61128)), 2);
if (!!((LOC2 == 2))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_61004(((NimStringDesc*) &TMP61401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_61140)(TY61027* S_61143, NI32* Result_61145) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_61143).Readdata(S_61143, ((void*) (Result_61145)), 4);
if (!!((LOC2 == 4))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_61004(((NimStringDesc*) &TMP61401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_61157)(TY61027* S_61160, NI64* Result_61162) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_61160).Readdata(S_61160, ((void*) (Result_61162)), 8);
if (!!((LOC2 == 8))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_61004(((NimStringDesc*) &TMP61401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_61174)(TY61027* S_61177, NF32* Result_61179) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_61177).Readdata(S_61177, ((void*) (Result_61179)), 4);
if (!!((LOC2 == 4))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_61004(((NimStringDesc*) &TMP61401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_61191)(TY61027* S_61194, NF64* Result_61196) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_61194).Readdata(S_61194, ((void*) (Result_61196)), 8);
if (!!((LOC2 == 8))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_61004(((NimStringDesc*) &TMP61401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NOINLINE(void, streamsInit)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "streams";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}

