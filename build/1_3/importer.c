/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY42532 TY42532;
typedef struct TY50525 TY50525;
typedef struct TY50551 TY50551;
typedef struct TY50547 TY50547;
typedef struct TY49011 TY49011;
typedef struct TY50519 TY50519;
typedef struct TY49005 TY49005;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY50529 TY50529;
typedef struct TY50527 TY50527;
typedef struct TY50539 TY50539;
typedef struct TY47008 TY47008;
typedef struct TY50543 TY50543;
typedef struct TY102012 TY102012;
typedef struct TY100002 TY100002;
typedef struct TY102006 TY102006;
typedef struct TY54107 TY54107;
typedef struct TY54109 TY54109;
typedef struct TY50900 TY50900;
typedef struct TY50896 TY50896;
typedef struct TY50898 TY50898;
typedef struct TY38019 TY38019;
typedef struct TY38013 TY38013;
typedef struct TY50549 TY50549;
typedef struct TY54092 TY54092;
typedef struct TY54079 TY54079;
typedef struct TY10602 TY10602;
typedef struct TY8004 TY8004;
typedef struct TY10990 TY10990;
typedef struct TY10618 TY10618;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY10988 TY10988;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY42532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY50525 {
TY50551* Typ;
NimStringDesc* Comment;
TY42532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY50547* Sym;
} S4;
struct {TY49011* Ident;
} S5;
struct {TY50519* Sons;
} S6;
} KindU;
};
typedef NU8 TY50999[16];
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY49005 {
  TNimObject Sup;
NI Id;
};
struct TY49011 {
  TY49005 Sup;
NimStringDesc* S;
TY49011* Next;
NI H;
};
struct TY50529 {
TNimType* m_type;
NI Counter;
TY50527* Data;
};
struct TY50539 {
NU8 K;
NU8 S;
NU8 Flags;
TY50551* T;
TY47008* R;
NI A;
};
struct TY50547 {
  TY49005 Sup;
NU8 Kind;
NU8 Magic;
TY50551* Typ;
TY49011* Name;
TY42532 Info;
TY50547* Owner;
NU32 Flags;
TY50529 Tab;
TY50525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY50539 Loc;
TY50543* Annex;
};
struct TY100002 {
  TNimObject Sup;
};
struct TY54107 {
NI Tos;
TY54109* Stack;
};
struct TY50900 {
NI Counter;
NI Max;
TY50896* Head;
TY50898* Data;
};
struct TY38019 {
TNimType* m_type;
TY38013* Head;
TY38013* Tail;
NI Counter;
};
typedef N_NIMCALL_PTR(TY50525*, TY102032) (TY102012* C_102033, TY50525* N_102034);
typedef N_NIMCALL_PTR(TY50525*, TY102037) (TY102012* C_102038, TY50525* N_102039);
struct TY102012 {
  TY100002 Sup;
TY50547* Module;
TY102006* P;
NI Instcounter;
TY50525* Generics;
NI Lastgenericidx;
TY54107 Tab;
TY50900 Ambiguoussymbols;
TY50527* Converters;
TY38019 Optionstack;
TY38019 Libs;
NIM_BOOL Fromcache;
TY102032 Semconstexpr;
TY102037 Semexpr;
TY50900 Includedfiles;
NimStringDesc* Filename;
TY50529 Userpragmas;
};
struct TY50551 {
  TY49005 Sup;
NU8 Kind;
TY50549* Sons;
TY50525* N;
NU8 Flags;
NU8 Callconv;
TY50547* Owner;
TY50547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY50539 Loc;
};
struct TY54092 {
NI H;
TY49011* Name;
};
struct TY54079 {
NI H;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
typedef N_NIMCALL_PTR(TY50547*, TY100044) (NimStringDesc* Filename_100045);
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
typedef N_STDCALL_PTR(void, TY8016) (TY8004* L_8018);
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY8004 {
void* Debuginfo;
NI32 Lockcount;
NI32 Recursioncount;
NI Owningthread;
NI Locksemaphore;
NI32 Reserved;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY8004 Cyclerootslock;
TY8004 Zctlock;
TY10988 Stat;
};
typedef N_STDCALL_PTR(void, TY8020) (TY8004* L_8022);
struct TY47008 {
  TNimObject Sup;
TY47008* Left;
TY47008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY38013 {
  TNimObject Sup;
TY38013* Prev;
TY38013* Next;
};
struct TY50543 {
  TY38013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY47008* Name;
TY50525* Path;
};
struct TY102006 {
TY50547* Owner;
TY50547* Resultsym;
NI Nestedloopcounter;
NI Nestedblockcounter;
};
typedef NI TY8614[16];
struct TY50896 {
TY50896* Next;
NI Key;
TY8614 Bits;
};
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY50519 {
  TGenericSeq Sup;
  TY50525* data[SEQ_DECL_SIZE];
};
struct TY50527 {
  TGenericSeq Sup;
  TY50547* data[SEQ_DECL_SIZE];
};
struct TY54109 {
  TGenericSeq Sup;
  TY50529 data[SEQ_DECL_SIZE];
};
struct TY50898 {
  TGenericSeq Sup;
  TY50896* data[SEQ_DECL_SIZE];
};
struct TY50549 {
  TGenericSeq Sup;
  TY50551* data[SEQ_DECL_SIZE];
};
N_NIMCALL(NimStringDesc*, Findmodule_105016)(TY42532 Info_105018, NimStringDesc* Modulename_105019);
N_NIMCALL(NimStringDesc*, Findfile_41087)(NimStringDesc* F_41089);
N_NIMCALL(NimStringDesc*, nosaddFileExt)(NimStringDesc* Filename_33844, NimStringDesc* Ext_33845);
N_NIMCALL(void, Limessage_42562)(TY42532 Info_42564, NU8 Msg_42565, NimStringDesc* Arg_42566);
N_NIMCALL(NimStringDesc*, Getmodulefile_105013)(TY50525* N_105015);
N_NIMCALL(NimStringDesc*, nosUnixToNativePath)(NimStringDesc* Path_31256);
N_NOINLINE(void, raiseFieldError)(NimStringDesc* F_5475);
N_NIMCALL(void, Internalerror_42567)(TY42532 Info_42569, NimStringDesc* Errmsg_42570);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17308);
N_NIMCALL(void, Rawimportsymbol_105070)(TY102012* C_105072, TY50547* S_105073);
N_NIMCALL(TY50547*, Strtableget_54069)(TY50529* T_54071, TY49011* Name_54072);
N_NOINLINE(void, raiseIndexError)(void);
N_NIMCALL(void, Intsetincl_50914)(TY50900* S_50917, NI Key_50918);
N_NIMCALL(void, Strtableadd_54064)(TY50529* T_54067, TY50547* N_54068);
N_NIMCALL(NI, Sonslen_50803)(TY50525* N_50805);
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004);
N_NOINLINE(void, raiseOverflow)(void);
N_NIMCALL(TY50547*, Initidentiter_54095)(TY54092* Ti_54098, TY50529* Tab_54099, TY49011* S_54100);
N_NIMCALL(TY50547*, Nextidentiter_54101)(TY54092* Ti_54104, TY50529* Tab_54105);
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804);
N_NIMCALL(void, Addconverter_102058)(TY102012* C_102060, TY50547* Conv_102061);
N_NIMCALL(void, Importsymbol_105232)(TY102012* C_105234, TY50525* Ident_105235, TY50547* Frommod_105236);
N_NIMCALL(void, Loadstub_88070)(TY50547* S_88072);
N_NIMCALL(void, Importallsymbols_105009)(TY102012* C_105011, TY50547* Frommod_105012);
N_NIMCALL(TY50547*, Inittabiter_54081)(TY54079* Ti_54084, TY50529* Tab_54085);
static N_INLINE(void, appendString)(NimStringDesc* Dest_17392, NimStringDesc* Src_17393);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_18379, TNimType* Typ_18380);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_17287);
N_NIMCALL(TY50547*, Nextiter_54086)(TY54079* Ti_54089, TY50529* Tab_54090);
N_NIMCALL(TY50525*, Evalimport_105001)(TY102012* C_105003, TY50525* N_105004);
N_NIMCALL(void, Adddecl_103026)(TY102012* C_103028, TY50547* Sym_103029);
N_NIMCALL(TY50525*, Evalfrom_105005)(TY102012* C_105007, TY50525* N_105008);
N_NIMCALL(void, Checkminsonslen_102103)(TY50525* N_102105, NI Length_102106);
N_NIMCALL(TY50525*, Newsymnode_50734)(TY50547* Sym_50736);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819);
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660);
N_NOINLINE(void, Addzct_11025)(TY10618* S_11028, TY10602* C_11029);
STRING_LITERAL(TMP105021, "nim", 3);
static NIM_CONST TY50999 TMP105062 = {
0x00, 0xC0, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP105063, "strVal", 6);
static NIM_CONST TY50999 TMP105064 = {
0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP105065, "ident", 5);
static NIM_CONST TY50999 TMP105066 = {
0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP105067, "sym", 3);
STRING_LITERAL(TMP105068, "getModuleFile()", 15);
STRING_LITERAL(TMP105069, "", 0);
static NIM_CONST TY50999 TMP105229 = {
0xEC, 0xFF, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP105230, "sons", 4);
STRING_LITERAL(TMP105231, "rawImportSymbol", 15);
STRING_LITERAL(TMP105320, "importSymbol", 12);
STRING_LITERAL(TMP105321, "importSymbol: 2", 15);
STRING_LITERAL(TMP105322, "importSymbol: 3", 15);
STRING_LITERAL(TMP105388, "importAllSymbols: ", 18);
extern TNimType* NTI50174; /* TSymKind */
extern TY100044 Gimportmodule_100047;
extern TY8016 Dl_8015;
extern TY10990 Gch_11010;
extern TY8020 Dl_8019;
N_NIMCALL(NimStringDesc*, Findmodule_105016)(TY42532 Info_105018, NimStringDesc* Modulename_105019) {
NimStringDesc* Result_105020;
NimStringDesc* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "findModule";
F.prev = framePtr;
F.filename = "rod/importer.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_105020 = 0;
F.line = 24;F.filename = "importer.nim";
LOC1 = 0;
LOC1 = nosaddFileExt(Modulename_105019, ((NimStringDesc*) &TMP105021));
Result_105020 = Findfile_41087(LOC1);
F.line = 25;F.filename = "importer.nim";
if (!((Result_105020) && (Result_105020)->Sup.len == 0)) goto LA3;
F.line = 25;F.filename = "importer.nim";
Limessage_42562(Info_105018, ((NU8) 2), Modulename_105019);
LA3: ;
framePtr = framePtr->prev;
return Result_105020;
}
N_NIMCALL(NimStringDesc*, Getmodulefile_105013)(TY50525* N_105015) {
NimStringDesc* Result_105025;
NimStringDesc* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getModuleFile";
F.prev = framePtr;
F.filename = "rod/importer.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_105025 = 0;
F.line = 28;F.filename = "importer.nim";
switch ((*N_105015).Kind) {
case ((NU8) 14):
case ((NU8) 15):
case ((NU8) 16):
F.line = 30;F.filename = "importer.nim";
if (!(((TMP105062[(*N_105015).Kind/8] &(1<<((*N_105015).Kind%8)))!=0))) raiseFieldError(((NimStringDesc*) &TMP105063));
LOC1 = 0;
LOC1 = nosUnixToNativePath((*N_105015).KindU.S3.Strval);
Result_105025 = Findmodule_105016((*N_105015).Info, LOC1);
break;
case ((NU8) 2):
F.line = 32;F.filename = "importer.nim";
if (!(((TMP105064[(*N_105015).Kind/8] &(1<<((*N_105015).Kind%8)))!=0))) raiseFieldError(((NimStringDesc*) &TMP105065));
Result_105025 = Findmodule_105016((*N_105015).Info, (*(*N_105015).KindU.S5.Ident).S);
break;
case ((NU8) 3):
F.line = 34;F.filename = "importer.nim";
if (!(((TMP105066[(*N_105015).Kind/8] &(1<<((*N_105015).Kind%8)))!=0))) raiseFieldError(((NimStringDesc*) &TMP105067));
Result_105025 = Findmodule_105016((*N_105015).Info, (*(*(*N_105015).KindU.S4.Sym).Name).S);
break;
default:
F.line = 36;F.filename = "importer.nim";
Internalerror_42567((*N_105015).Info, ((NimStringDesc*) &TMP105068));
F.line = 37;F.filename = "importer.nim";
Result_105025 = copyString(((NimStringDesc*) &TMP105069));
break;
}
framePtr = framePtr->prev;
return Result_105025;
}
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004) {
NI Result_6005;
NIM_BOOL LOC2;
Result_6005 = 0;
Result_6005 = (NI32)((NU32)(A_6003) - (NU32)(B_6004));
LOC2 = (0 <= (NI32)(Result_6005 ^ A_6003));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI32)(Result_6005 ^ (NI32)((NU32) ~(B_6004))));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_6005;
}
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804) {
NI Result_5805;
NIM_BOOL LOC2;
Result_5805 = 0;
Result_5805 = (NI32)((NU32)(A_5803) + (NU32)(B_5804));
LOC2 = (0 <= (NI32)(Result_5805 ^ A_5803));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI32)(Result_5805 ^ B_5804));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5805;
}
N_NIMCALL(void, Rawimportsymbol_105070)(TY102012* C_105072, TY50547* S_105073) {
TY50547* Copy_105074;
TY50547* Check_105075;
NIM_BOOL LOC2;
TY50551* Etyp_105112;
NI J_105147;
NI HEX3Atmp_105220;
NI LOC15;
NI Res_105222;
TY50547* E_105172;
TY54092 It_105182;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawImportSymbol";
F.prev = framePtr;
F.filename = "rod/importer.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Copy_105074 = 0;
F.line = 42;F.filename = "importer.nim";
Copy_105074 = S_105073;
Check_105075 = 0;
F.line = 44;F.filename = "importer.nim";
if ((NU)(0) >= (NU)((*C_105072).Tab.Stack->Sup.len)) raiseIndexError();
Check_105075 = Strtableget_54069(&(*C_105072).Tab.Stack->data[0], (*S_105073).Name);
F.line = 45;F.filename = "importer.nim";
LOC2 = !((Check_105075 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = !(((*Check_105075).Sup.Id == (*Copy_105074).Sup.Id));
LA3: ;
if (!LOC2) goto LA4;
F.line = 46;F.filename = "importer.nim";
if (!!(((1967104 &(1<<(((*S_105073).Kind)&31)))!=0))) goto LA7;
F.line = 48;F.filename = "importer.nim";
Intsetincl_50914(&(*C_105072).Ambiguoussymbols, (*Copy_105074).Sup.Id);
F.line = 49;F.filename = "importer.nim";
Intsetincl_50914(&(*C_105072).Ambiguoussymbols, (*Check_105075).Sup.Id);
LA7: ;
LA4: ;
F.line = 50;F.filename = "importer.nim";
if ((NU)(0) >= (NU)((*C_105072).Tab.Stack->Sup.len)) raiseIndexError();
Strtableadd_54064(&(*C_105072).Tab.Stack->data[0], Copy_105074);
F.line = 51;F.filename = "importer.nim";
if (!((*S_105073).Kind == ((NU8) 6))) goto LA10;
Etyp_105112 = 0;
F.line = 52;F.filename = "importer.nim";
Etyp_105112 = (*S_105073).Typ;
F.line = 53;F.filename = "importer.nim";
if (!((*Etyp_105112).Kind == ((NU8) 1) || (*Etyp_105112).Kind == ((NU8) 14))) goto LA13;
J_105147 = 0;
HEX3Atmp_105220 = 0;
F.line = 54;F.filename = "importer.nim";
LOC15 = Sonslen_50803((*Etyp_105112).N);
HEX3Atmp_105220 = subInt(LOC15, 1);
Res_105222 = 0;
F.line = 1021;F.filename = "system.nim";
Res_105222 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_105222 <= HEX3Atmp_105220)) goto LA16;
F.line = 1021;F.filename = "system.nim";
J_105147 = Res_105222;
E_105172 = 0;
F.line = 55;F.filename = "importer.nim";
if (((TMP105229[(*(*Etyp_105112).N).Kind/8] &(1<<((*(*Etyp_105112).N).Kind%8)))!=0)) raiseFieldError(((NimStringDesc*) &TMP105230));
if ((NU)(J_105147) >= (NU)((*(*Etyp_105112).N).KindU.S6.Sons->Sup.len)) raiseIndexError();
if (!(((TMP105066[(*(*(*Etyp_105112).N).KindU.S6.Sons->data[J_105147]).Kind/8] &(1<<((*(*(*Etyp_105112).N).KindU.S6.Sons->data[J_105147]).Kind%8)))!=0))) raiseFieldError(((NimStringDesc*) &TMP105067));
E_105172 = (*(*(*Etyp_105112).N).KindU.S6.Sons->data[J_105147]).KindU.S4.Sym;
F.line = 56;F.filename = "importer.nim";
if (!!(((*E_105172).Kind == ((NU8) 16)))) goto LA18;
F.line = 57;F.filename = "importer.nim";
Internalerror_42567((*S_105073).Info, ((NimStringDesc*) &TMP105231));
LA18: ;
memset((void*)&It_105182, 0, sizeof(It_105182));
F.line = 62;F.filename = "importer.nim";
if ((NU)(0) >= (NU)((*C_105072).Tab.Stack->Sup.len)) raiseIndexError();
Check_105075 = Initidentiter_54095(&It_105182, &(*C_105072).Tab.Stack->data[0], (*E_105172).Name);
F.line = 63;F.filename = "importer.nim";
while (1) {
if (!!((Check_105075 == NIM_NIL))) goto LA20;
F.line = 64;F.filename = "importer.nim";
if (!((*Check_105075).Sup.Id == (*E_105172).Sup.Id)) goto LA22;
F.line = 65;F.filename = "importer.nim";
E_105172 = NIM_NIL;
F.line = 66;F.filename = "importer.nim";
goto LA20;
LA22: ;
F.line = 67;F.filename = "importer.nim";
if ((NU)(0) >= (NU)((*C_105072).Tab.Stack->Sup.len)) raiseIndexError();
Check_105075 = Nextidentiter_54101(&It_105182, &(*C_105072).Tab.Stack->data[0]);
} LA20: ;
F.line = 68;F.filename = "importer.nim";
if (!!((E_105172 == NIM_NIL))) goto LA25;
F.line = 69;F.filename = "importer.nim";
Rawimportsymbol_105070(C_105072, E_105172);
LA25: ;
F.line = 1024;F.filename = "system.nim";
Res_105222 = addInt(Res_105222, 1);
} LA16: ;
LA13: ;
goto LA9;
LA10: ;
if (!((*S_105073).Kind == ((NU8) 12))) goto LA27;
F.line = 71;F.filename = "importer.nim";
Addconverter_102058(C_105072, S_105073);
goto LA9;
LA27: ;
LA9: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Importsymbol_105232)(TY102012* C_105234, TY50525* Ident_105235, TY50547* Frommod_105236) {
TY50547* S_105258;
TY54092 It_105302;
TY50547* E_105304;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "importSymbol";
F.prev = framePtr;
F.filename = "rod/importer.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 74;F.filename = "importer.nim";
if (!!(((*Ident_105235).Kind == ((NU8) 2)))) goto LA2;
F.line = 74;F.filename = "importer.nim";
Internalerror_42567((*Ident_105235).Info, ((NimStringDesc*) &TMP105320));
LA2: ;
S_105258 = 0;
F.line = 75;F.filename = "importer.nim";
if (!(((TMP105064[(*Ident_105235).Kind/8] &(1<<((*Ident_105235).Kind%8)))!=0))) raiseFieldError(((NimStringDesc*) &TMP105065));
S_105258 = Strtableget_54069(&(*Frommod_105236).Tab, (*Ident_105235).KindU.S5.Ident);
F.line = 76;F.filename = "importer.nim";
if (!(S_105258 == NIM_NIL)) goto LA5;
F.line = 76;F.filename = "importer.nim";
if (!(((TMP105064[(*Ident_105235).Kind/8] &(1<<((*Ident_105235).Kind%8)))!=0))) raiseFieldError(((NimStringDesc*) &TMP105065));
Limessage_42562((*Ident_105235).Info, ((NU8) 58), (*(*Ident_105235).KindU.S5.Ident).S);
LA5: ;
F.line = 77;F.filename = "importer.nim";
if (!((*S_105258).Kind == ((NU8) 20))) goto LA8;
F.line = 77;F.filename = "importer.nim";
Loadstub_88070(S_105258);
LA8: ;
F.line = 78;F.filename = "importer.nim";
if (!!(((IL64(3229552640) &(1<<(((*S_105258).Kind)&31)))!=0))) goto LA11;
F.line = 79;F.filename = "importer.nim";
Internalerror_42567((*Ident_105235).Info, ((NimStringDesc*) &TMP105321));
LA11: ;
F.line = 81;F.filename = "importer.nim";
switch ((*S_105258).Kind) {
case ((NU8) 9):
case ((NU8) 10):
case ((NU8) 11):
case ((NU8) 13):
case ((NU8) 14):
case ((NU8) 12):
memset((void*)&It_105302, 0, sizeof(It_105302));
E_105304 = 0;
F.line = 85;F.filename = "importer.nim";
E_105304 = Initidentiter_54095(&It_105302, &(*Frommod_105236).Tab, (*S_105258).Name);
F.line = 86;F.filename = "importer.nim";
while (1) {
if (!!((E_105304 == NIM_NIL))) goto LA13;
F.line = 87;F.filename = "importer.nim";
if (!!(((*(*E_105304).Name).Sup.Id == (*(*S_105258).Name).Sup.Id))) goto LA15;
F.line = 87;F.filename = "importer.nim";
Internalerror_42567((*Ident_105235).Info, ((NimStringDesc*) &TMP105322));
LA15: ;
F.line = 88;F.filename = "importer.nim";
Rawimportsymbol_105070(C_105234, E_105304);
F.line = 89;F.filename = "importer.nim";
E_105304 = Nextidentiter_54101(&It_105302, &(*Frommod_105236).Tab);
} LA13: ;
break;
default:
F.line = 90;F.filename = "importer.nim";
Rawimportsymbol_105070(C_105234, S_105258);
break;
}
framePtr = framePtr->prev;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_17392, NimStringDesc* Src_17393) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 150;F.filename = "sysstr.nim";
memcpy(((NCSTRING) (&(*Dest_17392).data[((*Dest_17392).Sup.len)-0])), ((NCSTRING) ((*Src_17393).data)), ((NI32) ((NI32)((NI32)((*Src_17393).Sup.len + 1) * 1))));
F.line = 151;F.filename = "sysstr.nim";
(*Dest_17392).Sup.len += (*Src_17393).Sup.len;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Importallsymbols_105009)(TY102012* C_105011, TY50547* Frommod_105012) {
TY54079 I_105327;
TY50547* S_105329;
NimStringDesc* LOC11;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "importAllSymbols";
F.prev = framePtr;
F.filename = "rod/importer.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
memset((void*)&I_105327, 0, sizeof(I_105327));
S_105329 = 0;
F.line = 94;F.filename = "importer.nim";
S_105329 = Inittabiter_54081(&I_105327, &(*Frommod_105012).Tab);
F.line = 95;F.filename = "importer.nim";
while (1) {
if (!!((S_105329 == NIM_NIL))) goto LA1;
F.line = 96;F.filename = "importer.nim";
if (!!(((*S_105329).Kind == ((NU8) 18)))) goto LA3;
F.line = 97;F.filename = "importer.nim";
if (!!(((*S_105329).Kind == ((NU8) 16)))) goto LA6;
F.line = 98;F.filename = "importer.nim";
if (!!(((IL64(3229552640) &(1<<(((*S_105329).Kind)&31)))!=0))) goto LA9;
F.line = 99;F.filename = "importer.nim";
LOC11 = 0;
LOC11 = rawNewString(reprEnum((*S_105329).Kind, NTI50174)->Sup.len + 18);
appendString(LOC11, ((NimStringDesc*) &TMP105388));
appendString(LOC11, reprEnum((*S_105329).Kind, NTI50174));
Internalerror_42567((*S_105329).Info, LOC11);
LA9: ;
F.line = 100;F.filename = "importer.nim";
Rawimportsymbol_105070(C_105011, S_105329);
LA6: ;
LA3: ;
F.line = 101;F.filename = "importer.nim";
S_105329 = Nextiter_54086(&I_105327, &(*Frommod_105012).Tab);
} LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(TY50525*, Evalimport_105001)(TY102012* C_105003, TY50525* N_105004) {
TY50525* Result_105393;
NI I_105401;
NI HEX3Atmp_105440;
NI LOC1;
NI Res_105442;
NimStringDesc* F_105414;
TY50547* M_105415;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "evalImport";
F.prev = framePtr;
F.filename = "rod/importer.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_105393 = 0;
F.line = 104;F.filename = "importer.nim";
Result_105393 = N_105004;
I_105401 = 0;
HEX3Atmp_105440 = 0;
F.line = 105;F.filename = "importer.nim";
LOC1 = Sonslen_50803(N_105004);
HEX3Atmp_105440 = subInt(LOC1, 1);
Res_105442 = 0;
F.line = 1021;F.filename = "system.nim";
Res_105442 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_105442 <= HEX3Atmp_105440)) goto LA2;
F.line = 1021;F.filename = "system.nim";
I_105401 = Res_105442;
F_105414 = 0;
F.line = 106;F.filename = "importer.nim";
if (((TMP105229[(*N_105004).Kind/8] &(1<<((*N_105004).Kind%8)))!=0)) raiseFieldError(((NimStringDesc*) &TMP105230));
if ((NU)(I_105401) >= (NU)((*N_105004).KindU.S6.Sons->Sup.len)) raiseIndexError();
F_105414 = Getmodulefile_105013((*N_105004).KindU.S6.Sons->data[I_105401]);
M_105415 = 0;
F.line = 107;F.filename = "importer.nim";
M_105415 = Gimportmodule_100047(F_105414);
F.line = 108;F.filename = "importer.nim";
if (!(((*M_105415).Flags &(1<<((((NU8) 22))&31)))!=0)) goto LA4;
F.line = 109;F.filename = "importer.nim";
if (((TMP105229[(*N_105004).Kind/8] &(1<<((*N_105004).Kind%8)))!=0)) raiseFieldError(((NimStringDesc*) &TMP105230));
if ((NU)(I_105401) >= (NU)((*N_105004).KindU.S6.Sons->Sup.len)) raiseIndexError();
Limessage_42562((*(*N_105004).KindU.S6.Sons->data[I_105401]).Info, ((NU8) 213), (*(*M_105415).Name).S);
LA4: ;
F.line = 111;F.filename = "importer.nim";
Adddecl_103026(C_105003, M_105415);
F.line = 112;F.filename = "importer.nim";
Importallsymbols_105009(C_105003, M_105415);
F.line = 1024;F.filename = "system.nim";
Res_105442 = addInt(Res_105442, 1);
} LA2: ;
framePtr = framePtr->prev;
return Result_105393;
}
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038) {
TY10602* Result_11039;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "usrToCell";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11039 = 0;
F.line = 100;F.filename = "gc.nim";
Result_11039 = ((TY10602*) ((NI32)((NU32)(((NI) (Usr_11038))) - (NU32)(((NI) (((NI)sizeof(TY10602))))))));
framePtr = framePtr->prev;
return Result_11039;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7408;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicInc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7408 = 0;
F.line = 29;F.filename = "systhread.nim";
Result_7408 = __sync_add_and_fetch(Memloc_3004, X_3005);
framePtr = framePtr->prev;
return Result_7408;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7606;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicDec";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7606 = 0;
F.line = 37;F.filename = "systhread.nim";
Result_7606 = __sync_sub_and_fetch(Memloc_3009, X_3010);
framePtr = framePtr->prev;
return Result_7606;
}
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 211;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 211;F.filename = "gc.nim";
Dl_8015(&Gch_11010.Zctlock);
LA2: ;
F.line = 212;F.filename = "gc.nim";
Addzct_11025(&Gch_11010.Zct, C_11660);
F.line = 213;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 213;F.filename = "gc.nim";
Dl_8019(&Gch_11010.Zctlock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819) {
TY10602* C_11820;
NI LOC4;
TY10602* C_11822;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRefNoCycle";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 244;F.filename = "gc.nim";
if (!!((Src_11819 == NIM_NIL))) goto LA2;
C_11820 = 0;
F.line = 245;F.filename = "gc.nim";
C_11820 = Usrtocell_11036(Src_11819);
F.line = 246;F.filename = "gc.nim";
LOC4 = Atomicinc_3001(&(*C_11820).Refcount, 8);
LA2: ;
F.line = 247;F.filename = "gc.nim";
if (!!(((*Dest_11818) == NIM_NIL))) goto LA6;
C_11822 = 0;
F.line = 248;F.filename = "gc.nim";
C_11822 = Usrtocell_11036((*Dest_11818));
F.line = 249;F.filename = "gc.nim";
LOC9 = Atomicdec_3006(&(*C_11822).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
F.line = 250;F.filename = "gc.nim";
Rtladdzct_11658(C_11822);
LA10: ;
LA6: ;
F.line = 251;F.filename = "gc.nim";
(*Dest_11818) = Src_11819;
framePtr = framePtr->prev;
}
N_NIMCALL(TY50525*, Evalfrom_105005)(TY102012* C_105007, TY50525* N_105008) {
TY50525* Result_105449;
NimStringDesc* F_105462;
TY50547* M_105463;
NI I_105483;
NI HEX3Atmp_105497;
NI LOC1;
NI Res_105499;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "evalFrom";
F.prev = framePtr;
F.filename = "rod/importer.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_105449 = 0;
F.line = 115;F.filename = "importer.nim";
Result_105449 = N_105008;
F.line = 116;F.filename = "importer.nim";
Checkminsonslen_102103(N_105008, 2);
F_105462 = 0;
F.line = 117;F.filename = "importer.nim";
if (((TMP105229[(*N_105008).Kind/8] &(1<<((*N_105008).Kind%8)))!=0)) raiseFieldError(((NimStringDesc*) &TMP105230));
if ((NU)(0) >= (NU)((*N_105008).KindU.S6.Sons->Sup.len)) raiseIndexError();
F_105462 = Getmodulefile_105013((*N_105008).KindU.S6.Sons->data[0]);
M_105463 = 0;
F.line = 118;F.filename = "importer.nim";
M_105463 = Gimportmodule_100047(F_105462);
F.line = 119;F.filename = "importer.nim";
if (((TMP105229[(*N_105008).Kind/8] &(1<<((*N_105008).Kind%8)))!=0)) raiseFieldError(((NimStringDesc*) &TMP105230));
if ((NU)(0) >= (NU)((*N_105008).KindU.S6.Sons->Sup.len)) raiseIndexError();
asgnRefNoCycle((void**) &(*N_105008).KindU.S6.Sons->data[0], Newsymnode_50734(M_105463));
F.line = 120;F.filename = "importer.nim";
Adddecl_103026(C_105007, M_105463);
I_105483 = 0;
HEX3Atmp_105497 = 0;
F.line = 121;F.filename = "importer.nim";
LOC1 = Sonslen_50803(N_105008);
HEX3Atmp_105497 = subInt(LOC1, 1);
Res_105499 = 0;
F.line = 1021;F.filename = "system.nim";
Res_105499 = 1;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_105499 <= HEX3Atmp_105497)) goto LA2;
F.line = 1021;F.filename = "system.nim";
I_105483 = Res_105499;
F.line = 121;F.filename = "importer.nim";
if (((TMP105229[(*N_105008).Kind/8] &(1<<((*N_105008).Kind%8)))!=0)) raiseFieldError(((NimStringDesc*) &TMP105230));
if ((NU)(I_105483) >= (NU)((*N_105008).KindU.S6.Sons->Sup.len)) raiseIndexError();
Importsymbol_105232(C_105007, (*N_105008).KindU.S6.Sons->data[I_105483], M_105463);
F.line = 1024;F.filename = "system.nim";
Res_105499 = addInt(Res_105499, 1);
} LA2: ;
framePtr = framePtr->prev;
return Result_105449;
}
N_NOINLINE(void, importerInit)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "importer";
F.prev = framePtr;
F.filename = "rod/importer.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}

