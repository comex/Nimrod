/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

#include <pthread.h>
typedef struct TY420 TY420;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY418 TY418;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
typedef struct TNimObject TNimObject;
typedef struct TY10802 TY10802;
typedef struct TY11190 TY11190;
typedef struct TY10818 TY10818;
typedef struct TY10814 TY10814;
typedef struct TY10810 TY10810;
typedef struct TY11188 TY11188;
typedef struct TY65027 TY65027;
typedef struct TY65226 TY65226;
typedef struct TY65323 TY65323;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct E_Base {
  TNimObject Sup;
E_Base* parent;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY418 {
  TY416 Sup;
};
struct TY420 {
  TY418 Sup;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11188 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11190 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
NI Cyclerootslock;
NI Zctlock;
TY11188 Stat;
};
typedef N_NIMCALL_PTR(void, TY65028) (TY65027* S_65029);
typedef N_NIMCALL_PTR(NIM_BOOL, TY65032) (TY65027* S_65033);
typedef N_NIMCALL_PTR(void, TY65036) (TY65027* S_65037, NI Pos_65038);
typedef N_NIMCALL_PTR(NI, TY65041) (TY65027* S_65042);
typedef N_NIMCALL_PTR(NI, TY65045) (TY65027* S_65046, void* Buffer_65047, NI Buflen_65048);
typedef N_NIMCALL_PTR(void, TY65051) (TY65027* S_65052, void* Buffer_65053, NI Buflen_65054);
struct TY65027 {
  TNimObject Sup;
TY65028 Close;
TY65032 Atend;
TY65036 Setposition;
TY65041 Getposition;
TY65045 Readdata;
TY65051 Writedata;
};
struct TY65226 {
  TY65027 Sup;
NimStringDesc* Data;
NI Pos;
};
struct TY65323 {
  TY65027 Sup;
FILE* F;
};
typedef NI TY8814[16];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
N_NIMCALL(TY420*, Neweio_65004)(NimStringDesc* Msg_65006);
N_NIMCALL(void*, newObj)(TNimType* Typ_12507, NI Size_12508);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12018, void* Src_12019);
static N_INLINE(TY10802*, Usrtocell_11236)(void* Usr_11238);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_11858)(TY10802* C_11860);
N_NOINLINE(void, Addzct_11225)(TY10818* S_11228, TY10802* C_11229);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17508);
N_NIMCALL(void, Write_65064)(TY65027* S_65066, NimStringDesc* X_65067);
N_NIMCALL(NIM_CHAR, Readchar_65077)(TY65027* S_65079);
N_NIMCALL(NIM_BOOL, Readbool_65082)(TY65027* S_65084);
N_NIMCALL(NI8, Readint8_65099)(TY65027* S_65101);
N_NIMCALL(NI16, Readint16_65116)(TY65027* S_65118);
N_NIMCALL(int, Readint32_65133)(TY65027* S_65135);
N_NIMCALL(NI64, Readint64_65150)(TY65027* S_65152);
N_NIMCALL(NF32, Readfloat32_65167)(TY65027* S_65169);
N_NIMCALL(NF64, Readfloat64_65184)(TY65027* S_65186);
N_NIMCALL(NimStringDesc*, Readstr_65201)(TY65027* S_65203, NI Length_65204);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1349);
N_NOINLINE(void, raiseIndexError)(void);
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17625, NI Newlen_17626);
N_NIMCALL(NimStringDesc*, Readline_65210)(TY65027* S_65212);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NIM_BOOL, Ssatend_65229)(TY65226* S_65231);
N_NIMCALL(void, Sssetposition_65237)(TY65226* S_65239, NI Pos_65240);
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004);
N_NOINLINE(void, raiseOverflow)(void);
N_NIMCALL(NI, Ssgetposition_65245)(TY65226* S_65247);
N_NIMCALL(NI, Ssreaddata_65249)(TY65226* S_65251, void* Buffer_65252, NI Buflen_65253);
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804);
N_NIMCALL(void, Sswritedata_65274)(TY65226* S_65276, void* Buffer_65277, NI Buflen_65278);
N_NIMCALL(void, Ssclose_65296)(TY65226* S_65298);
N_NIMCALL(TY65226*, Newstringstream_65299)(NimStringDesc* S_65301);
N_NIMCALL(void, Fsclose_65325)(TY65323* S_65327);
N_NIMCALL(NIM_BOOL, Fsatend_65328)(TY65323* S_65330);
N_NIMCALL(NIM_BOOL, Endoffile_3638)(FILE* F_3640);
N_NIMCALL(void, Fssetposition_65332)(TY65323* S_65334, NI Pos_65335);
N_NIMCALL(void, Setfilepos_3738)(FILE* F_3740, NI64 Pos_3741);
N_NIMCALL(NI, Fsgetposition_65336)(TY65323* S_65338);
N_NIMCALL(NI64, Getfilepos_3742)(FILE* F_3744);
N_NIMCALL(NI64, chckRange64)(NI64 I_5523, NI64 A_5524, NI64 B_5525);
N_NIMCALL(NI, Fsreaddata_65340)(TY65323* S_65342, void* Buffer_65343, NI Buflen_65344);
N_NIMCALL(NI, Readbuffer_3714)(FILE* F_3716, void* Buffer_3717, NI Len_3718);
N_NIMCALL(void, Fswritedata_65346)(TY65323* S_65348, void* Buffer_65349, NI Buflen_65350);
N_NIMCALL(NI, Writebuffer_3733)(FILE* F_3735, void* Buffer_3736, NI Len_3737);
N_NIMCALL(void, raiseException)(E_Base* E_5204, NCSTRING Ename_5205);
N_NIMCALL(TY65323*, Newfilestream_65354)(FILE* F_65356);
N_NIMCALL(TY65323*, Newfilestream_65373)(NimStringDesc* Filename_65375, NU8 Mode_65376);
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623);
N_NIMCALL(void, Read_65089)(TY65027* S_65092, NIM_BOOL* Result_65094);
N_NIMCALL(void, Read_65106)(TY65027* S_65109, NI8* Result_65111);
N_NIMCALL(void, Read_65123)(TY65027* S_65126, NI16* Result_65128);
N_NIMCALL(void, Read_65140)(TY65027* S_65143, int* Result_65145);
N_NIMCALL(void, Read_65157)(TY65027* S_65160, NI64* Result_65162);
N_NIMCALL(void, Read_65174)(TY65027* S_65177, NF32* Result_65179);
N_NIMCALL(void, Read_65191)(TY65027* S_65194, NF64* Result_65196);
STRING_LITERAL(TMP65222, "", 0);
STRING_LITERAL(TMP65353, "cannot write to stream", 22);
STRING_LITERAL(TMP65401, "cannot read from stream", 23);
extern TNimType* NTI4262; /* ref EIO */
extern TNimType* NTI420; /* EIO */
extern TY11190 Gch_11210;
extern TNimType* NTI65224; /* PStringStream */
extern TNimType* NTI65226; /* TStringStream */
extern TNimType* NTI65321; /* PFileStream */
extern TNimType* NTI65323; /* TFileStream */
static N_INLINE(TY10802*, Usrtocell_11236)(void* Usr_11238) {
TY10802* Result_11239;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "usrToCell";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11239 = 0;
F.line = 100;F.filename = "gc.nim";
Result_11239 = ((TY10802*) ((NI32)((NU32)(((NI) (Usr_11238))) - (NU32)(((NI) (((NI)sizeof(TY10802))))))));
framePtr = framePtr->prev;
return Result_11239;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7408;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicInc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7408 = 0;
F.line = 29;F.filename = "systhread.nim";
Result_7408 = __sync_add_and_fetch(Memloc_3004, X_3005);
framePtr = framePtr->prev;
return Result_7408;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7606;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicDec";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7606 = 0;
F.line = 37;F.filename = "systhread.nim";
Result_7606 = __sync_sub_and_fetch(Memloc_3009, X_3010);
framePtr = framePtr->prev;
return Result_7606;
}
static N_INLINE(void, Rtladdzct_11858)(TY10802* C_11860) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 211;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 211;F.filename = "gc.nim";
pthread_mutex_lock(&Gch_11210.Zctlock);
LA2: ;
F.line = 212;F.filename = "gc.nim";
Addzct_11225(&Gch_11210.Zct, C_11860);
F.line = 213;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 213;F.filename = "gc.nim";
pthread_mutex_unlock(&Gch_11210.Zctlock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12018, void* Src_12019) {
TY10802* C_12020;
NI LOC4;
TY10802* C_12022;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRefNoCycle";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 244;F.filename = "gc.nim";
if (!!((Src_12019 == NIM_NIL))) goto LA2;
C_12020 = 0;
F.line = 245;F.filename = "gc.nim";
C_12020 = Usrtocell_11236(Src_12019);
F.line = 246;F.filename = "gc.nim";
LOC4 = Atomicinc_3001(&(*C_12020).Refcount, 8);
LA2: ;
F.line = 247;F.filename = "gc.nim";
if (!!(((*Dest_12018) == NIM_NIL))) goto LA6;
C_12022 = 0;
F.line = 248;F.filename = "gc.nim";
C_12022 = Usrtocell_11236((*Dest_12018));
F.line = 249;F.filename = "gc.nim";
LOC9 = Atomicdec_3006(&(*C_12022).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
F.line = 250;F.filename = "gc.nim";
Rtladdzct_11858(C_12022);
LA10: ;
LA6: ;
F.line = 251;F.filename = "gc.nim";
(*Dest_12018) = Src_12019;
framePtr = framePtr->prev;
}
N_NIMCALL(TY420*, Neweio_65004)(NimStringDesc* Msg_65006) {
TY420* Result_65008;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newEIO";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65008 = 0;
F.line = 16;F.filename = "streams.nim";
Result_65008 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*Result_65008).Sup.Sup.Sup.Sup.m_type = NTI420;
F.line = 17;F.filename = "streams.nim";
asgnRefNoCycle((void**) &(*Result_65008).Sup.Sup.Sup.message, copyString(Msg_65006));
framePtr = framePtr->prev;
return Result_65008;
}
N_NIMCALL(void, Write_65064)(TY65027* S_65066, NimStringDesc* X_65067) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "write";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 42;F.filename = "streams.nim";
(*S_65066).Writedata(S_65066, ((void*) (X_65067->data)), X_65067->Sup.len);
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_CHAR, Readchar_65077)(TY65027* S_65079) {
NIM_CHAR Result_65080;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65080 = 0;
F.line = 52;F.filename = "streams.nim";
LOC1 = (*S_65079).Readdata(S_65079, ((void*) (&Result_65080)), 1);
framePtr = framePtr->prev;
return Result_65080;
}
N_NIMCALL(NIM_BOOL, Readbool_65082)(TY65027* S_65084) {
NIM_BOOL Result_65085;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readBool";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65085 = 0;
F.line = 56;F.filename = "streams.nim";
Read_65089(S_65084, &Result_65085);
framePtr = framePtr->prev;
return Result_65085;
}
N_NIMCALL(NI8, Readint8_65099)(TY65027* S_65101) {
NI8 Result_65102;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readInt8";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65102 = 0;
F.line = 60;F.filename = "streams.nim";
Read_65106(S_65101, &Result_65102);
framePtr = framePtr->prev;
return Result_65102;
}
N_NIMCALL(NI16, Readint16_65116)(TY65027* S_65118) {
NI16 Result_65119;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readInt16";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65119 = 0;
F.line = 64;F.filename = "streams.nim";
Read_65123(S_65118, &Result_65119);
framePtr = framePtr->prev;
return Result_65119;
}
N_NIMCALL(int, Readint32_65133)(TY65027* S_65135) {
int Result_65136;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readInt32";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65136 = 0;
F.line = 68;F.filename = "streams.nim";
Read_65140(S_65135, &Result_65136);
framePtr = framePtr->prev;
return Result_65136;
}
N_NIMCALL(NI64, Readint64_65150)(TY65027* S_65152) {
NI64 Result_65153;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readInt64";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65153 = 0;
F.line = 72;F.filename = "streams.nim";
Read_65157(S_65152, &Result_65153);
framePtr = framePtr->prev;
return Result_65153;
}
N_NIMCALL(NF32, Readfloat32_65167)(TY65027* S_65169) {
NF32 Result_65170;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readFloat32";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65170 = 0;
F.line = 76;F.filename = "streams.nim";
Read_65174(S_65169, &Result_65170);
framePtr = framePtr->prev;
return Result_65170;
}
N_NIMCALL(NF64, Readfloat64_65184)(TY65027* S_65186) {
NF64 Result_65187;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readFloat64";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65187 = 0;
F.line = 80;F.filename = "streams.nim";
Read_65191(S_65186, &Result_65187);
framePtr = framePtr->prev;
return Result_65187;
}
N_NIMCALL(NimStringDesc*, Readstr_65201)(TY65027* S_65203, NI Length_65204) {
NimStringDesc* Result_65205;
NI L_65207;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65205 = 0;
F.line = 85;F.filename = "streams.nim";
Result_65205 = mnewString(Length_65204);
L_65207 = 0;
F.line = 86;F.filename = "streams.nim";
if ((NU)(0) > (NU)(Result_65205->Sup.len)) raiseIndexError();
L_65207 = (*S_65203).Readdata(S_65203, ((void*) (&Result_65205->data[0])), Length_65204);
F.line = 87;F.filename = "streams.nim";
if (!!((L_65207 == Length_65204))) goto LA2;
F.line = 87;F.filename = "streams.nim";
Result_65205 = setLengthStr(Result_65205, L_65207);
LA2: ;
framePtr = framePtr->prev;
return Result_65205;
}
N_NIMCALL(NimStringDesc*, Readline_65210)(TY65027* S_65212) {
NimStringDesc* Result_65213;
NIM_BOOL LOC2;
NIM_CHAR C_65214;
NIM_BOOL LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "readLine";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65213 = 0;
F.line = 92;F.filename = "streams.nim";
Result_65213 = copyString(((NimStringDesc*) &TMP65222));
F.line = 93;F.filename = "streams.nim";
while (1) {
LOC2 = (*S_65212).Atend(S_65212);
if (!!(LOC2)) goto LA1;
C_65214 = 0;
F.line = 94;F.filename = "streams.nim";
C_65214 = Readchar_65077(S_65212);
F.line = 95;F.filename = "streams.nim";
if (!((NU8)(C_65214) == (NU8)(13))) goto LA4;
F.line = 96;F.filename = "streams.nim";
C_65214 = Readchar_65077(S_65212);
F.line = 97;F.filename = "streams.nim";
goto LA1;
goto LA3;
LA4: ;
LOC6 = ((NU8)(C_65214) == (NU8)(10));
if (LOC6) goto LA7;
LOC6 = ((NU8)(C_65214) == (NU8)(0));
LA7: ;
if (!LOC6) goto LA8;
F.line = 98;F.filename = "streams.nim";
goto LA1;
goto LA3;
LA8: ;
LA3: ;
F.line = 99;F.filename = "streams.nim";
Result_65213 = addChar(Result_65213, C_65214);
} LA1: ;
framePtr = framePtr->prev;
return Result_65213;
}
N_NIMCALL(NIM_BOOL, Ssatend_65229)(TY65226* S_65231) {
NIM_BOOL Result_65232;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssAtEnd";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65232 = 0;
F.line = 108;F.filename = "streams.nim";
F.line = 587;F.filename = "system.nim";
Result_65232 = ((*S_65231).Data->Sup.len <= (*S_65231).Pos);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_65232;
}
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004) {
NI Result_6005;
NIM_BOOL LOC2;
Result_6005 = 0;
Result_6005 = (NI32)((NU32)(A_6003) - (NU32)(B_6004));
LOC2 = (0 <= (NI32)(Result_6005 ^ A_6003));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI32)(Result_6005 ^ (NI32)((NU32) ~(B_6004))));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_6005;
}
N_NIMCALL(void, Sssetposition_65237)(TY65226* S_65239, NI Pos_65240) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssSetPosition";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 111;F.filename = "streams.nim";
(*S_65239).Pos = ((Pos_65240 <= subInt((*S_65239).Data->Sup.len, 1)) ? Pos_65240 : subInt((*S_65239).Data->Sup.len, 1));
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Ssgetposition_65245)(TY65226* S_65247) {
NI Result_65248;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssGetPosition";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65248 = 0;
F.line = 114;F.filename = "streams.nim";
F.line = 114;F.filename = "streams.nim";
Result_65248 = (*S_65247).Pos;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_65248;
}
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804) {
NI Result_5805;
NIM_BOOL LOC2;
Result_5805 = 0;
Result_5805 = (NI32)((NU32)(A_5803) + (NU32)(B_5804));
LOC2 = (0 <= (NI32)(Result_5805 ^ A_5803));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI32)(Result_5805 ^ B_5804));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5805;
}
N_NIMCALL(NI, Ssreaddata_65249)(TY65226* S_65251, void* Buffer_65252, NI Buflen_65253) {
NI Result_65254;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssReadData";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65254 = 0;
F.line = 117;F.filename = "streams.nim";
Result_65254 = ((Buflen_65253 <= subInt((*S_65251).Data->Sup.len, (*S_65251).Pos)) ? Buflen_65253 : subInt((*S_65251).Data->Sup.len, (*S_65251).Pos));
F.line = 118;F.filename = "streams.nim";
if (!(0 < Result_65254)) goto LA2;
F.line = 119;F.filename = "streams.nim";
if ((NU)((*S_65251).Pos) > (NU)((*S_65251).Data->Sup.len)) raiseIndexError();
memcpy(Buffer_65252, ((void*) (&(*S_65251).Data->data[(*S_65251).Pos])), Result_65254);
F.line = 120;F.filename = "streams.nim";
(*S_65251).Pos = addInt((*S_65251).Pos, Result_65254);
LA2: ;
framePtr = framePtr->prev;
return Result_65254;
}
N_NIMCALL(void, Sswritedata_65274)(TY65226* S_65276, void* Buffer_65277, NI Buflen_65278) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssWriteData";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 123;F.filename = "streams.nim";
if (!(0 < Buflen_65278)) goto LA2;
F.line = 124;F.filename = "streams.nim";
(*S_65276).Data = setLengthStr((*S_65276).Data, addInt((*S_65276).Data->Sup.len, Buflen_65278));
F.line = 125;F.filename = "streams.nim";
if ((NU)((*S_65276).Pos) > (NU)((*S_65276).Data->Sup.len)) raiseIndexError();
memcpy(((void*) (&(*S_65276).Data->data[(*S_65276).Pos])), Buffer_65277, Buflen_65278);
F.line = 126;F.filename = "streams.nim";
(*S_65276).Pos = addInt((*S_65276).Pos, Buflen_65278);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Ssclose_65296)(TY65226* S_65298) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ssClose";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 129;F.filename = "streams.nim";
asgnRefNoCycle((void**) &(*S_65298).Data, copyString(NIM_NIL));
framePtr = framePtr->prev;
}
N_NIMCALL(TY65226*, Newstringstream_65299)(NimStringDesc* S_65301) {
TY65226* Result_65302;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newStringStream";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65302 = 0;
F.line = 133;F.filename = "streams.nim";
Result_65302 = (TY65226*) newObj(NTI65224, sizeof(TY65226));
(*Result_65302).Sup.Sup.m_type = NTI65226;
F.line = 134;F.filename = "streams.nim";
asgnRefNoCycle((void**) &(*Result_65302).Data, copyString(S_65301));
F.line = 135;F.filename = "streams.nim";
(*Result_65302).Pos = 0;
F.line = 136;F.filename = "streams.nim";
(*Result_65302).Sup.Close = ((TY65028) (Ssclose_65296));
F.line = 137;F.filename = "streams.nim";
(*Result_65302).Sup.Atend = ((TY65032) (Ssatend_65229));
F.line = 138;F.filename = "streams.nim";
(*Result_65302).Sup.Setposition = ((TY65036) (Sssetposition_65237));
F.line = 139;F.filename = "streams.nim";
(*Result_65302).Sup.Getposition = ((TY65041) (Ssgetposition_65245));
F.line = 140;F.filename = "streams.nim";
(*Result_65302).Sup.Readdata = ((TY65045) (Ssreaddata_65249));
F.line = 141;F.filename = "streams.nim";
(*Result_65302).Sup.Writedata = ((TY65051) (Sswritedata_65274));
framePtr = framePtr->prev;
return Result_65302;
}
N_NIMCALL(void, Fsclose_65325)(TY65323* S_65327) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsClose";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 148;F.filename = "streams.nim";
fclose((*S_65327).F);
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_BOOL, Fsatend_65328)(TY65323* S_65330) {
NIM_BOOL Result_65331;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsAtEnd";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65331 = 0;
F.line = 149;F.filename = "streams.nim";
F.line = 149;F.filename = "streams.nim";
Result_65331 = Endoffile_3638((*S_65330).F);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_65331;
}
N_NIMCALL(void, Fssetposition_65332)(TY65323* S_65334, NI Pos_65335) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsSetPosition";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 150;F.filename = "streams.nim";
Setfilepos_3738((*S_65334).F, ((NI64) (Pos_65335)));
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Fsgetposition_65336)(TY65323* S_65338) {
NI Result_65339;
NI64 LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsGetPosition";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65339 = 0;
F.line = 151;F.filename = "streams.nim";
F.line = 151;F.filename = "streams.nim";
LOC1 = Getfilepos_3742((*S_65338).F);
Result_65339 = ((NI)chckRange64(LOC1, (-2147483647 -1), 2147483647));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_65339;
}
N_NIMCALL(NI, Fsreaddata_65340)(TY65323* S_65342, void* Buffer_65343, NI Buflen_65344) {
NI Result_65345;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsReadData";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65345 = 0;
F.line = 154;F.filename = "streams.nim";
Result_65345 = Readbuffer_3714((*S_65342).F, Buffer_65343, Buflen_65344);
framePtr = framePtr->prev;
return Result_65345;
}
N_NIMCALL(void, Fswritedata_65346)(TY65323* S_65348, void* Buffer_65349, NI Buflen_65350) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "fsWriteData";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 157;F.filename = "streams.nim";
LOC2 = Writebuffer_3733((*S_65348).F, Buffer_65349, Buflen_65350);
if (!!((LOC2 == Buflen_65350))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_65004(((NimStringDesc*) &TMP65353));
F.line = 158;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(TY65323*, Newfilestream_65354)(FILE* F_65356) {
TY65323* Result_65357;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newFileStream";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65357 = 0;
F.line = 162;F.filename = "streams.nim";
Result_65357 = (TY65323*) newObj(NTI65321, sizeof(TY65323));
(*Result_65357).Sup.Sup.m_type = NTI65323;
F.line = 163;F.filename = "streams.nim";
(*Result_65357).F = F_65356;
F.line = 164;F.filename = "streams.nim";
(*Result_65357).Sup.Close = ((TY65028) (Fsclose_65325));
F.line = 165;F.filename = "streams.nim";
(*Result_65357).Sup.Atend = ((TY65032) (Fsatend_65328));
F.line = 166;F.filename = "streams.nim";
(*Result_65357).Sup.Setposition = ((TY65036) (Fssetposition_65332));
F.line = 167;F.filename = "streams.nim";
(*Result_65357).Sup.Getposition = ((TY65041) (Fsgetposition_65336));
F.line = 168;F.filename = "streams.nim";
(*Result_65357).Sup.Readdata = ((TY65045) (Fsreaddata_65340));
F.line = 169;F.filename = "streams.nim";
(*Result_65357).Sup.Writedata = ((TY65051) (Fswritedata_65346));
framePtr = framePtr->prev;
return Result_65357;
}
N_NIMCALL(TY65323*, Newfilestream_65373)(NimStringDesc* Filename_65375, NU8 Mode_65376) {
TY65323* Result_65377;
FILE* F_65378;
NIM_BOOL LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newFileStream";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_65377 = 0;
F_65378 = 0;
F.line = 175;F.filename = "streams.nim";
LOC2 = Open_3617(&F_65378, Filename_65375, Mode_65376, -1);
if (!LOC2) goto LA3;
F.line = 175;F.filename = "streams.nim";
Result_65377 = Newfilestream_65354(F_65378);
LA3: ;
framePtr = framePtr->prev;
return Result_65377;
}
N_NIMCALL(void, Read_65089)(TY65027* S_65092, NIM_BOOL* Result_65094) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_65092).Readdata(S_65092, ((void*) (Result_65094)), 1);
if (!!((LOC2 == 1))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_65004(((NimStringDesc*) &TMP65401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_65106)(TY65027* S_65109, NI8* Result_65111) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_65109).Readdata(S_65109, ((void*) (Result_65111)), 1);
if (!!((LOC2 == 1))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_65004(((NimStringDesc*) &TMP65401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_65123)(TY65027* S_65126, NI16* Result_65128) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_65126).Readdata(S_65126, ((void*) (Result_65128)), 2);
if (!!((LOC2 == 2))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_65004(((NimStringDesc*) &TMP65401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_65140)(TY65027* S_65143, int* Result_65145) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_65143).Readdata(S_65143, ((void*) (Result_65145)), 4);
if (!!((LOC2 == 4))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_65004(((NimStringDesc*) &TMP65401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_65157)(TY65027* S_65160, NI64* Result_65162) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_65160).Readdata(S_65160, ((void*) (Result_65162)), 8);
if (!!((LOC2 == 8))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_65004(((NimStringDesc*) &TMP65401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_65174)(TY65027* S_65177, NF32* Result_65179) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_65177).Readdata(S_65177, ((void*) (Result_65179)), 4);
if (!!((LOC2 == 4))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_65004(((NimStringDesc*) &TMP65401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Read_65191)(TY65027* S_65194, NF64* Result_65196) {
NI LOC2;
TY420* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "read";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 46;F.filename = "streams.nim";
LOC2 = (*S_65194).Readdata(S_65194, ((void*) (Result_65196)), 8);
if (!!((LOC2 == 8))) goto LA3;
LOC5 = 0;
LOC5 = Neweio_65004(((NimStringDesc*) &TMP65401));
F.line = 47;F.filename = "streams.nim";
raiseException((E_Base*)LOC5, "EIO");
LA3: ;
framePtr = framePtr->prev;
}
N_NOINLINE(void, streamsInit)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "streams";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/streams.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}

