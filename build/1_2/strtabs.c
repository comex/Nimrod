/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct TY60408 TY60408;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY40006 TY40006;
typedef struct TY40004 TY40004;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY10602 TY10602;
typedef struct TY8004 TY8004;
typedef struct TY10990 TY10990;
typedef struct TY10618 TY10618;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY10988 TY10988;
typedef struct TY440 TY440;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY40004 {
NimStringDesc* Key;
NimStringDesc* Val;
};
struct TY60408 {
  TNimObject Sup;
NI Counter;
TY40006* Data;
NU8 Mode;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
typedef N_STDCALL_PTR(void, TY8016) (TY8004* L_8018);
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY8004 {
void* Debuginfo;
NI32 Lockcount;
NI32 Recursioncount;
NI Owningthread;
NI Locksemaphore;
NI32 Reserved;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY8004 Cyclerootslock;
TY8004 Zctlock;
TY10988 Stat;
};
typedef N_STDCALL_PTR(void, TY8020) (TY8004* L_8022);
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct E_Base {
  TNimObject Sup;
E_Base* parent;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY440 {
  TY416 Sup;
};
typedef NU8 TY21402[32];
typedef NI TY8614[8];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY40006 {
  TGenericSeq Sup;
  TY40004 data[SEQ_DECL_SIZE];
};
N_NIMCALL(NI, nstlen)(TY60408* T_60421);
N_NIMCALL(NI, Myhash_60466)(TY60408* T_60468, NimStringDesc* Key_60469);
N_NIMCALL(NI, Hash_59480)(NimStringDesc* X_59482);
N_NIMCALL(NI, Hashignorecase_59577)(NimStringDesc* X_59579);
N_NIMCALL(NI, Hashignorestyle_59521)(NimStringDesc* X_59523);
N_NIMCALL(NIM_BOOL, Mycmp_60471)(TY60408* T_60473, NimStringDesc* A_60474, NimStringDesc* B_60475);
N_NIMCALL(NI, Cmp_1321)(NimStringDesc* X_1323, NimStringDesc* Y_1324);
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* A_23595, NimStringDesc* B_23596);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_23638, NimStringDesc* B_23639);
N_NIMCALL(NIM_BOOL, Mustrehash_60483)(NI Length_60485, NI Counter_60486);
N_NIMCALL(void, internalAssert)(NCSTRING File_5254, NI Line_5255, NIM_BOOL Cond_5256);
N_NIMCALL(NI, mulInt)(NI A_6803, NI B_6804);
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004);
N_NOINLINE(void, raiseOverflow)(void);
static N_INLINE(NI, Nexttry_60494)(NI H_60496, NI Maxhash_60497);
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804);
N_NIMCALL(NI, Rawget_60499)(TY60408* T_60501, NimStringDesc* Key_60502);
N_NOINLINE(void, raiseIndexError)(void);
N_NIMCALL(NimStringDesc*, nstGet)(TY60408* T_60508, NimStringDesc* Key_60509);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17308);
N_NIMCALL(NIM_BOOL, nsthasKey)(TY60408* T_60517, NimStringDesc* Key_60518);
N_NIMCALL(void, Rawinsert_60522)(TY60408* T_60524, TY40006** Data_60526, NimStringDesc* Key_60527, NimStringDesc* Val_60528);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819);
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660);
N_NOINLINE(void, Addzct_11025)(TY10618* S_11028, TY10602* C_11029);
N_NIMCALL(void, Enlarge_60531)(TY60408* T_60533);
N_NIMCALL(void*, newSeq)(TNimType* Typ_12804, NI Len_12805);
N_NIMCALL(void, nstPut)(TY60408* T_60583, NimStringDesc* Key_60584, NimStringDesc* Val_60585);
N_NIMCALL(void, Raiseformatexception_60612)(NimStringDesc* S_60614);
N_NIMCALL(void*, newObj)(TNimType* Typ_12307, NI Size_12308);
static N_INLINE(void, appendString)(NimStringDesc* Dest_17392, NimStringDesc* Src_17393);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_17287);
N_NIMCALL(void, raiseException)(E_Base* E_5204, NCSTRING Ename_5205);
N_NIMCALL(NimStringDesc*, Getvalue_60641)(TY60408* T_60643, NU8 Flags_60645, NimStringDesc* Key_60646);
N_NIMCALL(NimStringDesc*, Getenv_34425)(NimStringDesc* Key_34427);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17409, NIM_CHAR C_17410);
N_NIMCALL(TY60408*, nstnewStringTable)(NU8 Mode_60691);
N_NIMCALL(TY60408*, nstnewStringTableWithPairs)(NimStringDesc** Keyvaluepairs_60727, NI Keyvaluepairs_60727Len0, NU8 Mode_60728);
N_NIMCALL(NimStringDesc*, nstFormat)(NimStringDesc* F_60748, TY60408* T_60749, NU8 Flags_60753);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_1928, NI First_1929, NI Last_1930);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_17382, NI Addlen_17383);
STRING_LITERAL(TMP60514, "", 0);
STRING_LITERAL(TMP60640, "format string: key not found: ", 30);
NIM_CONST TY21402 Patternchars_60755 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x87, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
extern TY8016 Dl_8015;
extern TY10990 Gch_11010;
extern TY8020 Dl_8019;
extern TNimType* NTI40006; /* TKeyValuePairSeq */
extern TNimType* NTI40278; /* ref EInvalidValue */
extern TNimType* NTI440; /* EInvalidValue */
extern TNimType* NTI60410; /* PStringTable */
extern TNimType* NTI60408; /* TStringTable */
N_NIMCALL(NI, nstlen)(TY60408* T_60421) {
NI Result_60422;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "len";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60422 = 0;
F.line = 36;F.filename = "strtabs.nim";
Result_60422 = (*T_60421).Counter;
framePtr = framePtr->prev;
return Result_60422;
}
N_NIMCALL(NI, Myhash_60466)(TY60408* T_60468, NimStringDesc* Key_60469) {
NI Result_60470;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "myhash";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60470 = 0;
F.line = 61;F.filename = "strtabs.nim";
switch ((*T_60468).Mode) {
case ((NU8) 0):
F.line = 62;F.filename = "strtabs.nim";
Result_60470 = Hash_59480(Key_60469);
break;
case ((NU8) 1):
F.line = 63;F.filename = "strtabs.nim";
Result_60470 = Hashignorecase_59577(Key_60469);
break;
case ((NU8) 2):
F.line = 64;F.filename = "strtabs.nim";
Result_60470 = Hashignorestyle_59521(Key_60469);
break;
}
framePtr = framePtr->prev;
return Result_60470;
}
N_NIMCALL(NIM_BOOL, Mycmp_60471)(TY60408* T_60473, NimStringDesc* A_60474, NimStringDesc* B_60475) {
NIM_BOOL Result_60476;
NI LOC1;
NI LOC2;
NI LOC3;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "myCmp";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60476 = 0;
F.line = 67;F.filename = "strtabs.nim";
switch ((*T_60473).Mode) {
case ((NU8) 0):
F.line = 68;F.filename = "strtabs.nim";
LOC1 = Cmp_1321(A_60474, B_60475);
Result_60476 = (LOC1 == 0);
break;
case ((NU8) 1):
F.line = 69;F.filename = "strtabs.nim";
LOC2 = nsuCmpIgnoreCase(A_60474, B_60475);
Result_60476 = (LOC2 == 0);
break;
case ((NU8) 2):
F.line = 70;F.filename = "strtabs.nim";
LOC3 = nsuCmpIgnoreStyle(A_60474, B_60475);
Result_60476 = (LOC3 == 0);
break;
}
framePtr = framePtr->prev;
return Result_60476;
}
static N_INLINE(NI, subInt)(NI A_6003, NI B_6004) {
NI Result_6005;
NIM_BOOL LOC2;
Result_6005 = 0;
Result_6005 = (NI64)((NU64)(A_6003) - (NU64)(B_6004));
LOC2 = (0 <= (NI64)(Result_6005 ^ A_6003));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_6005 ^ (NI64)((NU64) ~(B_6004))));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_6005;
}
N_NIMCALL(NIM_BOOL, Mustrehash_60483)(NI Length_60485, NI Counter_60486) {
NIM_BOOL Result_60487;
NIM_BOOL LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "mustRehash";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60487 = 0;
F.line = 73;F.filename = "strtabs.nim";
internalAssert("/home/andreas/projects/nimrod/lib/pure/strtabs.nim", 73, (Counter_60486 < Length_60485));
F.line = 74;F.filename = "strtabs.nim";
LOC1 = (mulInt(Length_60485, 2) < mulInt(Counter_60486, 3));
if (LOC1) goto LA2;
LOC1 = (subInt(Length_60485, Counter_60486) < 4);
LA2: ;
Result_60487 = LOC1;
framePtr = framePtr->prev;
return Result_60487;
}
static N_INLINE(NI, addInt)(NI A_5803, NI B_5804) {
NI Result_5805;
NIM_BOOL LOC2;
Result_5805 = 0;
Result_5805 = (NI64)((NU64)(A_5803) + (NU64)(B_5804));
LOC2 = (0 <= (NI64)(Result_5805 ^ A_5803));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_5805 ^ B_5804));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5805;
}
static N_INLINE(NI, Nexttry_60494)(NI H_60496, NI Maxhash_60497) {
NI Result_60498;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nextTry";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60498 = 0;
F.line = 77;F.filename = "strtabs.nim";
Result_60498 = (NI64)(addInt(mulInt(5, H_60496), 1) & Maxhash_60497);
framePtr = framePtr->prev;
return Result_60498;
}
N_NIMCALL(NI, Rawget_60499)(TY60408* T_60501, NimStringDesc* Key_60502) {
NI Result_60503;
NI H_60504;
NI LOC1;
NIM_BOOL LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "RawGet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60503 = 0;
H_60504 = 0;
F.line = 81;F.filename = "strtabs.nim";
LOC1 = Myhash_60466(T_60501, Key_60502);
H_60504 = (NI64)(LOC1 & ((*T_60501).Data->Sup.len-1));
F.line = 82;F.filename = "strtabs.nim";
while (1) {
if ((NU)(H_60504) >= (NU)((*T_60501).Data->Sup.len)) raiseIndexError();
if (!!((*T_60501).Data->data[H_60504].Key == 0)) goto LA2;
F.line = 83;F.filename = "strtabs.nim";
if ((NU)(H_60504) >= (NU)((*T_60501).Data->Sup.len)) raiseIndexError();
LOC4 = Mycmp_60471(T_60501, (*T_60501).Data->data[H_60504].Key, Key_60502);
if (!LOC4) goto LA5;
F.line = 84;F.filename = "strtabs.nim";
F.line = 84;F.filename = "strtabs.nim";
Result_60503 = H_60504;
goto BeforeRet;
LA5: ;
F.line = 85;F.filename = "strtabs.nim";
H_60504 = Nexttry_60494(H_60504, ((*T_60501).Data->Sup.len-1));
} LA2: ;
F.line = 86;F.filename = "strtabs.nim";
Result_60503 = -1;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_60503;
}
N_NIMCALL(NimStringDesc*, nstGet)(TY60408* T_60508, NimStringDesc* Key_60509) {
NimStringDesc* Result_60510;
NI Index_60511;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "[]";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60510 = 0;
Index_60511 = 0;
F.line = 93;F.filename = "strtabs.nim";
Index_60511 = Rawget_60499(T_60508, Key_60509);
F.line = 94;F.filename = "strtabs.nim";
if (!(0 <= Index_60511)) goto LA2;
F.line = 94;F.filename = "strtabs.nim";
if ((NU)(Index_60511) >= (NU)((*T_60508).Data->Sup.len)) raiseIndexError();
Result_60510 = copyString((*T_60508).Data->data[Index_60511].Val);
goto LA1;
LA2: ;
F.line = 95;F.filename = "strtabs.nim";
Result_60510 = copyString(((NimStringDesc*) &TMP60514));
LA1: ;
framePtr = framePtr->prev;
return Result_60510;
}
N_NIMCALL(NIM_BOOL, nsthasKey)(TY60408* T_60517, NimStringDesc* Key_60518) {
NIM_BOOL Result_60519;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "hasKey";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60519 = 0;
F.line = 99;F.filename = "strtabs.nim";
LOC1 = Rawget_60499(T_60517, Key_60518);
Result_60519 = (0 <= LOC1);
framePtr = framePtr->prev;
return Result_60519;
}
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038) {
TY10602* Result_11039;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "usrToCell";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11039 = 0;
F.line = 100;F.filename = "gc.nim";
Result_11039 = ((TY10602*) ((NI64)((NU64)(((NI) (Usr_11038))) - (NU64)(((NI) (((NI)sizeof(TY10602))))))));
framePtr = framePtr->prev;
return Result_11039;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7408;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicInc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7408 = 0;
F.line = 29;F.filename = "systhread.nim";
Result_7408 = __sync_add_and_fetch(Memloc_3004, X_3005);
framePtr = framePtr->prev;
return Result_7408;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7606;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicDec";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7606 = 0;
F.line = 37;F.filename = "systhread.nim";
Result_7606 = __sync_sub_and_fetch(Memloc_3009, X_3010);
framePtr = framePtr->prev;
return Result_7606;
}
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 211;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 211;F.filename = "gc.nim";
Dl_8015(&Gch_11010.Zctlock);
LA2: ;
F.line = 212;F.filename = "gc.nim";
Addzct_11025(&Gch_11010.Zct, C_11660);
F.line = 213;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 213;F.filename = "gc.nim";
Dl_8019(&Gch_11010.Zctlock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819) {
TY10602* C_11820;
NI LOC4;
TY10602* C_11822;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRefNoCycle";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 244;F.filename = "gc.nim";
if (!!((Src_11819 == NIM_NIL))) goto LA2;
C_11820 = 0;
F.line = 245;F.filename = "gc.nim";
C_11820 = Usrtocell_11036(Src_11819);
F.line = 246;F.filename = "gc.nim";
LOC4 = Atomicinc_3001(&(*C_11820).Refcount, 8);
LA2: ;
F.line = 247;F.filename = "gc.nim";
if (!!(((*Dest_11818) == NIM_NIL))) goto LA6;
C_11822 = 0;
F.line = 248;F.filename = "gc.nim";
C_11822 = Usrtocell_11036((*Dest_11818));
F.line = 249;F.filename = "gc.nim";
LOC9 = Atomicdec_3006(&(*C_11822).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
F.line = 250;F.filename = "gc.nim";
Rtladdzct_11658(C_11822);
LA10: ;
LA6: ;
F.line = 251;F.filename = "gc.nim";
(*Dest_11818) = Src_11819;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Rawinsert_60522)(TY60408* T_60524, TY40006** Data_60526, NimStringDesc* Key_60527, NimStringDesc* Val_60528) {
NI H_60529;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "RawInsert";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
H_60529 = 0;
F.line = 103;F.filename = "strtabs.nim";
LOC1 = Myhash_60466(T_60524, Key_60527);
H_60529 = (NI64)(LOC1 & ((*Data_60526)->Sup.len-1));
F.line = 104;F.filename = "strtabs.nim";
while (1) {
if ((NU)(H_60529) >= (NU)((*Data_60526)->Sup.len)) raiseIndexError();
if (!!((*Data_60526)->data[H_60529].Key == 0)) goto LA2;
F.line = 105;F.filename = "strtabs.nim";
H_60529 = Nexttry_60494(H_60529, ((*Data_60526)->Sup.len-1));
} LA2: ;
F.line = 106;F.filename = "strtabs.nim";
if ((NU)(H_60529) >= (NU)((*Data_60526)->Sup.len)) raiseIndexError();
asgnRefNoCycle((void**) &(*Data_60526)->data[H_60529].Key, copyString(Key_60527));
F.line = 107;F.filename = "strtabs.nim";
if ((NU)(H_60529) >= (NU)((*Data_60526)->Sup.len)) raiseIndexError();
asgnRefNoCycle((void**) &(*Data_60526)->data[H_60529].Val, copyString(Val_60528));
framePtr = framePtr->prev;
}
N_NIMCALL(void, Enlarge_60531)(TY60408* T_60533) {
TY40006* N_60534;
NI I_60564;
NI HEX3Atmp_60576;
NI Res_60578;
TY40006* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Enlarge";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
N_60534 = 0;
F.line = 111;F.filename = "strtabs.nim";
N_60534 = (TY40006*) newSeq(NTI40006, mulInt((*T_60533).Data->Sup.len, 2));
I_60564 = 0;
HEX3Atmp_60576 = 0;
F.line = 112;F.filename = "strtabs.nim";
HEX3Atmp_60576 = ((*T_60533).Data->Sup.len-1);
Res_60578 = 0;
F.line = 1021;F.filename = "system.nim";
Res_60578 = 0;
F.line = 1022;F.filename = "system.nim";
while (1) {
if (!(Res_60578 <= HEX3Atmp_60576)) goto LA1;
F.line = 1021;F.filename = "system.nim";
I_60564 = Res_60578;
F.line = 113;F.filename = "strtabs.nim";
if ((NU)(I_60564) >= (NU)((*T_60533).Data->Sup.len)) raiseIndexError();
if (!!((*T_60533).Data->data[I_60564].Key == 0)) goto LA3;
F.line = 113;F.filename = "strtabs.nim";
if ((NU)(I_60564) >= (NU)((*T_60533).Data->Sup.len)) raiseIndexError();
if ((NU)(I_60564) >= (NU)((*T_60533).Data->Sup.len)) raiseIndexError();
Rawinsert_60522(T_60533, &N_60534, (*T_60533).Data->data[I_60564].Key, (*T_60533).Data->data[I_60564].Val);
LA3: ;
F.line = 1024;F.filename = "system.nim";
Res_60578 = addInt(Res_60578, 1);
} LA1: ;
F.line = 114;F.filename = "strtabs.nim";
LOC5 = 0;
LOC5 = (*T_60533).Data;
asgnRefNoCycle((void**) &(*T_60533).Data, N_60534);
N_60534 = LOC5;
framePtr = framePtr->prev;
}
N_NIMCALL(void, nstPut)(TY60408* T_60583, NimStringDesc* Key_60584, NimStringDesc* Val_60585) {
NI Index_60586;
NIM_BOOL LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "[]=";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Index_60586 = 0;
F.line = 118;F.filename = "strtabs.nim";
Index_60586 = Rawget_60499(T_60583, Key_60584);
F.line = 119;F.filename = "strtabs.nim";
if (!(0 <= Index_60586)) goto LA2;
F.line = 120;F.filename = "strtabs.nim";
if ((NU)(Index_60586) >= (NU)((*T_60583).Data->Sup.len)) raiseIndexError();
asgnRefNoCycle((void**) &(*T_60583).Data->data[Index_60586].Val, copyString(Val_60585));
goto LA1;
LA2: ;
F.line = 122;F.filename = "strtabs.nim";
LOC5 = Mustrehash_60483((*T_60583).Data->Sup.len, (*T_60583).Counter);
if (!LOC5) goto LA6;
F.line = 122;F.filename = "strtabs.nim";
Enlarge_60531(T_60583);
LA6: ;
F.line = 123;F.filename = "strtabs.nim";
Rawinsert_60522(T_60583, &(*T_60583).Data, Key_60584, Val_60585);
F.line = 124;F.filename = "strtabs.nim";
(*T_60583).Counter = addInt((*T_60583).Counter, 1);
LA1: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_17392, NimStringDesc* Src_17393) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 150;F.filename = "sysstr.nim";
memcpy(((NCSTRING) (&(*Dest_17392).data[((*Dest_17392).Sup.len)-0])), ((NCSTRING) ((*Src_17393).data)), ((NI32) ((NI64)((NI64)((*Src_17393).Sup.len + 1) * 1))));
F.line = 151;F.filename = "sysstr.nim";
(*Dest_17392).Sup.len += (*Src_17393).Sup.len;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Raiseformatexception_60612)(NimStringDesc* S_60614) {
TY440* E_60616;
NimStringDesc* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "RaiseFormatException";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
E_60616 = 0;
F.line = 128;F.filename = "strtabs.nim";
E_60616 = (TY440*) newObj(NTI40278, sizeof(TY440));
(*E_60616).Sup.Sup.Sup.m_type = NTI440;
F.line = 129;F.filename = "strtabs.nim";
LOC1 = 0;
LOC1 = rawNewString(S_60614->Sup.len + 30);
appendString(LOC1, ((NimStringDesc*) &TMP60640));
appendString(LOC1, S_60614);
asgnRefNoCycle((void**) &(*E_60616).Sup.Sup.message, LOC1);
F.line = 130;F.filename = "strtabs.nim";
raiseException((E_Base*)E_60616, "EInvalidValue");
framePtr = framePtr->prev;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17409, NIM_CHAR C_17410) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 154;F.filename = "sysstr.nim";
(*Dest_17409).data[((*Dest_17409).Sup.len)-0] = C_17410;
F.line = 155;F.filename = "sysstr.nim";
(*Dest_17409).data[((NI64)((*Dest_17409).Sup.len + 1))-0] = 0;
F.line = 156;F.filename = "sysstr.nim";
(*Dest_17409).Sup.len += 1;
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, Getvalue_60641)(TY60408* T_60643, NU8 Flags_60645, NimStringDesc* Key_60646) {
NimStringDesc* Result_60647;
NIM_BOOL LOC2;
NimStringDesc* LOC14;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getValue";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60647 = 0;
F.line = 133;F.filename = "strtabs.nim";
LOC2 = nsthasKey(T_60643, Key_60646);
if (!LOC2) goto LA3;
F.line = 133;F.filename = "strtabs.nim";
F.line = 133;F.filename = "strtabs.nim";
Result_60647 = nstGet(T_60643, Key_60646);
goto BeforeRet;
LA3: ;
F.line = 134;F.filename = "strtabs.nim";
if (!((Flags_60645 &(1<<((((NU8) 0))&7)))!=0)) goto LA6;
F.line = 134;F.filename = "strtabs.nim";
Result_60647 = Getenv_34425(Key_60646);
goto LA5;
LA6: ;
F.line = 135;F.filename = "strtabs.nim";
Result_60647 = copyString(((NimStringDesc*) &TMP60514));
LA5: ;
F.line = 136;F.filename = "strtabs.nim";
if (!(Result_60647->Sup.len == 0)) goto LA9;
F.line = 137;F.filename = "strtabs.nim";
if (!((Flags_60645 &(1<<((((NU8) 2))&7)))!=0)) goto LA12;
F.line = 137;F.filename = "strtabs.nim";
LOC14 = 0;
LOC14 = rawNewString(Key_60646->Sup.len + 1);
appendChar(LOC14, 36);
appendString(LOC14, Key_60646);
Result_60647 = LOC14;
goto LA11;
LA12: ;
if (!!(((Flags_60645 &(1<<((((NU8) 1))&7)))!=0))) goto LA15;
F.line = 138;F.filename = "strtabs.nim";
Raiseformatexception_60612(Key_60646);
goto LA11;
LA15: ;
LA11: ;
LA9: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_60647;
}
N_NIMCALL(TY60408*, nstnewStringTable)(NU8 Mode_60691) {
TY60408* Result_60692;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newStringTable";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60692 = 0;
F.line = 143;F.filename = "strtabs.nim";
Result_60692 = (TY60408*) newObj(NTI60410, sizeof(TY60408));
(*Result_60692).Sup.m_type = NTI60408;
F.line = 144;F.filename = "strtabs.nim";
(*Result_60692).Mode = Mode_60691;
F.line = 145;F.filename = "strtabs.nim";
(*Result_60692).Counter = 0;
F.line = 146;F.filename = "strtabs.nim";
asgnRefNoCycle((void**) &(*Result_60692).Data, (TY40006*) newSeq(NTI40006, 64));
framePtr = framePtr->prev;
return Result_60692;
}
N_NIMCALL(TY60408*, nstnewStringTableWithPairs)(NimStringDesc** Keyvaluepairs_60727, NI Keyvaluepairs_60727Len0, NU8 Mode_60728) {
TY60408* Result_60729;
NI I_60730;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newStringTable";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60729 = 0;
F.line = 155;F.filename = "strtabs.nim";
Result_60729 = nstnewStringTable(Mode_60728);
I_60730 = 0;
F.line = 156;F.filename = "strtabs.nim";
I_60730 = 0;
F.line = 157;F.filename = "strtabs.nim";
while (1) {
if (!(I_60730 < (Keyvaluepairs_60727Len0-1))) goto LA1;
F.line = 158;F.filename = "strtabs.nim";
if ((NU)(I_60730) >= (NU)(Keyvaluepairs_60727Len0)) raiseIndexError();
if ((NU)(addInt(I_60730, 1)) >= (NU)(Keyvaluepairs_60727Len0)) raiseIndexError();
nstPut(Result_60729, Keyvaluepairs_60727[I_60730], Keyvaluepairs_60727[addInt(I_60730, 1)]);
F.line = 159;F.filename = "strtabs.nim";
I_60730 = addInt(I_60730, 2);
} LA1: ;
framePtr = framePtr->prev;
return Result_60729;
}
N_NIMCALL(NimStringDesc*, nstFormat)(NimStringDesc* F_60748, TY60408* T_60749, NU8 Flags_60753) {
NimStringDesc* Result_60754;
NI I_60757;
NI J_60776;
NIM_BOOL LOC6;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NI J_60795;
NIM_BOOL LOC11;
NimStringDesc* LOC13;
NimStringDesc* LOC14;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "%";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_60754 = 0;
F.line = 166;F.filename = "strtabs.nim";
Result_60754 = copyString(((NimStringDesc*) &TMP60514));
I_60757 = 0;
F.line = 167;F.filename = "strtabs.nim";
I_60757 = 0;
F.line = 168;F.filename = "strtabs.nim";
while (1) {
if (!(I_60757 < F_60748->Sup.len)) goto LA1;
F.line = 169;F.filename = "strtabs.nim";
if ((NU)(I_60757) > (NU)(F_60748->Sup.len)) raiseIndexError();
if (!((NU8)(F_60748->data[I_60757]) == (NU8)(36))) goto LA3;
F.line = 170;F.filename = "strtabs.nim";
if ((NU)(addInt(I_60757, 1)) > (NU)(F_60748->Sup.len)) raiseIndexError();
switch (((NU8)(F_60748->data[addInt(I_60757, 1)]))) {
case 36:
F.line = 172;F.filename = "strtabs.nim";
Result_60754 = addChar(Result_60754, 36);
F.line = 173;F.filename = "strtabs.nim";
I_60757 = addInt(I_60757, 2);
break;
case 123:
J_60776 = 0;
F.line = 175;F.filename = "strtabs.nim";
J_60776 = addInt(I_60757, 1);
F.line = 176;F.filename = "strtabs.nim";
while (1) {
LOC6 = (J_60776 < F_60748->Sup.len);
if (!(LOC6)) goto LA7;
if ((NU)(J_60776) > (NU)(F_60748->Sup.len)) raiseIndexError();
LOC6 = !(((NU8)(F_60748->data[J_60776]) == (NU8)(125)));
LA7: ;
if (!LOC6) goto LA5;
F.line = 176;F.filename = "strtabs.nim";
J_60776 = addInt(J_60776, 1);
} LA5: ;
F.line = 177;F.filename = "strtabs.nim";
LOC8 = 0;
LOC8 = copyStrLast(F_60748, addInt(I_60757, 2), subInt(J_60776, 1));
LOC9 = 0;
LOC9 = Getvalue_60641(T_60749, Flags_60753, LOC8);
Result_60754 = resizeString(Result_60754, LOC9->Sup.len + 0);
appendString(Result_60754, LOC9);
F.line = 178;F.filename = "strtabs.nim";
I_60757 = addInt(J_60776, 1);
break;
case 97 ... 122:
case 65 ... 90:
case 128 ... 255:
case 95:
J_60795 = 0;
F.line = 180;F.filename = "strtabs.nim";
J_60795 = addInt(I_60757, 1);
F.line = 181;F.filename = "strtabs.nim";
while (1) {
LOC11 = (J_60795 < F_60748->Sup.len);
if (!(LOC11)) goto LA12;
if ((NU)(J_60795) > (NU)(F_60748->Sup.len)) raiseIndexError();
LOC11 = (((NU8)(F_60748->data[J_60795])) >= ((NU8)(97)) && ((NU8)(F_60748->data[J_60795])) <= ((NU8)(122)) || ((NU8)(F_60748->data[J_60795])) >= ((NU8)(65)) && ((NU8)(F_60748->data[J_60795])) <= ((NU8)(90)) || ((NU8)(F_60748->data[J_60795])) >= ((NU8)(48)) && ((NU8)(F_60748->data[J_60795])) <= ((NU8)(57)) || ((NU8)(F_60748->data[J_60795])) == ((NU8)(95)) || ((NU8)(F_60748->data[J_60795])) >= ((NU8)(128)) && ((NU8)(F_60748->data[J_60795])) <= ((NU8)(255)));
LA12: ;
if (!LOC11) goto LA10;
F.line = 181;F.filename = "strtabs.nim";
J_60795 = addInt(J_60795, 1);
} LA10: ;
F.line = 182;F.filename = "strtabs.nim";
LOC13 = 0;
LOC13 = copyStrLast(F_60748, addInt(I_60757, 1), subInt(J_60795, 1));
LOC14 = 0;
LOC14 = Getvalue_60641(T_60749, Flags_60753, LOC13);
Result_60754 = resizeString(Result_60754, LOC14->Sup.len + 0);
appendString(Result_60754, LOC14);
F.line = 183;F.filename = "strtabs.nim";
I_60757 = J_60795;
break;
default:
F.line = 185;F.filename = "strtabs.nim";
if ((NU)(I_60757) > (NU)(F_60748->Sup.len)) raiseIndexError();
Result_60754 = addChar(Result_60754, F_60748->data[I_60757]);
F.line = 186;F.filename = "strtabs.nim";
I_60757 = addInt(I_60757, 1);
break;
}
goto LA2;
LA3: ;
F.line = 188;F.filename = "strtabs.nim";
if ((NU)(I_60757) > (NU)(F_60748->Sup.len)) raiseIndexError();
Result_60754 = addChar(Result_60754, F_60748->data[I_60757]);
F.line = 189;F.filename = "strtabs.nim";
I_60757 = addInt(I_60757, 1);
LA2: ;
} LA1: ;
framePtr = framePtr->prev;
return Result_60754;
}
N_NOINLINE(void, strtabsInit)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "strtabs";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}

